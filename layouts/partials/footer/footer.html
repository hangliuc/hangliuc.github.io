<footer class="site-footer">
    <p>
        <span>æ–‡ç« å‘å¸ƒæ•°é‡ğŸ“ <a id="footer_total_articles">...</a></span>
        <span>æ–‡ç« ç´¯è®¡è®¿é—®æ¬¡æ•°ğŸ“– <a id="footer_total_views">...</a></span><br>
        ç½‘ç«™å·²ç¨³å®šè¿è¡Œ <strong id="footer_uptime">...</strong><br>
        Built with <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a><br>
        Theme <a>Stack</a> designed by Jimmy<br>
    </p>    
</footer>

<script>
(function() {
    // 1. è‡ªåŠ¨åˆ¤æ–­ç¯å¢ƒ
    const isLocal = ["localhost", "127.0.0.1"].includes(window.location.hostname);
    const API_URL = isLocal 
        ? "http://localhost:8080/api/site/info"
        : "https://hangops.top/api/site/info";

    fetch(API_URL)
    .then(res => res.json())
    .then(data => {
        // æ›´æ–°æ€»è®¿é—®é‡
        if(data.total_views !== undefined) {
            document.getElementById("footer_total_views").innerText = data.total_views.toLocaleString();
        }
        // æ›´æ–°æ–‡ç« æ€»æ•°
        if(data.total_articles !== undefined) {
            document.getElementById("footer_total_articles").innerText = data.total_articles;
        }
        // æ›´æ–°è¿è¡Œæ—¶é—´ (å¤„ç†æˆå¤©æ•°)
        if(data.uptime_seconds !== undefined) {
            const days = Math.floor(data.uptime_seconds / 86400);
            document.getElementById("footer_uptime").innerText = days + " å¤©";
        }
    })
    .catch(err => {
        console.error("Footer stats load failed:", err);
        // å¦‚æœåŠ è½½å¤±è´¥ï¼Œå¯ä»¥é€‰æ‹©æ¸…ç©ºæˆ–æ˜¾ç¤º "-"
        // document.getElementById("footer_total_views").innerText = "-";
    });
})();
</script>