<footer class="site-footer">
    <section class="copyright">
        &copy; 
        {{ if or (.Site.Params.footer.since) (.Site.Params.footer.customText) }}
            {{ if .Site.Params.footer.since }}
                {{ if lt .Site.Params.footer.since now.Year }}
                    {{ .Site.Params.footer.since }} - {{ now.Year }}
                {{ else }}
                    {{ now.Year }}
                {{ end }}
            {{ else }}
                {{ now.Year }}
            {{ end }}
        {{ else }}
            {{ now.Year }}
        {{ end }}
        {{ .Site.Title }}
    </section>

    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b>Stack</b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ğŸš€
    </section>
    
    <section style="margin-top: 10px; font-size: 12px; opacity: 0.8;">
        <span>æ–‡ç« å‘å¸ƒ: <strong>{{ len .Site.RegularPages }}</strong> ç¯‡</span>
        &nbsp;|&nbsp;
        
        <span>æ–‡ç« æ€»è®¿é—®: <strong id="footer_total_views">...</strong> æ¬¡</span>
        &nbsp;|&nbsp;
        
        <span>ç½‘ç«™ç¨³å®šè¿è¡Œ: <strong id="footer_uptime">...</strong></span>
    </section>
</footer>

<script>
(function() {
    const isLocal = ["localhost", "127.0.0.1"].includes(window.location.hostname);
    const API_URL = isLocal 
        ? "http://localhost:8080/api/site/info"
        : "https://hangops.top/api/site/info";

    fetch(API_URL)
    .then(res => res.json())
    .then(data => {
        // æ›´æ–°è®¿é—®é‡
        if(data.total_views !== undefined) {
            document.getElementById("footer_total_views").innerText = data.total_views.toLocaleString();
        }
                
        // æ›´æ–°è¿è¡Œæ—¶é—´
        if(data.uptime_seconds !== undefined) {
            const days = Math.floor(data.uptime_seconds / 86400);
            document.getElementById("footer_uptime").innerText = days + " å¤©";
        }
    })
    .catch(console.error);
})();
</script>