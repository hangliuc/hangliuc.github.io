[{"content":"å¾…åŠäº‹é¡¹ å®Œå–„æœç´¢åŠŸèƒ½ å®Œå–„è¯„è®ºåŠŸèƒ½ æ·»åŠ æ–‡ç« å­—æ•°ç»Ÿè®¡ æ·»åŠ ç½‘ç«™è®¿é—®ç»Ÿè®¡(å’Œ busuanzi jsçš„åŒºåˆ«) ç»Ÿè®¡ç½‘ç«™è®¿é—®é‡ï¼Œæ˜¾ç¤ºåœ¨ç½‘ç«™åº•éƒ¨ï¼Œä¿®å¤bugï¼Œä¸€äº›æ²¡è¢«è®¿é—®è¿‡çš„æ–‡ç« ä¸ä¼šè¢«ç»Ÿè®¡ ç»Ÿè®¡æ–‡ç« è®¿é—®é‡ï¼Œè§£å†³ç¬¬äºŒé¡µã€ç¬¬ä¸‰é¡µé¦–ç¯‡æ–‡ç« è®¿é—®ç»Ÿè®¡å¼‚å¸¸é—®é¢˜ æ·»åŠ è‡ªåŠ¨åŒ–è‹±æ–‡ç‰ˆæœ¬ è‡ªåŠ¨å°†ä¸­æ–‡æ–‡ç« ç¿»è¯‘æˆè‹±æ–‡ ç¾åŒ–ç½‘ç«™å³ä¾§è¾¹æ ï¼šæ·»åŠ ä¼˜ç§€æ–‡ç« ,æ ¹æ®è®¿é—®é‡å»ç»Ÿè®¡ å¼€å‘agent åŒæ—¶å‘å¸ƒä¸Šä¼ yuqueã€csdnã€weichat yuque api token éœ€è¦ä»˜è´¹ æœåŠ¡å™¨éƒ¨ç½²ç½‘ç«™ æœåŠ¡å™¨ä¸åœ¨å›½å†…å¯ä»¥å…ˆä¸å¤‡æ¡ˆ\né¦–å¹´ ç»­è´¹ hangops.top Â¥14 Â¥32\néƒ¨ç½²ç›‘æ§ç³»ç»Ÿ éƒ¨ç½²prometheus éƒ¨ç½²grafana ç¾åŒ–æµè§ˆå™¨é¡¶å±‚å›¾æ ‡ å†™å…³äºæˆ‘çš„ä¸€äº›è¯´æ˜ æ–‡ç« ä¸­æ·»åŠ è¿”å›é¡¶éƒ¨åŠŸèƒ½ è¯„è®ºåŠŸèƒ½ä¿®æ”¹ ä¸ºä»€ä¹ˆè¦æ„å»ºè‡ªå·±çš„åšå®¢ æ„å»ºç§æœ‰çŸ¥è¯†åº“ï¼Œè®°å½•å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•ï¼ŒæŠŠä¸€æ¬¡ç»éªŒè½¬ä¸ºé•¿æœŸå¯å¤ç”¨èµ„äº§ ç»ƒä¹ å†™ä½œèƒ½åŠ›ï¼ŒæŠŠå¤æ‚çš„é—®é¢˜è®²æ¸…æ¥š ç»ƒä¹ ä»£ç ä¸æ¶æ„èƒ½åŠ›ï¼Œç¼–å†™åç«¯å¹³å° è‡ªå·±ä»0-1å®è·µ(ç›‘æ§å‘Šè­¦ç³»ç»Ÿã€ELKæ—¥å¿—ã€CDN åŠ é€Ÿä¸ç¼“å­˜ç­–ç•¥) ä½œä¸ºç®€å†å±•ç¤º æœªæ¥å¯æ‰©å±•å˜ç° å†…å®¹ç›¸å…³ ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 - è¿ç»´ - Mysql - Redis - Kafka - ansible - k8s - aws - Linux - Docker - prometheus - Terraform - ç¼–ç¨‹ - Python - Shell - Go - æ•°æ®ç»“æ„ - ç®—æ³• - ä¸“é¢˜ - åšå®¢ç›¸å…³ - é¢è¯•ç›¸å…³ - Liunx æ€§èƒ½ä¼˜åŒ– - Mysql å®æˆ˜ å°½é‡ä¸æ›´æ–°ä¸€äº›åŸºç¡€çš„çŸ¥è¯†ï¼Œé€šè¿‡æµè§ˆå™¨æœç´¢å³å¯ï¼Œå¢å¼ºæœç´¢çŸ¥è¯†çš„èƒ½åŠ›ã€‚é‡ç‚¹è®°å½•ä¸€äº›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚\n","date":1764212685,"permalink":"http://localhost:1313/topic/blogging/todo/","summary":"\u003ch2 id=\"å¾…åŠäº‹é¡¹\"\u003eå¾…åŠäº‹é¡¹\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e å®Œå–„æœç´¢åŠŸèƒ½\u003c/li\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e å®Œå–„è¯„è®ºåŠŸèƒ½\u003c/li\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e æ·»åŠ æ–‡ç« å­—æ•°ç»Ÿè®¡\u003c/li\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e æ·»åŠ ç½‘ç«™è®¿é—®ç»Ÿè®¡(å’Œ busuanzi jsçš„åŒºåˆ«)\n\u003cul\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e ç»Ÿè®¡ç½‘ç«™è®¿é—®é‡ï¼Œæ˜¾ç¤ºåœ¨ç½‘ç«™åº•éƒ¨ï¼Œä¿®å¤bugï¼Œä¸€äº›æ²¡è¢«è®¿é—®è¿‡çš„æ–‡ç« ä¸ä¼šè¢«ç»Ÿè®¡\u003c/li\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e ç»Ÿè®¡æ–‡ç« è®¿é—®é‡ï¼Œè§£å†³ç¬¬äºŒé¡µã€ç¬¬ä¸‰é¡µé¦–ç¯‡æ–‡ç« è®¿é—®ç»Ÿè®¡å¼‚å¸¸é—®é¢˜\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e æ·»åŠ è‡ªåŠ¨åŒ–è‹±æ–‡ç‰ˆæœ¬\nè‡ªåŠ¨å°†ä¸­æ–‡æ–‡ç« ç¿»è¯‘æˆè‹±æ–‡\u003c/li\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e ç¾åŒ–ç½‘ç«™å³ä¾§è¾¹æ ï¼šæ·»åŠ ä¼˜ç§€æ–‡ç« ,æ ¹æ®è®¿é—®é‡å»ç»Ÿè®¡\u003c/li\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e å¼€å‘agent åŒæ—¶å‘å¸ƒä¸Šä¼ yuqueã€csdnã€weichat\n\u003cul\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e yuque api token éœ€è¦ä»˜è´¹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cinput checked=\"\" disabled=\"\" type=\"checkbox\"\u003e æœåŠ¡å™¨éƒ¨ç½²ç½‘ç«™\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæœåŠ¡å™¨ä¸åœ¨å›½å†…å¯ä»¥å…ˆä¸å¤‡æ¡ˆ\u003c/p\u003e","title":"åšå®¢ | å¾…åŠäº‹é¡¹"},{"content":"Containerd å‘½ä»¤è¡Œç®¡ç†å·¥å…· Kubernetes ä» Docker è½¬å‘ containerd çš„åŸå›  æ¶æ„å±‚é¢çš„åŸå›  kubelet å¯åŠ¨ä¸€ä¸ªå®¹å™¨çš„æµç¨‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 kubelet â”‚ â”‚ (è°ƒç”¨ CRI æ¥å£) â–¼ dockershim (K8s ç»´æŠ¤çš„ CRI è½¬æ¢å±‚) â”‚ â”‚ (è°ƒç”¨ Docker Engine API) â–¼ Docker Engine â”‚ â”‚ (è°ƒç”¨ containerd API) â–¼ containerd â”‚ â”‚ (è°ƒç”¨ OCI æ¥å£) â–¼ runc (OCI runtime) â”‚ â””â”€\u0026gt; çœŸæ­£åˆ›å»º Linux å®¹å™¨ (namespace, cgroups, rootfs...) Docker Engine æ˜¯ä¸€ä¸ª å®Œæ•´å¹³å°ï¼ˆæ„å»ºé•œåƒã€ç®¡ç†ç½‘ç»œã€Volumeã€Swarm ç­‰ï¼‰ï¼Œè¿™äº›å¯¹ K8s æ¥è¯´éƒ½æ˜¯å¤šä½™çš„ã€‚ dockershim åªæ˜¯ä¸ºäº†æŠŠ CRIï¼ˆK8s è¯­è¨€ï¼‰ç¿»è¯‘æˆ Docker APIï¼ˆDocker è¯­è¨€ï¼‰ã€‚ å®é™…æ‰§è¡Œå®¹å™¨çš„ï¼Œä¾ç„¶æ˜¯ containerd + runcã€‚ å½“ kubelet ç›´æ¥ä½¿ç”¨ containerd æ—¶ï¼Œè°ƒç”¨é“¾ç®€åŒ–ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 kubelet â”‚ â”‚ (è°ƒç”¨ CRI æ¥å£) â–¼ containerd (å†…ç½® CRI æ’ä»¶) â”‚ â”‚ (è°ƒç”¨ OCI æ¥å£) â–¼ runc (OCI runtime) â”‚ â””â”€\u0026gt; çœŸæ­£åˆ›å»º Linux å®¹å™¨ (namespace, cgroups, rootfs...) å‡å°‘ç»´æŠ¤æˆæœ¬ kubernetes ä» 1.24 å¼€å§‹ï¼Œé»˜è®¤ä½¿ç”¨ containerd ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ã€‚ä¸å†å»ç»´æŠ¤ä¸­é—´dockershim\næ€§èƒ½æå‡ å°‘ä¸€å±‚è°ƒç”¨ï¼Œæ€§èƒ½å’Œç¨³å®šæ€§æ›´å¥½ã€‚\nctr \u0026ndash; Containerdè‡ªå¸¦çš„å‘½ä»¤è¡Œç®¡ç†å·¥å…· 1 2 # åˆ—å‡ºæ‰€æœ‰å‘½åç©ºé—´ sudo ctr namespaces list 1 2 # é•œåƒç›¸å…³å‘½ä»¤ sudo ctr -n=k8s.io images -h ctr ä¸Šä¼ ã€æ‹‰å–é•œåƒæ—¶ä¸æ”¯æŒç™»é™†è®¤è¯ï¼Œåªèƒ½é€šè¿‡\u0026ndash;useræºå¸¦ç”¨æˆ·å¯†ç æ“ä½œ\n1 2 3 sudo ctr -n=k8s.io images pull \\ --user \u0026lt;username\u0026gt;:\u0026lt;password\u0026gt; \\ myregistry.example.com/myrepo/nginx:latest nerdctl (æœ€æ¥è¿‘docker CLI) åŸºæœ¬å’Œdocker CLIå‘½ä»¤ä¸€è‡´ï¼Œåªæ˜¯åœ¨å‘½ä»¤å‰æ·»åŠ äº†nerdctlå‰ç¼€\nå®‰è£…nerdctl 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #!/bin/bash set -e VERSION=${VERSION:-2.2.0} # è‡ªåŠ¨è¯†åˆ«æ¶æ„ ARCH=$(uname -m) if [[ \u0026#34;$ARCH\u0026#34; == \u0026#34;x86_64\u0026#34; ]]; then ARCH=\u0026#34;amd64\u0026#34; elif [[ \u0026#34;$ARCH\u0026#34; == \u0026#34;aarch64\u0026#34; ]]; then ARCH=\u0026#34;arm64\u0026#34; else echo \u0026#34;Unsupported architecture: $ARCH\u0026#34; exit 1 fi DOWNLOAD_URL=\u0026#34;https://github.com/containerd/nerdctl/releases/download/v${VERSION}/nerdctl-${VERSION}-linux-${ARCH}.tar.gz\u0026#34; echo \u0026#34;Downloading nerdctl v$VERSION for $ARCH\u0026#34; wget \u0026#34;$DOWNLOAD_URL\u0026#34; -O nerdctl.tgz echo \u0026#34;Extracting...\u0026#34; tar -xzf nerdctl.tgz # è§£å‹åä¼šå¾—åˆ° nerdctlã€containerdã€runc ç­‰äºŒè¿›åˆ¶ # ä¸€èˆ¬ nerdctl ä½äºå½“å‰ç›®å½•çš„ nerdctl TARGET_DIR=\u0026#34;/usr/local/bin\u0026#34; echo \u0026#34;Moving binaries to $TARGET_DIR (require sudo)\u0026#34; sudo mv nerdctl \u0026#34;${TARGET_DIR}/\u0026#34; echo \u0026#34;Cleaning upâ€¦\u0026#34; rm -f nerdctl.tgz echo \u0026#34;ğŸ‰ nerdctl installation completed!\u0026#34; echo \u0026#34;Version check:\u0026#34; sudo ${TARGET_DIR}/nerdctl --version To list local Kubernetes containers:\n1 nerdctl --namespace k8s.io ps -a ","date":1764211910,"permalink":"http://localhost:1313/ops/docker/containerd%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/","summary":"\u003ch1 id=\"containerd-å‘½ä»¤è¡Œç®¡ç†å·¥å…·\"\u003eContainerd å‘½ä»¤è¡Œç®¡ç†å·¥å…·\n\u003c/h1\u003e\u003ch2 id=\"kubernetes-ä»-docker-è½¬å‘-containerd-çš„åŸå› \"\u003eKubernetes ä» Docker è½¬å‘ containerd çš„åŸå› \n\u003c/h2\u003e\u003ch3 id=\"æ¶æ„å±‚é¢çš„åŸå› \"\u003eæ¶æ„å±‚é¢çš„åŸå› \n\u003c/h3\u003e\u003cp\u003ekubelet å¯åŠ¨ä¸€ä¸ªå®¹å™¨çš„æµç¨‹:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ekubelet\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚ \u003cspan class=\"o\"\u003e(\u003c/span\u003eè°ƒç”¨ CRI æ¥å£\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â–¼\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edockershim \u003cspan class=\"o\"\u003e(\u003c/span\u003eK8s ç»´æŠ¤çš„ CRI è½¬æ¢å±‚\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚ \u003cspan class=\"o\"\u003e(\u003c/span\u003eè°ƒç”¨ Docker Engine API\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â–¼\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eDocker Engine\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚ \u003cspan class=\"o\"\u003e(\u003c/span\u003eè°ƒç”¨ containerd API\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â–¼\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econtainerd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚ \u003cspan class=\"o\"\u003e(\u003c/span\u003eè°ƒç”¨ OCI æ¥å£\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â–¼\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003erunc \u003cspan class=\"o\"\u003e(\u003c/span\u003eOCI runtime\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â”‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e â””â”€\u0026gt; çœŸæ­£åˆ›å»º Linux å®¹å™¨ \u003cspan class=\"o\"\u003e(\u003c/span\u003enamespace, cgroups, rootfs...\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDocker Engine æ˜¯ä¸€ä¸ª å®Œæ•´å¹³å°ï¼ˆæ„å»ºé•œåƒã€ç®¡ç†ç½‘ç»œã€Volumeã€Swarm ç­‰ï¼‰ï¼Œè¿™äº›å¯¹ K8s æ¥è¯´éƒ½æ˜¯å¤šä½™çš„ã€‚\u003c/li\u003e\n\u003cli\u003edockershim åªæ˜¯ä¸ºäº†æŠŠ CRIï¼ˆK8s è¯­è¨€ï¼‰ç¿»è¯‘æˆ Docker APIï¼ˆDocker è¯­è¨€ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå®é™…æ‰§è¡Œå®¹å™¨çš„ï¼Œä¾ç„¶æ˜¯ containerd + runcã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå½“ kubelet ç›´æ¥ä½¿ç”¨ containerd æ—¶ï¼Œè°ƒç”¨é“¾ç®€åŒ–ä¸ºï¼š\u003c/p\u003e","title":"Containerdå‘½ä»¤è¡Œç®¡ç†å·¥å…·"},{"content":"ä¸€äº›å®ç°æ–¹å¼ ç›®å‰çœ‹åˆ°ç½‘ä¸Šå…³äºç½‘ç«™ç»Ÿè®¡åŠŸèƒ½çš„å®ç°æ–¹å¼ï¼š\nåŸºäºbusuanzi jsçš„ç»Ÿè®¡åŠŸèƒ½ åŸºäºWaline çš„ç»Ÿè®¡åŠŸèƒ½ åŸºäºæœåŠ¡å™¨ç«¯çš„ç»Ÿè®¡åŠŸèƒ½ å…³äºä¸Šé¢çš„ä¸¤ç§æ–¹å¼å¤§å®¶å¯ä»¥è‡ªè¡Œåœ¨ç½‘ä¸Šæœç´¢ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è®²äº†ï¼Œä¸»è¦è®²ä¸€ä¸‹åŸºäºè‡ªè¡ŒæœåŠ¡ç«¯çš„ç»Ÿè®¡åŠŸèƒ½ã€‚\nåŸºäºæœåŠ¡å™¨ç«¯çš„ç»Ÿè®¡åŠŸèƒ½ ä¼˜ç‚¹ æ•°æ®æºçœŸå®å¯é ï¼ˆå…¨éƒ¨æ¥è‡ªä½ è‡ªå·±çš„æ•°æ®åº“ï¼‰ è®¿é—®é‡å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘å®šä¹‰ å¯ä»¥è¿›è¡Œå¼ºä¸€è‡´æ€§ç»Ÿè®¡ï¼ˆæ–‡ç« è®¿é—®é‡ã€æ–‡ç« æ•°é‡ã€è¯„è®ºæ•°é‡ç­‰ï¼‰ ä¸ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡ åç»­å¯ä»¥æ¥å…¥ç›‘æ§å‘Šè­¦ç³»ç»Ÿï¼Œå®æ—¶è§‚å¯Ÿ åç»­å¯ä»¥åœ¨è‡ªç ”ç®¡ç†å¹³å°å±•ç¤º ç›®å‰ç»Ÿè®¡åŠŸèƒ½ ç½‘ç«™è®¿é—®é‡ æ–‡ç« è®¿é—®é‡ æ–‡ç« æ€»è®¿é—®é‡ ç½‘ç«™è¿è¡Œæ—¶é—´ \u0026hellip;. å®ç°æ–¹å¼ é‡‡ç”¨gin web æ¡†æ¶ https://github.com/gin-gonic/gin\nä½¿ç”¨ GORM åšæ•°æ®åº“å¯¹è±¡å…³ç³»æ˜ å°„ https://github.com/go-gorm/gorm\nä»¥å¤„ç†POST /api/article/visitï¼Œå…¶ä»–æ¥å£å¤„ç†åŸºæœ¬ç›¸åŒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 func (r *articleRepo) IncreaseViewCount(path string) (int64, error) { // 1. æ‰§è¡Œ Upsert (å­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥)ï¼Œä½“ç°åŸå­æ€§æ“ä½œï¼Œé¿å…å¹¶å‘é—®é¢˜ // SQL: INSERT INTO article_stats ... ON DUPLICATE KEY UPDATE view_count = view_count + 1 err := r.db.Clauses(clause.OnConflict{ Columns: []clause.Column{{Name: \u0026#34;path\u0026#34;}}, DoUpdates: clause.Assignments(map[string]interface{}{ \u0026#34;view_count\u0026#34;: gorm.Expr(\u0026#34;view_count + 1\u0026#34;), }), }).Create(\u0026amp;model.ArticleStat{Path: path, ViewCount: 1}).Error if err != nil { return 0, err } // 2. æŸ¥å‡ºæœ€æ–°çš„å€¼è¿”å› var stat model.ArticleStat err = r.db.Select(\u0026#34;view_count\u0026#34;).Where(\u0026#34;path = ?\u0026#34;, path).First(\u0026amp;stat).Error return stat.ViewCount, err } å‰ç«¯é€»è¾‘ ä¸ŠæŠ¥/article/visit æ¥å£æ—¶å¦‚æœæ˜¯é¦–é¡µ(/)æˆ–è€…åˆ†é¡µ(/page/1)æˆ–è€…æœç´¢(/search/query)ï¼Œä¹Ÿä¼šæ·»åŠ åˆ°æ–‡ç« è®¡æ•°ï¼Œè¿™é‡Œæ’é™¤äº†è¿™ä¸ªbug\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 \u0026lt;script\u0026gt; (function() { const isLocal = [\u0026#34;localhost\u0026#34;, \u0026#34;127.0.0.1\u0026#34;].includes(window.location.hostname); const API_URL = isLocal ? \u0026#34;http://localhost:8080/api/article/visit\u0026#34; : \u0026#34;https://hangops.top/api/article/visit\u0026#34;; const path = window.location.pathname; // å¦‚æœæ˜¯é¦–é¡µ(/)æˆ–è€…åˆ†é¡µ(/page/1)æˆ–è€…æœç´¢(/search/query)ï¼Œç›´æ¥ä»€ä¹ˆéƒ½ä¸åš if (path === \u0026#34;/\u0026#34; || path.includes(\u0026#34;/page/\u0026#34;) || path.includes(\u0026#34;/search/\u0026#34;)) { return; } fetch(API_URL, { method: \u0026#39;POST\u0026#39;, headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39; }, body: JSON.stringify({ path: path }) }) .then(response =\u0026gt; response.json()) .then(data =\u0026gt; { const container = document.getElementById(\u0026#34;article_views_container\u0026#34;); const viewEl = document.getElementById(\u0026#34;article_views\u0026#34;); if (container \u0026amp;\u0026amp; viewEl \u0026amp;\u0026amp; data.views) { viewEl.innerText = data.views; container.style.display = \u0026#34;flex\u0026#34;; } }) .catch(err =\u0026gt; { console.error(\u0026#34;é˜…è¯»é‡è·å–å¤±è´¥:\u0026#34;, err); }); })(); \u0026lt;/script\u0026gt; ","date":1765434212,"permalink":"http://localhost:1313/topic/blogging/site_statistics/","summary":"\u003ch2 id=\"ä¸€äº›å®ç°æ–¹å¼\"\u003eä¸€äº›å®ç°æ–¹å¼\n\u003c/h2\u003e\u003cp\u003eç›®å‰çœ‹åˆ°ç½‘ä¸Šå…³äºç½‘ç«™ç»Ÿè®¡åŠŸèƒ½çš„å®ç°æ–¹å¼ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåŸºäºbusuanzi jsçš„ç»Ÿè®¡åŠŸèƒ½\u003c/li\u003e\n\u003cli\u003eåŸºäºWaline çš„ç»Ÿè®¡åŠŸèƒ½\u003c/li\u003e\n\u003cli\u003eåŸºäºæœåŠ¡å™¨ç«¯çš„ç»Ÿè®¡åŠŸèƒ½\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå…³äºä¸Šé¢çš„ä¸¤ç§æ–¹å¼å¤§å®¶å¯ä»¥è‡ªè¡Œåœ¨ç½‘ä¸Šæœç´¢ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è®²äº†ï¼Œä¸»è¦è®²ä¸€ä¸‹åŸºäºè‡ªè¡ŒæœåŠ¡ç«¯çš„ç»Ÿè®¡åŠŸèƒ½ã€‚\u003c/p\u003e","title":"åšå®¢ | ç½‘ç«™ç»Ÿè®¡åŠŸèƒ½"},{"content":"ä»¥å‰é‡‡ç”¨çš„æ˜¯github pageséƒ¨ç½²ç½‘ç«™ï¼Œç°åœ¨è¿›è¡ŒæœåŠ¡å™¨éƒ¨ç½²ç½‘ç«™ã€‚\nå®‰è£…åŸºç¡€è½¯ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£… EPEL æº sudo yum update -y sudo yum install epel-release -y # å®‰è£… Nginx, Git, å’Œ Certbot sudo yum install nginx git certbot certbot-nginx -y # å¯åŠ¨ Nginx å¹¶è®¾ç½®å¼€æœºè‡ªå¯ sudo systemctl start nginx sudo systemctl enable nginx # åˆ›å»ºç›®å½• sudo mkdir -p /var/www/hangops sudo chown -R root:root /var/www/hangops sudo chmod -R 755 /var/www/hangops é…ç½® Nginx ä¸ HTTPS 1 2 3 4 5 6 sudo vi /etc/nginx/conf.d/hangops.top.conf # æ£€æŸ¥è¯­æ³•æ˜¯å¦æ­£ç¡® sudo nginx -t # å¦‚æœæ˜¾ç¤º successfulï¼Œåˆ™é‡å¯ sudo systemctl reload nginx nginx é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 server { listen 80; server_name hangops.top www.hangops.top; root /var/www/hangops; index index.html; # æ ¸å¿ƒï¼šå¤„ç† Hugo çš„è·¯ç”±ï¼ˆé˜²æ­¢åˆ·æ–° 404ï¼‰ location / { try_files $uri $uri/ =404; } # SRE ä¼˜åŒ–ï¼šå¼€å¯ Gzip å‹ç¼©ï¼ŒåŠ é€Ÿè®¿é—® gzip on; gzip_min_length 1k; gzip_comp_level 5; gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; } ç”³è¯· HTTPS è¯ä¹¦ sudo certbot \u0026ndash;nginx -d hangops.top -d www.hangops.top\né…ç½® GitHub è‡ªåŠ¨éƒ¨ç½² (CI/CD) çœ‹ä»“åº“æºç å³å¯\n","date":1765103484,"permalink":"http://localhost:1313/topic/blogging/blogging_deploy/","summary":"\u003cp\u003eä»¥å‰é‡‡ç”¨çš„æ˜¯github pageséƒ¨ç½²ç½‘ç«™ï¼Œç°åœ¨è¿›è¡ŒæœåŠ¡å™¨éƒ¨ç½²ç½‘ç«™ã€‚\u003c/p\u003e\n\u003ch2 id=\"å®‰è£…åŸºç¡€è½¯ä»¶\"\u003eå®‰è£…åŸºç¡€è½¯ä»¶\n\u003c/h2\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e#  æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£… EPEL æº\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo yum update -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo yum install epel-release -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å®‰è£… Nginx, Git, å’Œ Certbot\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo yum install nginx git certbot certbot-nginx -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¯åŠ¨ Nginx å¹¶è®¾ç½®å¼€æœºè‡ªå¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo systemctl start nginx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo systemctl \u003cspan class=\"nb\"\u003eenable\u003c/span\u003e nginx\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# åˆ›å»ºç›®å½•\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo mkdir -p /var/www/hangops\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo chown -R root:root /var/www/hangops\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo chmod -R \u003cspan class=\"m\"\u003e755\u003c/span\u003e /var/www/hangops\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"é…ç½®-nginx-ä¸-https\"\u003eé…ç½® Nginx ä¸ HTTPS\n\u003c/h2\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e6\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo vi /etc/nginx/conf.d/hangops.top.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# æ£€æŸ¥è¯­æ³•æ˜¯å¦æ­£ç¡®\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo nginx -t \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# å¦‚æœæ˜¾ç¤º successfulï¼Œåˆ™é‡å¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo systemctl reload nginx\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003enginx é…ç½®\u003c/p\u003e","title":"åšå®¢ | æœåŠ¡å™¨éƒ¨ç½²"},{"content":"mysql 1. mysqlæŸ¥è¯¢çªç„¶å˜çš„å¾ˆæ…¢ï¼Œéœ€è¦æ€ä¹ˆæ’æŸ¥ æ£€æŸ¥æŸ¥è¯¢æœ¬èº« æŸ¥çœ‹SQLæŸ¥è¯¢æ˜¯å¦å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚ä½¿ç”¨åˆé€‚çš„ç´¢å¼•ã€é¿å…å…¨è¡¨æ‰«æç­‰ã€‚ å¤æ‚çš„JOINæ“ä½œï¼šç¡®è®¤æ˜¯å¦æœ‰å¤šä¸ªå¤§çš„è¡¨è¿æ¥ï¼Œæˆ–è€…æ˜¯ä¸å¿…è¦çš„å¤æ‚æ“ä½œ æŸ¥çœ‹æ•°æ®åº“æ€§èƒ½ æ…¢æŸ¥è¯¢æ—¥å¿—ï¼šå¯ç”¨å¹¶æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆslow_query_logï¼‰ã€‚æŸ¥çœ‹æœ€è¿‘å“ªäº›æŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¾ƒé•¿ã€‚\næ£€æŸ¥ç³»ç»Ÿè´Ÿè½½ ç³»ç»Ÿèµ„æºï¼šæŸ¥çœ‹CPUã€å†…å­˜ã€ç£ç›˜IOã€ç½‘ç»œç­‰èµ„æºæ˜¯å¦æœ‰ç“¶é¢ˆï¼Œå¯ä»¥é€šè¿‡ top æˆ– htop ç­‰å·¥å…·ç›‘æ§ã€‚ ç£ç›˜IOï¼šæŸ¥çœ‹ç£ç›˜è¯»å†™æ˜¯å¦æˆä¸ºç“¶é¢ˆã€‚å¯ä»¥ç”¨ iostat æˆ– vmstat ç­‰å·¥å…·æŸ¥çœ‹ç£ç›˜IOæƒ…å†µã€‚\næ£€æŸ¥é”å’Œå¹¶å‘é—®é¢˜ é”æƒ…å†µï¼šæŸ¥çœ‹æ˜¯å¦æœ‰é”ç­‰å¾…æˆ–æ­»é”é—®é¢˜ã€‚ä½¿ç”¨ä»¥ä¸‹SQLè¯­å¥æŸ¥çœ‹å½“å‰çš„é”çŠ¶æ€ï¼š å¦‚æœæœ‰å¾ˆå¤šçº¿ç¨‹å¤„äºâ€œLockedâ€çŠ¶æ€ï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥åˆ†æé”çš„æ¥æºå’Œè§£å†³æ–¹æ³•ã€‚\nç½‘ç»œå»¶è¿Ÿ å¦‚æœæ˜¯è¿œç¨‹è¿æ¥MySQLï¼Œç¡®è®¤ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®šï¼Œå»¶è¿Ÿæ˜¯å¦è¾ƒé«˜ã€‚\nredis 1.çƒ­keyã€å¤§keyé—®é¢˜ çƒ­keyé—®é¢˜ çƒ­keyï¼šæŒ‡è¢«é¢‘ç¹è®¿é—®çš„keyï¼Œå¯èƒ½å¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™ã€‚ å½±å“ï¼š\nCPU é›†ä¸­åœ¨ä¸€ä¸ª Redis èŠ‚ç‚¹ QPS ä¸å‡åŒ€ï¼Œé›†ç¾¤è´Ÿè½½å¤±è¡¡ å»¶è¿Ÿé£™å‡ã€è¯·æ±‚è¶…æ—¶ å¯¼è‡´èŠ‚ç‚¹è§¦å‘ failover è§£å†³æ–¹æ¡ˆ\nä¸šåŠ¡å±‚åˆ†æµ/åˆ†æ¡¶ å°†çƒ­è¯·æ±‚æ‹†æˆå¤šä¸ª keyï¼Œæé«˜å¹¶å‘æ‰¿è½½ã€‚ å¢åŠ ç¼“å­˜å±‚ï¼šæœ¬åœ°ç¼“å­˜ + Redis äºŒçº§ç¼“å­˜ï¼Œå‡å°‘å¯¹ Redis çš„ç›´æ¥è®¿é—® ä½¿ç”¨å¤š Key æ‹†åˆ†è¯»å‹åŠ›ï¼Œä¸€ä¸ªçƒ­é—¨å¤§ key åˆ†æˆå¤šä¸ªå­ key Redis Proxy å±‚çƒ­ç‚¹ä¿æŠ¤ï¼Œä»£ç†å±‚å¯è¯†åˆ«çƒ­ç‚¹å¹¶åšé™çº§ å®¢æˆ·ç«¯æœ¬åœ°é™æµ + é™çº§ å¤§keyé—®é¢˜ å¤§keyï¼šæŒ‡keyå¯¹åº”çš„å€¼éå¸¸å¤§ï¼Œå ç”¨äº†å¤§é‡çš„å†…å­˜ç©ºé—´ã€‚ å½±å“ï¼š\nè¿ç§»æ§½æ—¶ï¼ˆCLUSTER ADDSLOTS/MIGRATEï¼‰éå¸¸æ…¢ å¯èƒ½é˜»å¡ Redis ä¸»çº¿ç¨‹ åˆ é™¤æ—¶è§¦å‘é˜»å¡ï¼ˆdel O(n) æ“ä½œ å‹å®ç½‘ç»œå¸¦å®½ è¯»å†™å»¶è¿Ÿå˜å¤§ Failover æ¢å¤æ…¢ è§£å†³æ–¹æ¡ˆ\nä¸šåŠ¡å±‚æ‹†åˆ†ï¼šå°†å¤§ key æ‹†åˆ†æˆå¤šä¸ªå° keyï¼Œæ¯ä¸ªå° key åªå­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ã€‚ åˆ†é¡µè¯»å–ï¼šä¸ä½¿ç”¨ hgetall/smembers/zrangeï¼Œä½¿ç”¨scan / åˆ†æ®µå– æå‰é™åˆ¶ value çš„å¤§å°ï¼š åœ¨æœåŠ¡ä¾§åš key å¤§å°é™åˆ¶ é¿å…åœ¨ Redis å­˜å‚¨æ—¥å¿—ã€æ¶ˆæ¯ã€é•¿æ–‡æœ¬ å¦‚ä½•å‘ç°å¤§key\nRedisçš„SCANå‘½ä»¤ redis-cli -h 127.0.0.1 -p 6379 â€”bigkeys å¼€æºå·¥å…·Redis RDB Toolsï¼Œåˆ†æRDBæ–‡ä»¶ï¼Œæ‰«æå‡ºRediså¤§keyã€‚ kafka 1.æ¶ˆè´¹å †ç§¯å¦‚ä½•å¤„ç† æ¶ˆæ¯å †ç§¯åŸå›  ç”Ÿäº§è€…çŸ­æ—¶é—´å†…ç”Ÿäº§å¤§é‡æ¶ˆæ¯åˆ°Topicï¼Œæ¶ˆè´¹è€…æ— æ³•åŠæ—¶æ¶ˆè´¹ã€‚ æ¶ˆè´¹è€…çš„æ¶ˆè´¹èƒ½åŠ›ä¸è¶³ï¼ˆæ¶ˆè´¹è€…å¹¶å‘ä½ã€æ¶ˆæ¯å¤„ç†æ—¶é—´é•¿ï¼‰ï¼Œå¯¼è‡´æ¶ˆè´¹æ•ˆç‡ä½äºç”Ÿäº§æ•ˆç‡ã€‚ æ¶ˆè´¹è€…å¼‚å¸¸ï¼ˆå¦‚æ¶ˆè´¹è€…æ•…éšœã€æ¶ˆè´¹è€…ç½‘ç»œå¼‚å¸¸ç­‰ï¼‰å¯¼è‡´æ— æ³•æ¶ˆè´¹æ¶ˆæ¯ã€‚ Topicåˆ†åŒºè®¾ç½®ä¸åˆç†ï¼Œæˆ–æ–°å¢åˆ†åŒºæ— æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚ Topicé¢‘ç¹é‡åˆ†é…å¯¼è‡´æ¶ˆè´¹æ•ˆç‡é™ä½ã€‚ è§£å†³æ–¹æ³• ä»æ¶ˆæ¯å †ç§¯çš„åŸå› çœ‹ï¼Œæ¶ˆæ¯å †ç§¯é—®é¢˜å¯ä»¥ä»æ¶ˆè´¹è€…ç«¯ã€ç”Ÿäº§è€…ç«¯å’ŒæœåŠ¡ç«¯ä¸‰ä¸ªæ–¹é¢è¿›è¡Œå¤„ç†ã€‚\næ¶ˆè´¹è€…ç«¯ æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œåˆç†å¢åŠ æ¶ˆè´¹è€…ä¸ªæ•°ï¼ˆæ¶ˆè´¹å¹¶å‘åº¦ï¼‰ï¼Œç¡®ä¿åˆ†åŒºæ•°/æ¶ˆè´¹è€…æ•°=æ•´æ•°ï¼Œå»ºè®®æ¶ˆè´¹è€…æ•°å’Œåˆ†åŒºæ•°ä¿æŒä¸€è‡´ã€‚ æé«˜æ¶ˆè´¹è€…çš„æ¶ˆè´¹é€Ÿåº¦ï¼Œé€šè¿‡ä¼˜åŒ–æ¶ˆè´¹è€…å¤„ç†é€»è¾‘ï¼ˆå‡å°‘å¤æ‚è®¡ç®—ã€ç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨å’Œè¯»åº“æ“ä½œï¼‰ï¼Œå‡å°‘æ¶ˆè´¹æ—¶é—´ã€‚ å¢åŠ æ¶ˆè´¹è€…æ¯æ¬¡æ‹‰å–æ¶ˆæ¯çš„æ•°é‡ï¼šæ‹‰å–æ•°æ®/å¤„ç†æ—¶é—´ \u0026gt;= ç”Ÿäº§é€Ÿåº¦ã€‚ ç”Ÿäº§è€…ç«¯ ç”Ÿäº§æ¶ˆæ¯æ—¶ï¼Œç»™æ¶ˆæ¯KeyåŠ éšæœºåç¼€ï¼Œä½¿æ¶ˆæ¯å‡è¡¡åˆ†å¸ƒåˆ°ä¸åŒåˆ†åŒºä¸Šã€‚ æœåŠ¡ç«¯ åˆç†è®¾ç½®Topicçš„åˆ†åŒºæ•°ï¼Œåœ¨ä¸å½±å“ä¸šåŠ¡å¤„ç†æ•ˆç‡çš„æƒ…å†µä¸‹ï¼Œè°ƒå¤§Topicçš„åˆ†åŒºæ•°é‡ã€‚ å½“æœåŠ¡ç«¯å‡ºç°æ¶ˆæ¯å †ç§¯æ—¶ï¼Œå¯¹ç”Ÿäº§è€…è¿›è¡Œç†”æ–­ï¼Œæˆ–å°†ç”Ÿäº§è€…çš„æ¶ˆæ¯è½¬å‘åˆ°å…¶ä»–Topicã€‚ ","date":1765017732,"permalink":"http://localhost:1313/topic/interview/database/","summary":"\u003ch1 id=\"mysql\"\u003emysql\n\u003c/h1\u003e\u003ch2 id=\"1-mysqlæŸ¥è¯¢çªç„¶å˜çš„å¾ˆæ…¢éœ€è¦æ€ä¹ˆæ’æŸ¥\"\u003e1. mysqlæŸ¥è¯¢çªç„¶å˜çš„å¾ˆæ…¢ï¼Œéœ€è¦æ€ä¹ˆæ’æŸ¥\n\u003c/h2\u003e\u003ch3 id=\"æ£€æŸ¥æŸ¥è¯¢æœ¬èº«\"\u003eæ£€æŸ¥æŸ¥è¯¢æœ¬èº«\n\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003eæŸ¥çœ‹SQLæŸ¥è¯¢æ˜¯å¦å¯ä»¥ä¼˜åŒ–ï¼Œæ¯”å¦‚ä½¿ç”¨åˆé€‚çš„ç´¢å¼•ã€é¿å…å…¨è¡¨æ‰«æç­‰ã€‚\u003c/li\u003e\n\u003cli\u003eå¤æ‚çš„JOINæ“ä½œï¼šç¡®è®¤æ˜¯å¦æœ‰å¤šä¸ªå¤§çš„è¡¨è¿æ¥ï¼Œæˆ–è€…æ˜¯ä¸å¿…è¦çš„å¤æ‚æ“ä½œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"æŸ¥çœ‹æ•°æ®åº“æ€§èƒ½\"\u003eæŸ¥çœ‹æ•°æ®åº“æ€§èƒ½\n\u003c/h3\u003e\u003cp\u003eæ…¢æŸ¥è¯¢æ—¥å¿—ï¼šå¯ç”¨å¹¶æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆslow_query_logï¼‰ã€‚æŸ¥çœ‹æœ€è¿‘å“ªäº›æŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¾ƒé•¿ã€‚\u003c/p\u003e","title":"Database"},{"content":"1.å„æ¨¡å—å¦‚ä½•ä¸API Serveré€šä¿¡ é›†ç¾¤å†…çš„å„ä¸ªåŠŸèƒ½æ¨¡å—é€šè¿‡API Serverå°†ä¿¡æ¯å­˜å…¥etcdï¼Œå½“éœ€è¦è·å–å’Œæ“ä½œè¿™äº›æ•°æ®æ—¶ï¼Œåˆ™é€šè¿‡API Serveræä¾›çš„RESTæ¥å£ï¼ˆç”¨GETã€LISTæˆ–WATCHæ–¹æ³•ï¼‰æ¥å®ç°ï¼Œä»è€Œå®ç°å„æ¨¡å—ä¹‹é—´çš„ä¿¡æ¯äº¤äº’ã€‚\nKubernetesä¸­å„æ¨¡å—é€šè¿‡æ ‡å‡†çš„HTTP/HTTPSè¯·æ±‚ä¸API Serveräº¤äº’ï¼Œé€šè¿‡è®¤è¯å’Œé‰´æƒæœºåˆ¶ä¿è¯å®‰å…¨æ€§ï¼Œå¹¶åˆ©ç”¨Watchæœºåˆ¶å®ç°å®æ—¶çš„èµ„æºçŠ¶æ€ç›‘æ§ä¸åŒæ­¥ã€‚\n2.kubeletç›‘æ§workerèŠ‚ç‚¹å¦‚ä½•å®ç° 1 2 3 4 5 6 7 8 9 Linux å†…æ ¸ â†“ cAdvisor é‡‡é›†å®¹å™¨ä¸èŠ‚ç‚¹æŒ‡æ ‡ â†“ kubelet å¤„ç†ã€èšåˆã€åˆ¤æ–­èŠ‚ç‚¹çŠ¶æ€ â†“ apiserver + metrics server æ±‡æ€» â†“ kubectl top / HPA / è°ƒåº¦å™¨ å†³ç­– 3.é›†ç¾¤èŠ‚ç‚¹è§„æ¨¡ä¸Šåƒæ³¨æ„äº‹é¡¹ å®˜æ–¹æ–‡æ¡£https://kubernetes.io/zh-cn/docs/setup/best-practices/cluster-large/\n4. kubeconfigå­˜æ”¾å†…å®¹ æœ‰å…³é›†ç¾¤ã€ç”¨æˆ·ã€å‘½åç©ºé—´å’Œèº«ä»½éªŒè¯æœºåˆ¶çš„ä¿¡æ¯\n5. kube-proxy çš„ä½œç”¨ æ ¸å¿ƒèŒè´£ ç»´æŠ¤ Service çš„è½¬å‘è§„åˆ™ kube-proxy ç›‘å¬ API Server ä¸­ Serviceã€Endpoints/EndpointSlice çš„å˜åŒ–ï¼Œåœ¨èŠ‚ç‚¹ä¸Šç»´æŠ¤ iptables æˆ– IPVS è§„åˆ™ï¼Œå®ç° Service åˆ°åç«¯ Pod çš„æµé‡è½¬å‘ã€‚\nç±»å‹ iptablesï¼šé»˜è®¤æ¨¡å¼ï¼Œä½¿ç”¨ iptables è§„åˆ™å®ç° Service è½¬å‘ã€‚ IPVSï¼šåŸºäºLinux å†…æ ¸ IPVS è¿›è¡Œå››å±‚è´Ÿè½½å‡è¡¡ï¼Œæ€§èƒ½é«˜ï¼Œè§„åˆ™æ›´æ–°å¿«ã€‚ 6. schedulerè°ƒåº¦æµç¨‹ ç›‘å¬ä¸è·å– (Listen \u0026amp; Get) Scheduler ç›‘å¬ K8s API Serverï¼Œå‘ç°æœªç»‘å®šåˆ°èŠ‚ç‚¹çš„ Pod é€šè¿‡ Informer æœºåˆ¶ï¼Œä»æœ¬åœ°ç¼“å­˜è·å– Pod å’Œ Node çš„å®æ—¶ä¿¡æ¯ï¼Œæé«˜æ•ˆç‡ é¢„é€‰é˜¶æ®µ (Predicates/Filter) å¿«é€Ÿè¿‡æ»¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼Œå‡å°‘åç»­è®¡ç®—é‡ èŠ‚ç‚¹èµ„æºï¼ˆCPU, Memoryï¼‰ã€Node Selector/Affinity/Anti-Affinityã€Taints/Tolerationsã€Pod é¢„ç•™ç­‰ã€‚å¾—åˆ°ä¸€ä¸ªé€šè¿‡æ‰€æœ‰è¿‡æ»¤å™¨çš„â€œå€™é€‰èŠ‚ç‚¹â€åˆ—è¡¨ã€‚ ä¼˜é€‰é˜¶æ®µ (Priority) æ‰“åˆ†ï¼šä¸ºé€šè¿‡é¢„é€‰çš„èŠ‚ç‚¹æ‰“åˆ†ï¼Œè¯„ä¼°å…¶â€œå¥½åâ€ã€‚ èŠ‚ç‚¹èµ„æºåˆ©ç”¨ç‡ã€è´Ÿè½½å‡è¡¡ã€æ‹“æ‰‘ä½ç½®ï¼ˆå¦‚ä¼˜å…ˆåŒä¸€æœºæ¶/åŒºåŸŸï¼‰ã€‚ ç»“æœ: å¾—åˆ°ä¸€ä¸ªæŒ‰åˆ†æ•°é™åºæ’åˆ—çš„èŠ‚ç‚¹åˆ—è¡¨ ç»‘å®šé˜¶æ®µ (Bind) é€‰æ‹©å¾—åˆ†æœ€é«˜çš„èŠ‚ç‚¹ å°†é€‰æ‹©ç»“æœå†™å…¥æœ¬åœ°ç¼“å­˜ (Scheduler Cache)ï¼Œè®°å½•èµ„æºå ç”¨ï¼Œå¹¶å°è¯•é¢„ç•™èµ„æºã€‚ å¼‚æ­¥è°ƒç”¨ API Serverï¼Œæ›´æ–° Pod çš„ spec.nodeNameï¼Œå°† Pod ç»‘å®šåˆ°é€‰å®šèŠ‚ç‚¹ã€‚ Kubelet ç›‘å¬åˆ° Pod ç»‘å®šäº‹ä»¶åï¼Œå¼€å§‹åˆ›å»ºå®¹å™¨ 7. POD çš„å¯åŠ¨æµç¨‹ ç”¨æˆ·é€šè¿‡kubectlæˆ–å…¶ä»–å·¥å…·æäº¤podçš„yamlé…ç½®åˆ°API Server API Server æ”¶åˆ°è¯·æ±‚åï¼Œå°†é…ç½®å­˜å‚¨åˆ°etcdä¸­ Scheduler æ ¹æ®è°ƒåº¦ç­–ç•¥ï¼Œå°† Pod ç»‘å®šåˆ°åˆé€‚çš„èŠ‚ç‚¹ Kubelet ç›‘å¬åˆ° Pod ç»‘å®šäº‹ä»¶åï¼Œå¼€å§‹åˆ›å»ºå®¹å™¨ æ‹‰å–é•œåƒ åˆ›å»ºsandboxï¼Œsandboxä¸­æ‰€æœ‰å®¹å™¨å…±äº«ç½‘ç»œå’Œå­˜å‚¨å‘½åç©ºé—´ è°ƒç”¨å®¹å™¨è¿è¡Œæ—¶åˆ›å»ºpodä¸­çš„å®¹å™¨ å¦‚æœæœ‰initå®¹å™¨ï¼Œkubeletå…ˆäºåº”ç”¨å®¹å™¨å¯åŠ¨ä»–ä»¬ aws-node åˆ›å»ºpodç½‘å¡ï¼Œåˆ†é…IPåœ°å€ å®¹å™¨å¯åŠ¨åï¼ŒKubelet å‘ API Server å‘é€çŠ¶æ€æ›´æ–° API Server æ”¶åˆ°æ›´æ–°åï¼Œå°†çŠ¶æ€å­˜å‚¨åˆ°etcdä¸­ ç”¨æˆ·é€šè¿‡kubectlæˆ–å…¶ä»–å·¥å…·æŸ¥è¯¢ Pod çŠ¶æ€æ—¶ï¼ŒAPI Server ä»etcdä¸­è·å–æœ€æ–°çŠ¶æ€å¹¶è¿”å› 8. pod dns è§£æå¤±è´¥æ’æŸ¥ æ£€æŸ¥ Pod å†…éƒ¨å’Œé…ç½® kubectl exec -it \u0026ndash; nslookup kubernetes.default é›†ç¾¤å†…éƒ¨ DNS æ•…éšœ kubectl exec -it \u0026ndash; curl https://www.google.com ä¸Šæ¸¸ DNS æˆ– CoreDNS é…ç½®é—®é¢˜ æ£€æŸ¥ DNS Policyï¼šæŸ¥çœ‹ Pod YAMLï¼Œç¡®ä¿ dnsPolicy (å¦‚ ClusterFirst) é…ç½®æ­£ç¡®. Default: Pod ä»è¿è¡Œæ‰€åœ¨çš„èŠ‚ç‚¹ç»§æ‰¿åŸŸåè§£æé…ç½® ClusterFirst: Pod å…ˆä»é›†ç¾¤å†…éƒ¨ DNS è§£æï¼Œå¤±è´¥åå†ä½¿ç”¨èŠ‚ç‚¹ DNS é…ç½® æ£€æŸ¥coredns æ£€æŸ¥core dns è´Ÿè½½ æ£€æŸ¥coredns configmap forward æ’æŸ¥ kube-proxy DNS çš„æµé‡æ˜¯ Pod â†’ kube-proxy â†’ CoreDNS Pod æ£€æŸ¥ CNI ç½‘ç»œæ’ä»¶ æ˜¯å¦ä½¿ç”¨äº† Istio / Linkerd / Envoy sidecar 9. Podçš„å¸¸è§è°ƒåº¦æ–¹å¼ é»˜è®¤è°ƒåº¦å™¨ï¼ˆDefault Schedulerï¼‰ èŠ‚ç‚¹é€‰æ‹©å™¨ï¼ˆNode Selectorï¼‰ äº²å’Œæ€§å’Œåäº²å’Œæ€§ï¼ˆAffinity and Anti-Affinityï¼‰ æ±¡ç‚¹å’Œå®¹å¿åº¦ï¼ˆTaints and Tolerationsï¼‰ èµ„æºè¯·æ±‚å’Œé™åˆ¶ï¼ˆResource Requests and Limitsï¼‰ Pod æ‹“æ‰‘è°ƒåº¦ï¼ˆPod Topology Spreadï¼‰ï¼š ä¸åŒèŠ‚ç‚¹/æœºæ¶å‡åŒ€åˆ†å¸ƒ æŠ¢å è°ƒåº¦ï¼ˆPreemptionï¼‰ 10. Pauseå®¹å™¨çš„ç”¨é€” Pause å®¹å™¨å”¯ä¸€çš„ä½œç”¨æ˜¯ ä¿è¯å³ä½¿ Pod ä¸­æ²¡æœ‰ä»»ä½•å®¹å™¨è¿è¡Œä¹Ÿä¸ä¼šè¢«åˆ é™¤ï¼Œå› ä¸ºè¿™æ—¶å€™è¿˜æœ‰ Pause å®¹å™¨åœ¨è¿è¡Œã€‚\nç½‘ç»œå‘½åç©ºé—´éš”ç¦» è¿›ç¨‹éš”ç¦» èµ„æºéš”ç¦» ç”Ÿå‘½å‘¨æœŸç®¡ç† 11. podå¥åº·æ£€æŸ¥å¤±è´¥å¯èƒ½çš„åŸå› å’Œæ’æŸ¥æ€è·¯ æ¢é’ˆé…ç½®é—®é¢˜ åº”ç”¨æœªå¯åŠ¨/å“åº”æ…¢ï¼šè¶…å‡ºinitialDelaySecondsï¼Œè¿›ç¨‹é€€å‡º (CrashLoopBackOff) èµ„æºé™åˆ¶ï¼šCPU/å†…å­˜ä¸è¶³ï¼Œå¯¼è‡´Kubeletæ— æ³•æ­£å¸¸è¿è¡Œæ£€æŸ¥ ç½‘ç»œé—®é¢˜ï¼šå®¹å™¨æ— æ³•è®¿é—®å¤–éƒ¨æœåŠ¡ï¼Œå¦‚DNSè§£æå¤±è´¥ ä¾èµ–ä¸å¯ç”¨ï¼š æ•°æ®åº“ã€ç¼“å­˜ç­‰ä¾èµ–æœåŠ¡æœªå°±ç»ª æ•°æ®åº“ã€ç¼“å­˜ç­‰ä¾èµ–æœåŠ¡æœªå°±ç»ª æ’æŸ¥æ€è·¯\nkubectl describe pod kubectl logs æ£€æŸ¥å¥åº·æ£€æŸ¥é…ç½® è¿›å…¥å®¹å™¨å†…éƒ¨æ’æŸ¥ ä½¿ç”¨curl, wgetæµ‹è¯•HTTPæ¢é’ˆè·¯å¾„ã€‚ netstat -tulnpæˆ–ss -tulnpç¡®è®¤ç«¯å£æ˜¯å¦ç›‘å¬ æ£€æŸ¥èµ„æºä¸èŠ‚ç‚¹ 12. podä¹‹é—´è®¿é—®ä¸é€šæ€ä¹ˆæ’æŸ¥ 13. podå‡ ç§å¸¸è§çŠ¶æ€ Pod Phase\nRunning Succeeded Job å®Œæˆã€CronJob å®Œæˆ Failed ç¨‹åºå´©æºƒã€å®¹å™¨å¯åŠ¨å¤±è´¥ Pending èµ„æºä¸è¶³ã€NodeSelector æ— åŒ¹é…ã€æ‹‰é•œåƒæ…¢ Unknown kubelet æ— æ³•ä¸ŠæŠ¥çŠ¶æ€ï¼ŒèŠ‚ç‚¹æ‰çº¿ã€ç½‘ç»œä¸­æ–­ åˆ›å»º/è°ƒåº¦ç›¸å…³\nContainerCreating å®¹å™¨æ­£åœ¨åˆ›å»ºå®¹å™¨ï¼Œæ‹‰å–é•œåƒ PodInitializing å®¹å™¨æ­£åœ¨åˆå§‹åŒ–ï¼Œæ‰§è¡Œ init å®¹å™¨ ImagePullBackOff æ‹‰é•œåƒå¤±è´¥ï¼ˆè®¤è¯é—®é¢˜ã€é•œåƒä¸å­˜åœ¨ï¼‰ ErrImagePull åŒä¸Šï¼Œæ¯” BackOff æ›´æ—©æœŸ è¿è¡Œä¸­å¼‚å¸¸\nCrashLoopBackOff å®¹å™¨å´©æºƒåï¼Œkubelet ä¼šæ ¹æ® backoff ç­–ç•¥ï¼ˆé»˜è®¤ 10s åé‡è¯•ï¼‰é‡å¯å®¹å™¨ OOMKilled å®¹å™¨å†…å­˜è¶…å‡ºé™åˆ¶ï¼Œè¢« kubelet å¼ºåˆ¶kill BackOff å¤šæ¬¡å¤±è´¥åè¿›å…¥é€€é¿ï¼ˆå¦‚ init å®¹å™¨å¤±è´¥ï¼‰ CrashLoopBackOff ä¸»å®¹å™¨ä¸æ–­å´©æºƒé‡å¯ CreateContainerConfigError å®¹å™¨åˆ›å»ºé…ç½®é”™è¯¯ï¼ˆå¦‚æŒ‚è½½å·ä¸å­˜åœ¨ï¼‰ Error å®¹å™¨é0é€€å‡ºï¼ˆä½†ä¸ä¸€å®šé‡å¯ç­–ç•¥è§¦å‘å¤±è´¥ï¼‰ é€€å‡º/ç»ˆæ­¢\nTerminating å®¹å™¨æ­£åœ¨ç»ˆæ­¢ï¼ˆå¦‚åˆ é™¤ podï¼‰ Completed å®¹å™¨æ­£å¸¸é€€å‡ºï¼ˆå¦‚ä¸»å®¹å™¨é€€å‡ºï¼‰ Failed å®¹å™¨é0é€€å‡ºï¼Œä¸”é‡å¯ç­–ç•¥ä¸º Never ","date":1765016130,"permalink":"http://localhost:1313/topic/interview/k8s/","summary":"\u003ch2 id=\"1å„æ¨¡å—å¦‚ä½•ä¸api-serveré€šä¿¡\"\u003e1.å„æ¨¡å—å¦‚ä½•ä¸API Serveré€šä¿¡\n\u003c/h2\u003e\u003cp\u003eé›†ç¾¤å†…çš„å„ä¸ªåŠŸèƒ½æ¨¡å—é€šè¿‡API Serverå°†ä¿¡æ¯å­˜å…¥etcdï¼Œå½“éœ€è¦è·å–å’Œæ“ä½œè¿™äº›æ•°æ®æ—¶ï¼Œåˆ™é€šè¿‡API Serveræä¾›çš„RESTæ¥å£ï¼ˆç”¨GETã€LISTæˆ–WATCHæ–¹æ³•ï¼‰æ¥å®ç°ï¼Œä»è€Œå®ç°å„æ¨¡å—ä¹‹é—´çš„ä¿¡æ¯äº¤äº’ã€‚\u003c/p\u003e","title":"K8s"},{"content":"1.å®¹å™¨æŠ€æœ¯çš„åŸºç¡€åŸç† å®¹å™¨æŠ€æœ¯çš„åŸºç¡€åŸç†æ˜¯åŸºäº Linux å†…æ ¸çš„ Namespace å’Œ Cgroups æŠ€æœ¯ã€‚\nè§£å†³é—®é¢˜ï¼šæœ€åˆè§£å†³æœ¬åœ°ä¸äº‘ç«¯ä¸ä¸€è‡´ç‰ˆæœ¬é—®é¢˜\nå®¹å™¨é•œåƒï¼šåˆ©ç”¨Linuxçš„Union FSæŠ€æœ¯ï¼Œå°†åº”ç”¨ç¨‹åºæ‰€ä¾èµ–çš„è¿è¡Œæ“ä½œç³»ç»Ÿã€å·¥å…·åŒ…ã€ä¾èµ–åº“ã€é…ç½®æ–‡ä»¶ã€è¿è¡Œè„šæœ¬ç­‰å„ç§ç¯å¢ƒä¿¡æ¯ä»¥åˆ†å±‚çš„æ–¹å¼è”åˆæŒ‚è½½åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œä½œä¸ºé•œåƒçš„æ ¹ç›®å½•\n2.å¦‚ä½•å‡â¼©dockerfileâ½£æˆé•œåƒä½“ç§¯ï¼ˆå¤šé˜¶æ®µæ„å»ºï¼‰ ä½¿ç”¨æ›´å°çš„åŸºç¡€é•œåƒ æ„å»ºç¯å¢ƒï¼ˆç¼–è¯‘å™¨ã€ä¾èµ–ï¼‰ä¸è¿è¡Œç¯å¢ƒåˆ†ç¦» 1 2 3 4 5 6 7 8 9 10 # ç¬¬ä¸€é˜¶æ®µï¼šç¼–è¯‘ FROM golang:1.22-alpine AS builder WORKDIR /app COPY . . RUN go build -o app . # ç¬¬äºŒé˜¶æ®µï¼šè¿è¡Œ FROM alpine:3.19 COPY --from=builder /app/app /usr/local/bin/app CMD [\u0026#34;app\u0026#34;] åŠæ—¶æ¸…ç†æ„å»ºç¼“å­˜ã€ä¸´æ—¶æ–‡ä»¶ åˆå¹¶ RUN æŒ‡ä»¤ï¼Œå‡å°‘é•œåƒå±‚æ•° ä¸è¦å¤åˆ¶æ•´ä¸ªé¡¹ç›® â†’ ç²¾å‡† COPY ä½¿ç”¨ .dockerignoreï¼Œé¿å…å¤åˆ¶ä¸å¿…è¦çš„æ–‡ä»¶ \u0026hellip;. 3.å®¹å™¨ç½‘ç»œæ¨¡å¼ bridgeï¼šé»˜è®¤æ¨¡å¼ï¼Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡ IP é€šä¿¡ï¼Œå¤–éƒ¨å¯ä»¥é€šè¿‡ç«¯å£æ˜ å°„è®¿é—®å®¹å™¨ hostï¼šå®¹å™¨ä¸ä¸»æœºå…±äº«ç½‘ç»œæ ˆï¼Œå®¹å™¨ç›´æ¥ä½¿ç”¨ä¸»æœºçš„ IP å’Œç«¯å£ noneï¼šå®¹å™¨æ²¡æœ‰ç½‘ç»œï¼Œåªèƒ½ä½¿ç”¨ localhost è®¿é—® containerï¼šå®¹å™¨ä¸å¦ä¸€ä¸ªå®¹å™¨å…±äº«ç½‘ç»œæ ˆï¼Œå®¹å™¨ä¹‹é—´å¯ä»¥ç›´æ¥é€šè¿‡ IP é€šä¿¡ 4.dockerå’ŒcontaineråŒºåˆ« dockerï¼šæ˜¯ä¸€ä¸ªå®¹å™¨å¼•æ“ï¼Œç”¨äºåˆ›å»ºã€è¿è¡Œã€ç®¡ç†å®¹å™¨ containerï¼šæ˜¯ä¸€ä¸ªè¿è¡Œä¸­çš„è¿›ç¨‹ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯æ‰§è¡Œçš„è½¯ä»¶åŒ…ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºå’Œå…¶ä¾èµ–çš„è¿è¡Œç¯å¢ƒ æ¶æ„å±‚é¢çš„åŸå›  kubelet å¯åŠ¨ä¸€ä¸ªå®¹å™¨çš„æµç¨‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 kubelet â”‚ â”‚ (è°ƒç”¨ CRI æ¥å£) â–¼ dockershim (K8s ç»´æŠ¤çš„ CRI è½¬æ¢å±‚) â”‚ â”‚ (è°ƒç”¨ Docker Engine API) â–¼ Docker Engine â”‚ â”‚ (è°ƒç”¨ containerd API) â–¼ containerd â”‚ â”‚ (è°ƒç”¨ OCI æ¥å£) â–¼ runc (OCI runtime) â”‚ â””â”€\u0026gt; çœŸæ­£åˆ›å»º Linux å®¹å™¨ (namespace, cgroups, rootfs...) Docker Engine æ˜¯ä¸€ä¸ª å®Œæ•´å¹³å°ï¼ˆæ„å»ºé•œåƒã€ç®¡ç†ç½‘ç»œã€Volumeã€Swarm ç­‰ï¼‰ï¼Œè¿™äº›å¯¹ K8s æ¥è¯´éƒ½æ˜¯å¤šä½™çš„ã€‚ dockershim åªæ˜¯ä¸ºäº†æŠŠ CRIï¼ˆK8s è¯­è¨€ï¼‰ç¿»è¯‘æˆ Docker APIï¼ˆDocker è¯­è¨€ï¼‰ã€‚ å®é™…æ‰§è¡Œå®¹å™¨çš„ï¼Œä¾ç„¶æ˜¯ containerd + runcã€‚ å½“ kubelet ç›´æ¥ä½¿ç”¨ containerd æ—¶ï¼Œè°ƒç”¨é“¾ç®€åŒ–ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 kubelet â”‚ â”‚ (è°ƒç”¨ CRI æ¥å£) â–¼ containerd (å†…ç½® CRI æ’ä»¶) â”‚ â”‚ (è°ƒç”¨ OCI æ¥å£) â–¼ runc (OCI runtime) â”‚ â””â”€\u0026gt; çœŸæ­£åˆ›å»º Linux å®¹å™¨ (namespace, cgroups, rootfs...) å‡å°‘ç»´æŠ¤æˆæœ¬ kubernetes ä» 1.24 å¼€å§‹ï¼Œé»˜è®¤ä½¿ç”¨ containerd ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ã€‚ä¸å†å»ç»´æŠ¤ä¸­é—´dockershim\næ€§èƒ½æå‡ å°‘ä¸€å±‚è°ƒç”¨ï¼Œæ€§èƒ½å’Œç¨³å®šæ€§æ›´å¥½ã€‚\n","date":1764986167,"permalink":"http://localhost:1313/topic/interview/docker/","summary":"\u003ch2 id=\"1å®¹å™¨æŠ€æœ¯çš„åŸºç¡€åŸç†\"\u003e1.å®¹å™¨æŠ€æœ¯çš„åŸºç¡€åŸç†\n\u003c/h2\u003e\u003cp\u003eå®¹å™¨æŠ€æœ¯çš„åŸºç¡€åŸç†æ˜¯åŸºäº Linux å†…æ ¸çš„ Namespace å’Œ Cgroups æŠ€æœ¯ã€‚\u003c/p\u003e\n\u003cp\u003eè§£å†³é—®é¢˜ï¼šæœ€åˆè§£å†³æœ¬åœ°ä¸äº‘ç«¯ä¸ä¸€è‡´ç‰ˆæœ¬é—®é¢˜\u003c/p\u003e\n\u003cp\u003eå®¹å™¨é•œåƒï¼šåˆ©ç”¨Linuxçš„Union FSæŠ€æœ¯ï¼Œå°†åº”ç”¨ç¨‹åºæ‰€ä¾èµ–çš„è¿è¡Œæ“ä½œç³»ç»Ÿã€å·¥å…·åŒ…ã€ä¾èµ–åº“ã€é…ç½®æ–‡ä»¶ã€è¿è¡Œè„šæœ¬ç­‰å„ç§ç¯å¢ƒä¿¡æ¯ä»¥åˆ†å±‚çš„æ–¹å¼è”åˆæŒ‚è½½åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œä½œä¸ºé•œåƒçš„æ ¹ç›®å½•\u003c/p\u003e","title":"Docker"},{"content":"æ­¤æ­å»ºæ•™ç¨‹åªç”¨äºä¸ªäººå­¦ä¹ ï¼Œä¸å¯ç”¨äºéæ³•ç”¨é€”ã€‚\nå®‰è£… https://itlanyan.com/v2ray-tutorial/\nå®¢æˆ·ç«¯ä½¿ç”¨ ios å®¢æˆ·ç«¯é…ç½®ï¼šhttps://itlanyan.com/v2ray-clients-download/\nios å®¢æˆ·ç«¯é‡‡ç”¨v2boxï¼Œä¸­å›½åŒºä¸èƒ½ä¸‹è½½ã€‚\nç›´æ¥æ–°å»ºé…ç½®å³å¯\nåè®® (Protocol)ï¼šé€‰æ‹© VMess\nmac å®¢æˆ·ç«¯ï¼šClash Verge Rev\nä¸‹è½½é“¾æ¥ï¼šhttps://github.com/clash-verge-rev/clash-verge-rev/releases\nLocal Config 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 port: 7890 socks-port: 7891 allow-lan: true mode: rule log-level: info external-controller: :9090 proxies: - name: \u0026#34;æˆ‘çš„V2Ray\u0026#34; type: vmess server: x.x.x.x port: 12345 uuid: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx alterId: 0 cipher: auto # å¦‚æœä½ æ²¡é…ç½® tls/wsï¼Œä¸‹é¢è¿™å‡ è¡Œä¸ç”¨ç®¡ã€‚ # network: ws # ws-opts: # path: \u0026#34;/\u0026#34; proxy-groups: - name: PROXY type: select proxies: - \u0026#34;æˆ‘çš„V2Ray\u0026#34; rules: - MATCH,PROXY æ–°å»ºè®¢é˜…ï¼Œåœ¨ â€œç±»å‹â€ (Type) é‚£ä¸€æ ï¼Œé€‰æ‹© â€œLocalâ€ (æœ¬åœ°æ–‡ä»¶) ","date":1764923913,"permalink":"http://localhost:1313/topic/scientific-internet/","summary":"\u003cp\u003eæ­¤æ­å»ºæ•™ç¨‹åªç”¨äºä¸ªäººå­¦ä¹ ï¼Œä¸å¯ç”¨äºéæ³•ç”¨é€”ã€‚\u003c/p\u003e\n\u003ch2 id=\"å®‰è£…\"\u003eå®‰è£…\n\u003c/h2\u003e\u003cp\u003e\u003ca class=\"link\" href=\"https://itlanyan.com/v2ray-tutorial/\"  target=\"_blank\" rel=\"noopener\"\n    \u003ehttps://itlanyan.com/v2ray-tutorial/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"å®¢æˆ·ç«¯ä½¿ç”¨\"\u003eå®¢æˆ·ç«¯ä½¿ç”¨\n\u003c/h2\u003e\u003ch3 id=\"ios\"\u003eios\n\u003c/h3\u003e\u003cp\u003eå®¢æˆ·ç«¯é…ç½®ï¼šhttps://itlanyan.com/v2ray-clients-download/\u003c/p\u003e","title":"ç§‘å­¦ä¸Šç½‘"},{"content":"1.ç›‘æ§æŒ‡æ ‡ç±»å‹åŠåº”ç”¨åœºæ™¯ 1ã€ è®¡æ•°å™¨ï¼ˆCounterï¼‰ï¼šç”¨äºè®°å½•äº‹ä»¶çš„æ•°é‡ï¼Œä¾‹å¦‚è¯·æ±‚æ¬¡æ•°ã€é”™è¯¯æ¬¡æ•°ç­‰ã€‚\nç‰¹ç‚¹ï¼šå•è°ƒé€’å¢ï¼Œåªå¢ä¸å‡ï¼Œé‡å¯æ—¶è¢«è®¾ç½®ä¸º0 åœºæ™¯ï¼šqpsã€errorã€å·²ç»å®Œæˆçš„ä»»åŠ¡æ•°ç­‰ 2ã€ è®¡é‡å™¨ï¼ˆGaugeï¼‰ï¼šç”¨äºè®°å½•å½“å‰çš„æ•°å€¼ï¼Œä¾‹å¦‚å†…å­˜ä½¿ç”¨é‡ã€CPU åˆ©ç”¨ç‡ç­‰ã€‚\nç‰¹ç‚¹ï¼šå¯å¢å¯å‡ï¼Œå¯ä»¥ä»»æ„å˜åŒ–çš„æŒ‡æ ‡ åœºæ™¯ï¼šcpuã€memã€diskã€networkç­‰ Histogramå’ŒSummaryä¸»ç”¨ç”¨äºè®¡ç®—åˆ†ä½æ•°ï¼Œç»Ÿè®¡å’Œåˆ†ææ ·æœ¬çš„åˆ†å¸ƒæƒ…å†µã€‚\n3ã€ ç›´æ–¹å›¾ï¼ˆHistogramï¼‰ï¼šç”¨äºè®°å½•äº‹ä»¶çš„åˆ†å¸ƒæƒ…å†µï¼ŒPrometheus æœåŠ¡ç«¯é€šè¿‡ bucket è®¡ç®—åˆ†ä½æ•°ã€‚\nç‰¹ç‚¹ï¼šè¦æå‰å®šä¹‰ bucketï¼ˆå¦‚ 10msã€50msã€100msâ€¦ï¼‰ï¼Œç”¨äºå°†æ ·æœ¬å€¼åˆ†æ¡¶ã€‚å¯ä»¥èšåˆè·¨å®ä¾‹çš„å…¨å±€åˆ†ä½æ•°ï¼ˆSummary åšä¸åˆ°ï¼‰ åœºæ™¯ï¼šä¸šåŠ¡æ¥å£å»¶è¿Ÿç›‘æ§ï¼Œp95ã€p99 1 histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket[5m])) by (le)) 4ã€ æ‘˜è¦ï¼ˆSummaryï¼‰ï¼š\nç‰¹ç‚¹ï¼šä¸éœ€è¦ bucketï¼Œä»£ç å†…è‡ªåŠ¨ç»´æŠ¤ quantileã€‚æ— æ³•è·¨å®ä¾‹è®¡ç®—å…¨å±€ p99 å¦‚æœä½ æœ‰ 10 ä¸ª podï¼Œå„è‡ªæš´éœ² p99ï¼Œé‚£ä¹ˆ Prometheus ä¸èƒ½å†ç®—â€œæ•´ä¸ªæœåŠ¡çš„ p99â€ åœºæ™¯ï¼šæ¯ä¸ªå®ä¾‹éƒ½ç‹¬ç«‹çš„ç»Ÿè®¡éœ€æ±‚ Summary çš„åˆ†ä½æ•°æ˜¯åœ¨å®¢æˆ·ç«¯ï¼ˆåº”ç”¨ï¼‰æœ¬åœ°è®¡ç®—çš„ï¼ŒPrometheus åªéœ€å­˜å‚¨æœ€ç»ˆçš„ p95ã€p99 æ•°å€¼ã€‚ä½†æ˜¯ä¸èƒ½èšåˆè·¨å®ä¾‹çš„å…¨å±€åˆ†ä½æ•°ã€‚ Histogramåœ¨æœåŠ¡ç«¯è®¡ç®—åˆ†ä½æ•°ï¼ŒHistogram èƒ½å¤Ÿå°†å¤šä¸ªå®ä¾‹çš„æ•°æ®èšåˆåœ¨ä¸€èµ·ï¼Œå¾—å‡ºæ•´ä¸ªæœåŠ¡çš„å…¨å±€åˆ†ä½æ•°ï¼Œæ˜¯k8sç”Ÿäº§ç¯å¢ƒæœ€å¸¸ç”¨çš„æ–¹å¼ã€‚\n2. é»„é‡‘æŒ‡æ ‡ å»¶è¿Ÿï¼ˆLatencyï¼‰ qps é”™è¯¯ç‡ï¼ˆError Rateï¼‰ é¥±å’Œåº¦ï¼ˆSaturationï¼‰ ","date":1764913136,"permalink":"http://localhost:1313/topic/interview/monitoring/","summary":"\u003ch2 id=\"1ç›‘æ§æŒ‡æ ‡ç±»å‹åŠåº”ç”¨åœºæ™¯\"\u003e1.ç›‘æ§æŒ‡æ ‡ç±»å‹åŠåº”ç”¨åœºæ™¯\n\u003c/h2\u003e\u003cp\u003e1ã€ è®¡æ•°å™¨ï¼ˆCounterï¼‰ï¼šç”¨äºè®°å½•äº‹ä»¶çš„æ•°é‡ï¼Œä¾‹å¦‚è¯·æ±‚æ¬¡æ•°ã€é”™è¯¯æ¬¡æ•°ç­‰ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç‰¹ç‚¹ï¼šå•è°ƒé€’å¢ï¼Œåªå¢ä¸å‡ï¼Œé‡å¯æ—¶è¢«è®¾ç½®ä¸º0\u003c/li\u003e\n\u003cli\u003eåœºæ™¯ï¼šqpsã€errorã€å·²ç»å®Œæˆçš„ä»»åŠ¡æ•°ç­‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e2ã€ è®¡é‡å™¨ï¼ˆGaugeï¼‰ï¼šç”¨äºè®°å½•å½“å‰çš„æ•°å€¼ï¼Œä¾‹å¦‚å†…å­˜ä½¿ç”¨é‡ã€CPU åˆ©ç”¨ç‡ç­‰ã€‚\u003c/p\u003e","title":"Monitoring"},{"content":"1.OSIä¸ƒå±‚æ¨¡å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 å‘é€ç«¯ï¼ˆç”µè„‘Aï¼‰ æ¥æ”¶ç«¯ï¼ˆç”µè„‘Bï¼‰ +----------------+ +----------------+ | åº”ç”¨å±‚ï¼šData | | åº”ç”¨å±‚ï¼šData | | \u0026#34;Hi\u0026#34; | | \u0026#34;Hi\u0026#34; | +-------+--------+ +-------^--------+ | | | è¡¨ç¤ºå±‚ï¼šData + è¡¨ç¤ºå¤´ è¡¨ç¤ºå±‚ï¼šDataï¼ˆå‰¥ç¦»è¡¨ç¤ºå¤´ï¼‰ +-------+--------+ +-------^--------+ | | | ä¼šè¯å±‚ï¼šData + ä¼šè¯å¤´ ä¼šè¯å±‚ï¼šDataï¼ˆå‰¥ç¦»ä¼šè¯å¤´ï¼‰ +-------+--------+ +-------^--------+ | | | ä¼ è¾“å±‚ï¼šSegmentï¼ˆData + ç«¯å£å¤´ï¼‰ ä¼ è¾“å±‚ï¼šDataï¼ˆå‰¥ç¦»ç«¯å£å¤´ï¼‰ +-------+--------+ +-------^--------+ | | | ç½‘ç»œå±‚ï¼šPacketï¼ˆSegment + IPå¤´ï¼‰ ç½‘ç»œå±‚ï¼šSegmentï¼ˆå‰¥ç¦»IPå¤´ï¼‰ +-------+--------+ +-------^--------+ | | | æ•°æ®é“¾è·¯å±‚ï¼šFrameï¼ˆPacket + MACå¤´ + CRCï¼‰æ•°æ®é“¾è·¯å±‚ï¼šPacketï¼ˆå‰¥ç¦»MACå¤´+CRCï¼‰ +-------+--------+ +-------^--------+ | | | ç‰©ç†å±‚ï¼šBitsï¼ˆFrameè½¬æ¢ï¼‰ ç‰©ç†å±‚ï¼šFrameï¼ˆBitsè½¬æ¢ï¼‰ +-------+--------+ +-------^--------+ | | +---------------------------------------+ ç‰©ç†ä»‹è´¨ï¼ˆç½‘çº¿/æ— çº¿ï¼‰ OSI å±‚ æ ¸å¿ƒåŠŸèƒ½ å…³é”®è®¾å¤‡ / ç»„ä»¶ åº”ç”¨å±‚ æä¾›åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ æµè§ˆå™¨ã€FTPå®¢æˆ·ç«¯ã€SMTPå®¢æˆ·ç«¯ è¡¨ç¤ºå±‚ æ•°æ®çš„è¡¨ç¤ºå’Œè½¬æ¢ åŠ å¯†ã€å‹ç¼© ä¼šè¯å±‚ ç®¡ç†ä¼šè¯è¿æ¥ ä¼šè¯ID ä¼ è¾“å±‚ ç«¯åˆ°ç«¯é€šä¿¡ TCPã€UDP ç½‘ç»œå±‚ è·¨ç½‘ç»œè·¯ç”±ä¸ IP åœ°å€è¯†åˆ« è·¯ç”±å™¨ã€äº¤æ¢æœº æ•°æ®é“¾è·¯å±‚ å¸§ä¼ è¾“ä¸ MAC åœ°å€è¯†åˆ« ç½‘å¡ã€äº¤æ¢æœº ç‰©ç†å±‚ æ¯”ç‰¹æµä¼ è¾“ ç½‘çº¿ã€å…‰çº¤ 2.http1.1 å’Œhttp2 åŒºåˆ« ç‰¹æ€§ HTTP/1.1 HTTP/2 ä¼ è¾“å¼€é”€ æ–‡æœ¬ä¼ è¾“ï¼Œå¼€é”€è¾ƒå¤§ äºŒè¿›åˆ¶æµä¼ è¾“ï¼Œå¼€é”€æ›´å° å¤šè·¯å¤ç”¨ é¡ºåºåŠ è½½èµ„æºï¼ŒæŸä¸ªèµ„æºé˜»å¡ä¼šå½±å“åç»­èµ„æº å•ä¸ª TCP è¿æ¥ä¸Šå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªæ•°æ®æµï¼Œäº’ä¸é˜»å¡ æœåŠ¡å™¨æ¨é€ ä¸æ”¯æŒ æ”¯æŒï¼ŒæœåŠ¡å™¨å¯åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¹‹å‰æ¨é€å†…å®¹ æ ‡å¤´å‹ç¼© ä¸å‹ç¼©æˆ–ç®€å•å‹ç¼©ï¼Œå†—ä½™ä¿¡æ¯å¤š ä½¿ç”¨ HPACK å‹ç¼©ï¼Œå‡å°‘å†—ä½™ï¼Œæé«˜åŠ è½½é€Ÿåº¦ 3.TCP çš„é“¾æ¥çŠ¶æ€ 4.ä¸ºä»€ä¹ˆTCPæ˜¯ä¸‰æ¬¡æ¡æ‰‹ å› ä¸ºä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½ä¿è¯åŒæ–¹å…·æœ‰æ¥æ”¶å’Œå‘é€çš„èƒ½åŠ›ã€‚\nä¸ºä»€ä¹ˆä¸æ˜¯ 2 æ¬¡æ¡æ‰‹ å‡è®¾éœ€è¦ä¸¤æ¬¡\nå®¢æˆ·ç«¯å‘é€ SYN æœåŠ¡å™¨è¿”å› ACK å‡è®¾ç½‘ç»œæ‹¥å¡ä¸­å­˜åœ¨å»¶è¿Ÿæˆ–ä¸¢åŒ…ï¼Œä¸€ä¸ª æ—§çš„ SYN æŠ¥æ–‡æ®‹ç•™åœ¨ç½‘ç»œä¸­ã€‚ æœåŠ¡å™¨æ”¶åˆ°æ®‹ç•™ SYNï¼Œè¯¯è®¤ä¸ºå®¢æˆ·ç«¯è¦å»ºç«‹æ–°è¿æ¥ï¼Œè¿”å› ACKã€‚ å®¢æˆ·ç«¯æ”¶åˆ° ACKï¼Œè¯¯ä»¥ä¸ºè¿æ¥å·²å»ºç«‹ï¼Œç»§ç»­å‘é€æ•°æ®ã€‚ æœåŠ¡å™¨æ”¶åˆ°æ•°æ®ï¼Œè¯¯ä»¥ä¸ºæ˜¯æ–°è¿æ¥çš„æµé‡ï¼Œé”™è¯¯å¤„ç†ã€‚ ä¸ºä»€ä¹ˆä¸æ˜¯ 4 æ¬¡æˆ–æ›´å¤šï¼Ÿ 3 æ¬¡å·²ç»è¶³ä»¥å»ºç«‹è¿æ¥ï¼Œ4 æ¬¡æˆ–æ›´å¤šæ¬¡æ¡æ‰‹ä¼šå¢åŠ å¤æ‚æ€§å’Œèµ„æºæµªè´¹\n5.DNS è§£ææµç¨‹ æœ¬åœ°host æ˜ å°„ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœæœ‰è®°å½•ç›´æ¥è¿”å›ï¼‰ å®¢æˆ·ç«¯ç¼“å­˜ï¼ˆæµè§ˆå™¨ç¼“å­˜ã€IOSç¼“å­˜ï¼‰ DNS Resolverï¼ˆ/etc/resolv.conf æŒ‡å®šäº†ç³»ç»ŸæŸ¥è¯¢çš„ DNS æœåŠ¡å™¨ï¼ˆé€šå¸¸æ˜¯æœ¬åœ°è·¯ç”±å™¨æˆ–è¿è¥å•† DNSï¼‰ï¼‰ DNS è¿­ä»£æŸ¥è¯¢æµç¨‹ï¼ˆæ ¹åŸŸåæœåŠ¡å™¨ -\u0026gt; é¡¶çº§åŸŸåæœåŠ¡å™¨ -\u0026gt; æƒå¨åŸŸåæœåŠ¡å™¨ï¼ˆä¾‹å¦‚route 53ï¼‰ï¼‰ è¿”å›å®¢æˆ·ç«¯ 6.cookieã€sessionã€token å­˜å‚¨ä½ç½®ä¸åŒ Cookieã€Token å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼ŒSessionå­˜å‚¨åœ¨æœåŠ¡ç«¯ æ•°æ®å®‰å…¨æ€§ä¸åŒ Cookie å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå®¹æ˜“è¢«çªƒå–ï¼Œä¸å®‰å…¨ Session å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œé€šè¿‡ä¸€ä¸ª Session ID åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…³è”ï¼Œå¯ä»¥é¿å…æ•æ„Ÿæ•°æ®ç›´æ¥æš´éœ² Token é€šå¸¸ä½¿ç”¨åŠ å¯†ç®—æ³•ç”Ÿæˆï¼Œæœ‰æ•ˆæœŸè¾ƒçŸ­ä¸”å•å‘ä¸å¯é€†ï¼Œå¯ä»¥æä¾›è¾ƒé«˜çš„å®‰å…¨æ€§ã€‚ è·¨åŸŸæ”¯æŒä¸åŒ Cookie ã€Sessionæ˜¯ä¸æ”¯æŒè·¨åŸŸä¼ è¾“çš„ä½† Token å¯ä»¥è½»æ¾å®ç°è·¨åŸŸã€‚å› ä¸º Token æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ localStorage æˆ–è€…ä½œä¸ºè¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†å‘é€åˆ°æœåŠ¡å™¨çš„ï¼Œæ‰€ä»¥ä¸åŒçš„åŸŸå Token ä¿¡æ¯ä¼ è¾“é€šå¸¸æ˜¯ä¸å—å½±å“çš„ çŠ¶æ€ç®¡ç†ä¸åŒ Cookie æ˜¯åœ¨å®¢æˆ·ç«¯å­˜å‚¨çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥æ“ä½œ Cookie è¿›è¡ŒçŠ¶æ€ç®¡ç†ã€‚ Session æ˜¯åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨çš„ï¼ŒæœåŠ¡å™¨é€šè¿‡ Session ID æ¥è¯†åˆ«ä¸åŒçš„ç”¨æˆ·ä¼šè¯ã€‚ Token æ˜¯åœ¨å®¢æˆ·ç«¯ç”Ÿæˆçš„ï¼Œå®¢æˆ·ç«¯éœ€è¦åœ¨æ¯æ¬¡è¯·æ±‚ä¸­æºå¸¦ Token è¿›è¡Œèº«ä»½éªŒè¯ã€‚ åº”ç”¨åœºæ™¯ä¸åŒ Cookie é€šå¸¸ç”¨äºå­˜å‚¨ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è®°ä½ç”¨æˆ·åå¥½ã€ä¿æŒç™»å½•çŠ¶æ€ã€‚ Session é€‚ç”¨äºéœ€è¦åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨ç”¨æˆ·çŠ¶æ€çš„åœºæ™¯ï¼Œè´­ç‰©è½¦ã€è¡¨å•æäº¤ç­‰éœ€è¦è·Ÿè¸ªç”¨æˆ·çŠ¶æ€çš„åœºæ™¯ã€‚ Token é€‚ç”¨äºéœ€è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œèº«ä»½éªŒè¯çš„åœºæ™¯ï¼Œä¾‹å¦‚ API è®¿é—®æ§åˆ¶ã€å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ã€ç§»åŠ¨åº”ç”¨è®¤è¯ç­‰ã€‚ 7.http çŠ¶æ€ç å’ŒåŸå›  ä¸€äº›é«˜é¢‘è€ƒå¯Ÿçš„çŠ¶æ€ç \n301 Moved Permanentlyï¼šè¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ã€‚å¸¸ç”¨äºåŸŸååˆ‡æ¢\n302 Foundï¼šä¸´æ—¶é‡å®šå‘ï¼Œè¯·æ±‚çš„èµ„æºä¸´æ—¶ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ã€‚ï¼ˆæµè§ˆå™¨å¸¸ç”¨äºç™»å½•è·³è½¬ï¼‰ã€‚\n403 Forbiddenã€‚æƒé™ä¸è¶³ã€æœ‰ Token ä½†æ²¡æœ‰æƒé™ã€‚\n404 Not Foundã€‚è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚\n502 Bad Gatewayã€‚ä¸Šæ¸¸æœåŠ¡ï¼ˆNginx â†’ åº”ç”¨ï¼‰è¿”å›æ— æ•ˆå“åº”ã€‚\n504 Gateway Timeoutã€‚ä¸Šæ¸¸æœåŠ¡å“åº”å¤ªæ…¢ï¼ˆNginx â†’ åç«¯ timeoutï¼‰ã€‚\n8.linux ç½‘ç»œä¸¢åŒ…æ’æŸ¥ æ’æŸ¥é“¾è·¯ï¼š åº”ç”¨ â†’ ç³»ç»Ÿ â†’ ç½‘ç»œæ ˆ â†’ ç½‘å¡ â†’ äº‘ä¾§ â†’ å¤–éƒ¨é“¾è·¯\nåº”ç”¨å±‚æ˜¯å¦ä¸¢åŒ…\næ£€æŸ¥åº”ç”¨æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸æˆ–é”™è¯¯ä¿¡æ¯ã€‚ï¼ˆè¶…æ—¶ã€é“¾æ¥å¤±è´¥ã€æ¥å£qps çªå¢ï¼‰ æ¨¡æ‹Ÿå®¢æˆ·ç«¯curl/wget ç›´æ¥æµ‹è¯• é€šè¿‡ tcpdump æŠ“åŒ…éªŒè¯ sudo tcpdump -i eth0 host -w app.pcap ç³»ç»Ÿå±‚æ˜¯å¦ä¸¢åŒ…\næ£€æŸ¥ç½‘å¡ç»Ÿè®¡ï¼Œethtool -S eth0\næŒ‡æ ‡ å«ä¹‰ è¯´æ˜ rx_dropped æ¥æ”¶ä¸¢åŒ… NIC æˆ–å†…æ ¸é˜Ÿåˆ—æ»¡ rx_errors æ¥æ”¶é”™è¯¯ CRCã€å¸§é”™è¯¯ tx_errors å‘é€é”™è¯¯ æ²¡å‘å‡ºå» rx_no_buffer ring buffer ä¸å¤Ÿ å‹åŠ›å¤§å¸¸è§ rx_over_errors æ¥æ”¶é˜Ÿåˆ—æº¢å‡º ç³»ç»Ÿç“¶é¢ˆ æ£€æŸ¥ Linux ç½‘ç»œæ ˆå±‚ä¸¢åŒ… netstat -s\næ£€æŸ¥å†…æ ¸å‚æ•°\n1 2 3 4 5 sysctl net.core.rmem_default sysctl net.core.wmem_default sysctl net.core.netdev_max_backlog sysctl net.ipv4.tcp_rmem sysctl net.ipv4.tcp_wmem ç½‘å¡é˜Ÿåˆ—ï¼ˆRing bufferï¼‰ä¸¢åŒ… ethtool -g eth0\ncpu/ä¸­æ–­\næ£€æŸ¥ç½‘å¡çš„é…ç½®å‚æ•°ï¼Œç¡®ä¿æ²¡æœ‰è®¾ç½®é”™è¯¯å¯¼è‡´ä¸¢åŒ…ã€‚ å¯ä»¥ä½¿ç”¨å·¥å…·å¦‚ ethtool æ¥æŸ¥çœ‹ç½‘å¡çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œç¡®è®¤æ˜¯å¦æœ‰ä¸¢åŒ…æƒ…å†µã€‚ ç½‘ç»œè·¯å¾„ä¸¢åŒ…ï¼ˆäº‘ä¾§å¸¸è§ï¼‰ mtr -rwzbc 100 ç›®æ ‡ç«¯ä¸¢åŒ…ï¼ˆå¯¹æ–¹å…¥å£æ‰“æ»¡ï¼‰\n1 2 3 4 5 æœ¬æœº tcpdump -i eth0 host \u0026lt;peer\u0026gt; -w local.pcap å¯¹ç«¯ tcpdump -i eth0 host \u0026lt;your-ip\u0026gt; -w remote.pcap 9. é•¿è¿æ¥ã€çŸ­è¿æ¥ã€WebSocketåŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ çŸ­è¿æ¥ å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥åœ¨æ¯æ¬¡è¯·æ±‚å®Œæˆåç«‹å³å…³é—­ã€‚è¿™ç§æ–¹å¼åœ¨ HTTP/1.0 ä¸­æ˜¯é»˜è®¤è¡Œä¸ºã€‚\nä¸€æ¬¡æ€§è¯·æ±‚çš„æƒ…å†µï¼Œæ¯”å¦‚è·å–é™æ€èµ„æºï¼ˆHTMLã€CSSã€å›¾ç‰‡ç­‰ï¼‰ã€‚ å¯¹äºä¸é¢‘ç¹äº¤äº’çš„åº”ç”¨ï¼ŒçŸ­è¿æ¥ç®€å•æ˜“ç”¨ã€‚ é•¿è¿æ¥ æ˜¯æŒ‡åœ¨ä¸€æ¬¡ TCP è¿æ¥ä¸­ï¼Œå¯ä»¥è¿›è¡Œå¤šæ¬¡è¯·æ±‚å’Œå“åº”ï¼Œè€Œä¸éœ€è¦é¢‘ç¹åœ°å»ºç«‹å’Œå…³é—­è¿æ¥ã€‚è¿™åœ¨ HTTP/1.1 ä¸­æ˜¯é»˜è®¤è¡Œä¸ºã€‚\néœ€è¦é¢‘ç¹äº¤äº’çš„åº”ç”¨ï¼Œä¾‹å¦‚åœ¨çº¿èŠå¤©ã€å®æ—¶æ›´æ–°çš„æ•°æ®æµï¼ˆmysqlã€redisç­‰ï¼‰ç­‰ã€‚ é€‚åˆéœ€è¦ä¿æŒä¼šè¯çš„åœºæ™¯ï¼Œå¦‚ç”µå­å•†åŠ¡ç½‘ç«™ä¸­çš„è´­ç‰©è½¦æ“ä½œ WebSocket æ˜¯ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ï¼Œå…è®¸æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚æ”¯æŒåŒå‘é€šä¿¡ã€‚\nå®æ—¶åº”ç”¨ï¼Œå¦‚åœ¨çº¿æ¸¸æˆã€è‚¡ç¥¨è¡Œæƒ…ã€ç¤¾äº¤åª’ä½“å³æ—¶æ¶ˆæ¯ç­‰ã€‚ éœ€è¦å³æ—¶åé¦ˆçš„åº”ç”¨ï¼Œä¾‹å¦‚åä½œç¼–è¾‘å·¥å…·ã€åœ¨çº¿å®¢æœç­‰ã€‚ IoTï¼ˆç‰©è”ç½‘ï¼‰è®¾å¤‡ä¹‹é—´çš„å®æ—¶é€šä¿¡ã€‚ 10. MACåœ°å€IPåœ°å€å¦‚ä½•è½¬æ¢ ARPä½œç”¨å°±æ˜¯é€šè¿‡ipåœ°å€æŸ¥æ‰¾åè½¬æ¢æˆMACåœ°å€ï¼Œé€šè¿‡ARPé«˜é€Ÿç¼“å­˜è¡¨å­˜å‚¨å¯¹åº”å…³ç³»\näºŒå±‚è®¾å¤‡ï¼Œå‘é€æ•°æ®å¸§ 1ã€æºä¸»æœºå…ˆå‘é€å¹¿æ’­å¸§ï¼Œå°†è‡ªå·±çš„IPåœ°å€å’ŒMACåœ°å€å¸¦ä¸Šï¼Œå¹¶ä¸”å¸¦ä¸Šéœ€è¦æŸ¥æ‰¾çš„IPåœ°å€ 2ã€å…¶ä»–ä¸»æœºæ¥æ”¶åˆ°åå¦‚æœå‘ç°IPåœ°å€å°±æ˜¯è‡ªå·±ï¼Œå°±éœ€è¦è¿”å›è‡ªå·±çš„IPåœ°å€å’ŒMACåœ°å€ï¼Œå•æ’­å‘é€ç»™æºä¸»æœºï¼Œå¹¶ä¸”åœ¨è‡ªå·±çš„é«˜é€Ÿç¼“å­˜è¡¨ä¸­è®°å½•æºä¸»æœºçš„å¯¹åº”å…³ç³» 3ã€æºä¸»æœºæ¥æ”¶åˆ°ååœ¨é«˜é€Ÿç¼“å­˜è¡¨ä¸­è®°å½•\n11. lvsã€nginxã€haproxyåŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ lvs æ˜¯åŸºäº IP å±‚çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå·¥ä½œåœ¨ OSI æ¨¡å‹çš„ç¬¬ 4 å±‚ï¼ˆä¼ è¾“å±‚ï¼‰ï¼Œä¸»è¦ç”¨äºè´Ÿè½½å‡è¡¡ TCP å’Œ UDP æµé‡ã€‚ nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œè´Ÿè½½å‡è¡¡å™¨ã€‚å®ƒå·¥ä½œåœ¨ OSI æ¨¡å‹çš„ç¬¬ 7 å±‚ï¼ˆåº”ç”¨å±‚ï¼‰ï¼Œä¸»è¦ç”¨äºå¤„ç† HTTP å’Œ HTTPS è¯·æ±‚ã€‚ haproxy æ˜¯ä¸€ä¸ªå¼€æºçš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå·¥ä½œåœ¨ OSI æ¨¡å‹çš„ç¬¬ 7 å±‚ï¼ˆåº”ç”¨å±‚ï¼‰ï¼Œä¸»è¦ç”¨äºè´Ÿè½½å‡è¡¡ HTTP å’Œ HTTPS è¯·æ±‚ã€‚ ","date":1764848161,"permalink":"http://localhost:1313/topic/interview/network/","summary":"\u003ch2 id=\"1osiä¸ƒå±‚æ¨¡å‹\"\u003e1.OSIä¸ƒå±‚æ¨¡å‹\n\u003c/h2\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e21\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e22\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e23\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e24\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e25\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e26\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eå‘é€ç«¯ï¼ˆç”µè„‘Aï¼‰                          æ¥æ”¶ç«¯ï¼ˆç”µè„‘Bï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+----------------+                      +----------------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| åº”ç”¨å±‚ï¼šData   |                      | åº”ç”¨å±‚ï¼šData   |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e|  \u0026#34;Hi\u0026#34;          |                      |  \u0026#34;Hi\u0026#34;          |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| è¡¨ç¤ºå±‚ï¼šData + è¡¨ç¤ºå¤´                    è¡¨ç¤ºå±‚ï¼šDataï¼ˆå‰¥ç¦»è¡¨ç¤ºå¤´ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| ä¼šè¯å±‚ï¼šData + ä¼šè¯å¤´                    ä¼šè¯å±‚ï¼šDataï¼ˆå‰¥ç¦»ä¼šè¯å¤´ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| ä¼ è¾“å±‚ï¼šSegmentï¼ˆData + ç«¯å£å¤´ï¼‰        ä¼ è¾“å±‚ï¼šDataï¼ˆå‰¥ç¦»ç«¯å£å¤´ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| ç½‘ç»œå±‚ï¼šPacketï¼ˆSegment + IPå¤´ï¼‰       ç½‘ç»œå±‚ï¼šSegmentï¼ˆå‰¥ç¦»IPå¤´ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| æ•°æ®é“¾è·¯å±‚ï¼šFrameï¼ˆPacket + MACå¤´ + CRCï¼‰æ•°æ®é“¾è·¯å±‚ï¼šPacketï¼ˆå‰¥ç¦»MACå¤´+CRCï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e| ç‰©ç†å±‚ï¼šBitsï¼ˆFrameè½¬æ¢ï¼‰               ç‰©ç†å±‚ï¼šFrameï¼ˆBitsè½¬æ¢ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e+-------+--------+                      +-------^--------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        |                                       |\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        +---------------------------------------+\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e               ç‰©ç†ä»‹è´¨ï¼ˆç½‘çº¿/æ— çº¿ï¼‰\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eOSI å±‚\u003c/th\u003e\n          \u003cth\u003eæ ¸å¿ƒåŠŸèƒ½\u003c/th\u003e\n          \u003cth\u003eå…³é”®è®¾å¤‡ / ç»„ä»¶\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eåº”ç”¨å±‚\u003c/td\u003e\n          \u003ctd\u003eæä¾›åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡\u003c/td\u003e\n          \u003ctd\u003eæµè§ˆå™¨ã€FTPå®¢æˆ·ç«¯ã€SMTPå®¢æˆ·ç«¯\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eè¡¨ç¤ºå±‚\u003c/td\u003e\n          \u003ctd\u003eæ•°æ®çš„è¡¨ç¤ºå’Œè½¬æ¢\u003c/td\u003e\n          \u003ctd\u003eåŠ å¯†ã€å‹ç¼©\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eä¼šè¯å±‚\u003c/td\u003e\n          \u003ctd\u003eç®¡ç†ä¼šè¯è¿æ¥\u003c/td\u003e\n          \u003ctd\u003eä¼šè¯ID\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eä¼ è¾“å±‚\u003c/td\u003e\n          \u003ctd\u003eç«¯åˆ°ç«¯é€šä¿¡\u003c/td\u003e\n          \u003ctd\u003eTCPã€UDP\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç½‘ç»œå±‚\u003c/td\u003e\n          \u003ctd\u003eè·¨ç½‘ç»œè·¯ç”±ä¸ IP åœ°å€è¯†åˆ«\u003c/td\u003e\n          \u003ctd\u003eè·¯ç”±å™¨ã€äº¤æ¢æœº\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ•°æ®é“¾è·¯å±‚\u003c/td\u003e\n          \u003ctd\u003eå¸§ä¼ è¾“ä¸ MAC åœ°å€è¯†åˆ«\u003c/td\u003e\n          \u003ctd\u003eç½‘å¡ã€äº¤æ¢æœº\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eç‰©ç†å±‚\u003c/td\u003e\n          \u003ctd\u003eæ¯”ç‰¹æµä¼ è¾“\u003c/td\u003e\n          \u003ctd\u003eç½‘çº¿ã€å…‰çº¤\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"2http11-å’Œhttp2-åŒºåˆ«\"\u003e2.http1.1 å’Œhttp2 åŒºåˆ«\n\u003c/h2\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eç‰¹æ€§\u003c/th\u003e\n          \u003cth\u003eHTTP/1.1\u003c/th\u003e\n          \u003cth\u003eHTTP/2\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eä¼ è¾“å¼€é”€\u003c/td\u003e\n          \u003ctd\u003eæ–‡æœ¬ä¼ è¾“ï¼Œå¼€é”€è¾ƒå¤§\u003c/td\u003e\n          \u003ctd\u003eäºŒè¿›åˆ¶æµä¼ è¾“ï¼Œå¼€é”€æ›´å°\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eå¤šè·¯å¤ç”¨\u003c/td\u003e\n          \u003ctd\u003eé¡ºåºåŠ è½½èµ„æºï¼ŒæŸä¸ªèµ„æºé˜»å¡ä¼šå½±å“åç»­èµ„æº\u003c/td\u003e\n          \u003ctd\u003eå•ä¸ª TCP è¿æ¥ä¸Šå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªæ•°æ®æµï¼Œäº’ä¸é˜»å¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæœåŠ¡å™¨æ¨é€\u003c/td\u003e\n          \u003ctd\u003eä¸æ”¯æŒ\u003c/td\u003e\n          \u003ctd\u003eæ”¯æŒï¼ŒæœåŠ¡å™¨å¯åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¹‹å‰æ¨é€å†…å®¹\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæ ‡å¤´å‹ç¼©\u003c/td\u003e\n          \u003ctd\u003eä¸å‹ç¼©æˆ–ç®€å•å‹ç¼©ï¼Œå†—ä½™ä¿¡æ¯å¤š\u003c/td\u003e\n          \u003ctd\u003eä½¿ç”¨ HPACK å‹ç¼©ï¼Œå‡å°‘å†—ä½™ï¼Œæé«˜åŠ è½½é€Ÿåº¦\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"3tcp-çš„é“¾æ¥çŠ¶æ€\"\u003e3.TCP çš„é“¾æ¥çŠ¶æ€\n\u003c/h2\u003e\u003cp\u003e\u003cimg src=\"/img/interview/tcp_netstat.png\"\n\t\n\t\n\t\n\tloading=\"lazy\"\n\t\n\t\talt=\"alt text\"\n\t\n\t\n\u003e\u003c/p\u003e","title":"Network"},{"content":"1. SLAã€SLOã€SLI SLIï¼šæœåŠ¡æ°´å¹³æŒ‡ç¤ºå™¨ï¼ˆæ­£å¸¸å“åº”æ•°çš„ç™¾åˆ†æ¯”ï¼‰\nSLOï¼šæœåŠ¡æ°´å¹³ç›®æ ‡ï¼ˆ99%ã€99.999%ã€99.99999%ï¼‰ å¿…é¡»å’Œæ—¶é—´æŒ‚é’©\nSLAï¼šæœåŠ¡æ°´å¹³åè®®ï¼ˆSLOçš„å…·ä½“å®ç°ï¼‰\nSLA æ˜¯å¯¹å®¢æˆ·çš„å¤–éƒ¨æ‰¿è¯ºï¼ŒSLO æ˜¯å…¬å¸å†…éƒ¨ä¸ºå®ç°æ‰¿è¯ºè®¾å®šçš„ç›®æ ‡ï¼ŒSLI åˆ™æ˜¯ç”¨æ¥è¡¡é‡å®é™…æœåŠ¡è¡¨ç°çš„æŒ‡æ ‡ã€‚\n2.MTTR MTTRï¼šå¹³å‡æ•…éšœä¿®å¤æ—¶é—´ï¼ˆMean Time to Repairï¼‰\nMTTR = æ•…éšœä¿®å¤æ€»æ—¶é•¿ Ã· æ•…éšœæ¬¡æ•°\nå¦‚ä½•é™ä½ MTTRï¼Ÿ ç›‘æ§ å®Œå–„ç›‘æ§å‘Šè­¦ä½“ç³» ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§ ç³»ç»ŸæŒ‡æ ‡ç›‘æ§ å‘Šè­¦é™å™ª å‘Šè­¦åˆ†çº§ï¼šp1ã€p2ã€p3 å‘Šè­¦å‡çº§ï¼šå½“æŸå‘Šè­¦ç­‰çº§ä¸º P2ï¼Œä¸”åœ¨ 1 å°æ—¶å†…æœªè¢«å¤„ç†ï¼ˆæœªå…³é—­ã€æœªå±è”½ç­‰ï¼‰ï¼Œå°†è‡ªåŠ¨å‡çº§ä¸ºp 1 å‘Šè­¦é—´éš”ï¼šåŒä¸€æ¡å‘Šè­¦é»˜è®¤é‡å¤å‘é€æœ€å°é—´éš”æ—¶é—´ä¸º15m å‘Šè­¦æ·¹æ²¡ï¼šè®¾ç½®åˆé€‚çš„å‘Šè­¦ç­–ç•¥ï¼Œé¿å…å‘Šè­¦å¤ªå¤šï¼Œå‘Šè­¦æ¼æŠ¥ å¿«é€Ÿå®šä½ æ ‡å‡†åŒ–æ’éšœ SOP CPUã€å†…å­˜é£™é«˜æ€ä¹ˆæŸ¥ ELB 5xx æ€ä¹ˆæŸ¥ Pod CrashLoop æ€ä¹ˆæŸ¥ è‡ªåŠ¨æŠ“å–ç°åœºä¿¡æ¯ C++ core dump ç»Ÿä¸€æ—¥å¿—å¹³å° ELK / Loki å…¨é“¾è·¯è¿½è¸ª å¿«é€Ÿä¿®å¤é—®é¢˜ ç°åº¦å‘å¸ƒ / é‡‘ä¸é›€å‘å¸ƒ é…ç½®ä¸­å¿ƒ(apollo) + åŠ¨æ€åˆ‡æµï¼ˆåƒå¼€å…³ä¸€æ ·å…³é—­æŸä¸ªæ¨¡å—ï¼‰ è‡ªåŠ¨æ‰©å®¹ï¼ˆæ ¹æ®ä¸šåŠ¡æµé‡è‡ªåŠ¨æ‰©å®¹ï¼ŒHPAï¼‰ è„šæœ¬åŒ–ä¿®å¤ ä¸€é”®é‡å¯ ä¸€é”®æ¸…ç†DNSç¼“å­˜ \u0026hellip;. é«˜å¯ç”¨éƒ¨ç½² é«˜å¯ç”¨ å¤šAZéƒ¨ç½² è‡ªåŠ¨æ•…éšœè½¬ç§» æŒç»­æ¼”ç»ƒ \u0026amp; å¯é æ€§æµ‹è¯• æ··æ²Œå·¥ç¨‹ï¼ˆæå‰æ¼”ç»ƒæ•…éšœï¼‰ å¢åŠ ç¼ºå¤±ç›‘æ§ç‚¹ \u0026hellip;.. ","date":1764842795,"permalink":"http://localhost:1313/topic/interview/sre/","summary":"\u003ch2 id=\"1-slaslosli\"\u003e1. SLAã€SLOã€SLI\n\u003c/h2\u003e\u003cp\u003eSLIï¼šæœåŠ¡æ°´å¹³æŒ‡ç¤ºå™¨ï¼ˆæ­£å¸¸å“åº”æ•°çš„ç™¾åˆ†æ¯”ï¼‰\u003c/p\u003e\n\u003cp\u003eSLOï¼šæœåŠ¡æ°´å¹³ç›®æ ‡ï¼ˆ99%ã€99.999%ã€99.99999%ï¼‰\nå¿…é¡»å’Œæ—¶é—´æŒ‚é’©\u003c/p\u003e","title":"Sre"},{"content":"1. è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ è¿›ç¨‹ï¼šæ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼ŒCPUã€å†…å­˜ã€ç£ç›˜IOï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ã€‚ çº¿ç¨‹ï¼šè¿›ç¨‹å†…çš„æ‰§è¡Œå•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºã€‚ åç¨‹ï¼šç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œç”±ç”¨æˆ·ç¨‹åºæ§åˆ¶ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒã€‚ 2. Linuxä¸­çš„è¿›ç¨‹ä¼˜å…ˆçº§ä¸è®¾ç½®æ–¹æ³• è¿›ç¨‹çš„ä¼˜å…ˆçº§å†³å®šäº†å…¶è·å– CPU æ—¶é—´ç‰‡çš„é¡ºåºã€‚ä¼˜å…ˆçº§æ›´é«˜ï¼ˆæ•°å€¼æ›´ä½ï¼‰çš„è¿›ç¨‹ä¼šä¼˜å…ˆè·å– CPU æ—¶é—´ç‰‡ã€‚ è¿›ç¨‹çš„ä¼˜å…ˆçº§ç”± Nice å€¼è¡¨ç¤ºï¼ŒNice å€¼çš„èŒƒå›´æ˜¯ -20ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰åˆ° 19ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹çš„ Nice å€¼ä¸º 0ã€‚\nnice å‘½ä»¤ï¼šnice å‘½ä»¤ç”¨äºå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶è®¾ç½®å…¶ Nice å€¼ã€‚ä¾‹å¦‚ï¼Œnice -n 10 command ä¼šä»¥ Nice å€¼ä¸º 10 æ¥å¯åŠ¨ commandã€‚ renice å‘½ä»¤ï¼šrenice å‘½ä»¤ç”¨äºä¿®æ”¹å·²ç»åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ Nice å€¼ã€‚ä¾‹å¦‚ï¼Œrenice +5 -p 1234 ä¼šå°† PID ä¸º 1234 çš„è¿›ç¨‹çš„ Nice å€¼å¢åŠ  5ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰ root ç”¨æˆ·æ‰èƒ½é™ä½è¿›ç¨‹çš„ Nice å€¼ã€‚ åœ¨ä»£ç ä¸­è°ƒç”¨ nice() æˆ– setpriority() å‡½æ•°ï¼šå¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œä½ å¯ä»¥åœ¨ä»£ç ä¸­è°ƒç”¨ nice() æˆ– setpriority() å‡½æ•°æ¥æ”¹å˜ä½ çš„è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚ 3. ä»€ä¹ˆæ˜¯åƒµå°¸è¿›ç¨‹ åƒµå°¸è¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªå·²ç»ç»ˆæ­¢è¿è¡Œçš„è¿›ç¨‹ï¼Œä½†æ˜¯å…¶è¿›ç¨‹æè¿°ç¬¦ï¼ˆprocess descriptorï¼‰è¿˜åœ¨å†…å­˜ä¸­ã€‚ çˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å­è¿›ç¨‹çš„èµ„æºã€‚\n4. ä»€ä¹ˆè¿›ç¨‹ä¸­æ–­ ä¸­æ–­æ˜¯ç³»ç»Ÿç”¨æ¥å“åº”ç¡¬ä»¶è®¾å¤‡è¯·æ±‚çš„ä¸€ç§æœºåˆ¶ï¼Œä¼šæ‰“æ–­è¿›ç¨‹çš„æ­£å¸¸è°ƒåº¦å’Œæ‰§è¡Œï¼Œç„¶åè°ƒç”¨å†…æ ¸çš„ä¸­æ–­å¤„ç†ç¨‹åºæ¥å“åº”è®¾å¤‡çš„è¯·æ±‚ã€‚ å–å¤–å–æ¡ˆä¾‹ï¼Œä¸ç”¨è‹¦è‹¦ç­‰å¾…ï¼Œæ‰“ç”µè¯çš„åŠ¨ä½œå°±æ˜¯ä¸­æ–­ã€‚ ä¸­æ–­æ˜¯ä¸€ç§å¼‚æ­¥å¤„ç†æœºåˆ¶ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚\n4.1 è½¯ä¸­æ–­ã€ç¡¬ä¸­æ–­ã€ä¸å¯ä¸­æ–­è¿›ç¨‹ Linuxå°†ä¸­æ–­åˆ†ä¸ºä¸¤ä¸ŠåŠéƒ¨åˆ†ã€ä¸‹åŠéƒ¨åˆ† ä¸ŠåŠéƒ¨åˆ†ç›´æ¥å¤„ç†ç¡¬ä»¶è¯·æ±‚ï¼Œç‰¹ç‚¹æ˜¯å¿«é€Ÿæ‰§è¡Œï¼ˆç¡¬ä¸­æ–­ï¼‰ ä¸‹åŠéƒ¨åˆ†æ˜¯ç”±å†…æ ¸è§¦å‘ï¼Œç‰¹ç‚¹æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼ˆè½¯ä¸­æ–­ï¼‰ ä¸å¯ä¸­æ–­è¿›ç¨‹è¡¨ç¤ºè¿›ç¨‹å’Œç¡¬ä»¶æ­£åœ¨äº¤äº’ï¼Œä¸ºäº†ä¿æŒè¿›ç¨‹æ•°æ®å’Œç¡¬ä»¶çš„ä¸€è‡´æ€§ï¼Œç³»ç»Ÿä¸å…è®¸å…¶ä»–è¿›ç¨‹æˆ–ä¸­æ–­æ‰“æ–­è¿™ä¸ªè¿›ç¨‹ã€‚è¿›ç¨‹é•¿æ—¶é—´å¤„äºä¸å¯ä¸­æ–­çŠ¶æ€ï¼Œé€šå¸¸è¡¨ç¤ºç³»ç»ŸIOå­˜åœ¨é—®é¢˜ã€‚\n5. è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼åŠå…¶ä½¿ç”¨åœºæ™¯ ç®¡é“ï¼ˆPipeï¼‰å’Œå‘½åç®¡é“ï¼ˆNamed pipeï¼‰ï¼šç®¡é“æ˜¯ä¸€ç§åŠåŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œä¸»è¦ç”¨äºå…·æœ‰çˆ¶å­å…³ç³»çš„è¿›ç¨‹é—´ã€‚å‘½åç®¡é“åˆ™æ˜¯ä¸€ç§å…¨åŒå·¥çš„é€šä¿¡æ–¹å¼ï¼Œå¯ä»¥ç”¨äºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é—´çš„é€šä¿¡ã€‚å®ƒä»¬ä¸»è¦ç”¨äºæ•°æ®çš„æµå¼ä¼ è¾“ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼‰ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ç»“æ„ï¼Œå¯ä»¥å­˜å‚¨è¦å‘é€çš„æ¶ˆæ¯ã€‚è¿›ç¨‹å¯ä»¥å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ä»ä¸­è¯»å–æ¶ˆæ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—å¸¸ç”¨äºä¸åŒè¿›ç¨‹é—´çš„æ•°æ®äº¤æ¢å’ŒåŒæ­¥ã€‚ å…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰ï¼šå…±äº«å†…å­˜æ˜¯æœ€å¿«çš„ IPC æ–¹å¼ï¼Œå®ƒå…è®¸ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹è®¿é—®åŒä¸€å—å†…å­˜åŒºåŸŸã€‚è¿™ç§æ–¹å¼å¸¸ç”¨äºå¤§é‡æ•°æ®çš„äº¤æ¢ã€‚ ä¿¡å·ï¼ˆSignalï¼‰ï¼šä¿¡å·æ˜¯ä¸€ç§å¼‚æ­¥çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹ç»“æŸæ—¶ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª SIGCHLD ä¿¡å·ç»™å…¶çˆ¶è¿›ç¨‹ã€‚ å¥—æ¥å­—ï¼ˆSocketï¼‰ï¼šå¥—æ¥å­—å¯ä»¥ç”¨äºä¸åŒæœºå™¨ä¹‹é—´çš„è¿›ç¨‹é€šä¿¡ï¼Œä¹Ÿå¯ä»¥ç”¨äºåŒä¸€æœºå™¨ä¸Šçš„è¿›ç¨‹é€šä¿¡ã€‚å®ƒæ”¯æŒ TCPã€UDP ç­‰å¤šç§åè®®ï¼Œå¸¸ç”¨äºç½‘ç»œé€šä¿¡ã€‚ ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ï¼šä¿¡å·é‡ä¸»è¦ç”¨äºè§£å†³ç«æ€æ¡ä»¶ï¼Œä¿æŠ¤å…³é”®èµ„æºçš„è®¿é—®ã€‚å½“å¤šä¸ªè¿›ç¨‹éœ€è¦è®¿é—®åŒä¸€èµ„æºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·é‡è¿›è¡ŒåŒæ­¥ã€‚ æ–‡ä»¶é”ï¼ˆFile Lockingï¼‰ï¼šæ–‡ä»¶é”å¯ä»¥ç”¨äºæ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹åŒä¸€æ–‡ä»¶çš„è®¿é—®ã€‚å½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨è®¿é—®æŸä¸ªæ–‡ä»¶æ—¶ï¼Œå…¶ä»–è¿›ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°è¯¥è¿›ç¨‹é‡Šæ”¾äº†æ–‡ä»¶é”ã€‚ 6. cgroupä¸­é™åˆ¶CPUçš„æ–¹å¼æœ‰å“ªäº› cgroups, control groupsï¼ˆæ§åˆ¶ç¾¤ç»„ï¼‰çš„ç®€å†™ï¼Œæ˜¯linuxå†…æ ¸çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨æ¥é™åˆ¶ã€æ§åˆ¶ä¸åˆ†ç¦»ä¸€ä¸ªè¿›ç¨‹èµ„æºï¼ˆå¦‚cpuã€å†…å­˜ã€ç£ç›˜ç­‰ï¼‰ã€‚ åœ¨cgroupä¸­ï¼Œé™åˆ¶CPUçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š\nåŸºäºCPUæ—¶é—´ç‰‡çš„é™åˆ¶ï¼šé€šè¿‡è®¾ç½®cpu.cfs_quota_uså’Œcpu.cfs_period_uså‚æ•°ï¼Œé™åˆ¶è¿›ç¨‹åœ¨æ¯ä¸ªæ—¶é—´å‘¨æœŸå†…å¯ä»¥ä½¿ç”¨çš„CPUæ—¶é—´ã€‚ åŸºäºCPUæ ¸å¿ƒçš„é™åˆ¶ï¼šé€šè¿‡è®¾ç½®cpu.shareså‚æ•°ï¼Œé™åˆ¶è¿›ç¨‹åœ¨å¤šä¸ªCPUæ ¸å¿ƒä¸Šçš„è¿è¡Œæ—¶é—´æ¯”ä¾‹ã€‚ 7. å†…å­˜ä¸­çš„buffersä¸cachedçš„åŒºåˆ« è®¾è®¡ç›®çš„ï¼Œä¸ºäº†æå‡ç³»ç»Ÿçš„I/Oæ€§èƒ½ Buffers æ˜¯å†…æ ¸ç¼“å†²åŒºç”¨åˆ°çš„å†…å­˜ï¼Œå¯¹åº”çš„æ˜¯ /proc/meminfo ä¸­çš„ Buffers å€¼ã€‚ Cache æ˜¯å†…æ ¸é¡µç¼“å­˜å’Œ Slab ç”¨åˆ°çš„å†…å­˜ï¼Œå¯¹åº”çš„æ˜¯ /proc/meminfo ä¸­çš„ Cached ä¸ SReclaimable ä¹‹å’Œã€‚\nBuffers æ˜¯ç”¨äºä¸´æ—¶å­˜å‚¨å¾…å†™å…¥ç¡¬ç›˜çš„æ•°æ®ï¼Œè€Œ Cached æ˜¯ç”¨äºå­˜å‚¨å·²ç»ä»ç¡¬ç›˜è¯»å–çš„æ•°æ®ï¼Œä»¥ä¾¿å¿«é€Ÿè®¿é—®ã€‚ Buffer æ˜¯å¯¹ç£ç›˜æ•°æ®çš„ç¼“å­˜ã€‚è€Œ Cache æ˜¯æ–‡ä»¶æ•°æ®çš„ç¼“å­˜ï¼Œå®ƒä»¬æ—¢ä¼šç”¨åœ¨è¯»è¯·æ±‚ä¸­ï¼Œä¹Ÿä¼šç”¨åœ¨å†™è¯·æ±‚ä¸­ã€‚\nLinuxæ˜¯å°½å¯èƒ½ä½¿ç”¨å†…å­˜åŸåˆ™ï¼Œå†…å­˜ä¼šæŠŠå‰©ä½™çš„ç©ºé—´ç”³è¯·ä¸ºcacheï¼Œè€Œcacheä¸å±äºfreeï¼Œå½“ç³»ç»Ÿè¿è¡Œæ—¶é—´å¾ˆé•¿ï¼Œæˆ‘ä»¬ä¼šå‘ç°cacheå¾ˆå¤§ã€‚\nå½“æˆ‘ä»¬çœ‹åˆ°ç³»ç»Ÿå†…å­˜ä½¿ç”¨ç‡å¾ˆé«˜ï¼Œfreeå‡ ä¹ä¸º0æ—¶ï¼Œå¹¶ä¸ä»£è¡¨ç³»ç»Ÿå†…å­˜å®¹é‡æœ‰ç“¶é¢ˆï¼åªæ˜¯ç³»ç»Ÿå……åˆ†å‘æŒ¥äº†å†…å­˜ä½œç”¨ã€‚è€Œå½“æœ‰è¿›ç¨‹éœ€è¦ç”³è¯·å¤§æ–‡ä»¶å†…å­˜æ—¶ï¼Œå†…æ ¸ä¼šå°†éƒ¨åˆ†cacheç©ºé—´å›æ”¶ï¼Œå›æ”¶çš„å†…å­˜å†åˆ†é…ç»™è¿›ç¨‹ç¨‹åºä½¿ç”¨ã€‚\n8. æ ˆå†…å­˜å’Œå †å†…å­˜çš„åŒºåˆ« æ ˆå†…å­˜ï¼ˆStackï¼‰ ç‰¹ç‚¹ï¼šæ ˆå†…å­˜æ˜¯è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾çš„ï¼Œå…·æœ‰å…ˆè¿›åå‡ºï¼ˆLIFOï¼ŒLast In First Outï¼‰çš„ç‰¹æ€§ã€‚æ ˆå†…å­˜ä¸­çš„å˜é‡ä¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºï¼Œå¹¶åœ¨å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é”€æ¯ã€‚å…¶ç®¡ç†ç”±ç¼–è¯‘å™¨æ§åˆ¶ï¼Œå› æ­¤æ•ˆç‡è¾ƒé«˜ã€‚ ç”¨é€”ï¼šé€šå¸¸ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ç­‰ä¸´æ—¶æ•°æ®ã€‚æ ˆå†…å­˜çš„åˆ†é…é€šå¸¸å¾ˆå¿«ï¼Œå› ä¸ºå®ƒåªæ˜¯è°ƒæ•´ä¸€ä¸ªæŒ‡é’ˆæ¥è·Ÿè¸ªå½“å‰çš„æ ˆé¡¶ä½ç½®ã€‚ ä¼˜ç‚¹ï¼šå†…å­˜åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦å¿«ï¼Œä¸å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚ ç¼ºç‚¹ï¼šæ ˆå†…å­˜çš„å¤§å°é€šå¸¸æœ‰é™ï¼Œä¸èƒ½ç”¨äºå­˜å‚¨å¤§é‡æ•°æ®æˆ–é•¿æ—¶é—´ä½¿ç”¨çš„æ•°æ®ã€‚ å †å†…å­˜ï¼ˆHeapï¼‰ ç‰¹ç‚¹ï¼šå †å†…å­˜æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œå¤§å°ä¸å›ºå®šï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾ã€‚å¦‚æœå¿˜è®°é‡Šæ”¾ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚å®ƒæ²¡æœ‰ä¸¥æ ¼çš„å…ˆè¿›åå‡ºçš„é¡ºåºï¼Œå¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•ä½ç½®è¯·æ±‚å†…å­˜åˆ†é…ã€‚ ç”¨é€”ï¼šç”¨äºå­˜å‚¨éœ€è¦åŠ¨æ€åˆ†é…çš„å¤§é‡æ•°æ®ï¼Œå¦‚å¯¹è±¡ã€å…¨å±€æ•°æ®ç­‰ã€‚é€šè¿‡ malloc() æˆ– new ç­‰æ“ä½œåˆ†é…ï¼Œé€šè¿‡ free() æˆ– delete ç­‰æ“ä½œé‡Šæ”¾ã€‚ ä¼˜ç‚¹ï¼šé€‚åˆé•¿æ—¶é—´ä½¿ç”¨çš„æ•°æ®æˆ–è¾ƒå¤§çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚é“¾è¡¨ã€æ ‘ç­‰ã€‚å †å†…å­˜çš„å¤§å°ç›¸å¯¹æ ˆæ¥è¯´å‡ ä¹æ˜¯æ— é™çš„ï¼ˆå—åˆ¶äºç‰©ç†å†…å­˜å’Œç³»ç»Ÿé™åˆ¶ï¼‰ã€‚ ç¼ºç‚¹ï¼šç”±äºéœ€è¦æ‰‹åŠ¨ç®¡ç†ï¼Œå †å†…å­˜åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸”å®¹æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡ã€‚ åŒºåˆ«æ€»ç»“ï¼š\nç”Ÿå‘½å‘¨æœŸï¼šæ ˆå†…å­˜ä¸­çš„æ•°æ®åœ¨å‡½æ•°è°ƒç”¨æœŸé—´æœ‰æ•ˆï¼Œè€Œå †å†…å­˜çš„æ•°æ®åœ¨æ‰‹åŠ¨é‡Šæ”¾å‰ä¸€ç›´æœ‰æ•ˆã€‚ åˆ†é…æ–¹å¼ï¼šæ ˆæ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œç®¡ç†ï¼Œå †æ˜¯ç”±ç¨‹åºå‘˜åŠ¨æ€åˆ†é…å’Œç®¡ç†ã€‚ æ•ˆç‡ï¼šæ ˆå†…å­˜æ•ˆç‡é«˜ï¼Œå †å†…å­˜åˆ†é…å’Œé‡Šæ”¾è¾ƒæ…¢ 9. è¿›ç¨‹æœ€å¤§æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°ï¼Œæ€ä¹ˆè°ƒæ•´ æŸ¥çœ‹å½“å‰é™åˆ¶ ulimit -a ulimit -u # æœ€å¤§è¿›ç¨‹/çº¿ç¨‹æ•° ulimit -n # æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°\nè°ƒæ•´æœ€å¤§æ–‡ä»¶æ•° ä¸´æ—¶ç”Ÿæ•ˆ ulimit -n 65535\næ°¸ä¹…ç”Ÿæ•ˆ sudo vim /etc/security/limits.conf\næ·»åŠ å¦‚ä¸‹å†…å®¹\nsoft nofile 65535 hard nofile 65535 è°ƒæ•´æœ€å¤§è¿›ç¨‹æ•° / æœ€å¤§çº¿ç¨‹æ•° ä¸´æ—¶ç”Ÿæ•ˆ ulimit -u 65535\næ°¸ä¹…ç”Ÿæ•ˆ sudo vim /etc/security/limits.conf\næ·»åŠ å¦‚ä¸‹å†…å®¹\nsoft nproc 65535 hard nproc 65535 æ³¨æ„äº‹é¡¹ soft è½¯é™åˆ¶ï¼šç”¨æˆ·å¯ä»¥è¶…è¿‡è¿™ä¸ªå€¼ï¼Œä½†æ˜¯ä¸èƒ½è¶…è¿‡hardé™åˆ¶ã€‚ hard ç¡¬é™åˆ¶ï¼šç”¨æˆ·ä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼ï¼Œä¹Ÿä¸èƒ½ä½äºsofté™åˆ¶ã€‚\n/etc/sysctl.conf å±äºç³»ç»Ÿçº§åˆ«å†…æ ¸å‚æ•°ï¼Œéœ€è¦é‡å¯ç”Ÿæ•ˆã€‚ /etc/security/limits.conf å±äºç”¨æˆ·çº§åˆ«æˆ–è€…è¿›ç¨‹çº§åˆ«çš„å‚æ•°ï¼Œéœ€è¦é‡æ–°ç™»å½•ç”Ÿæ•ˆã€‚\n10. loadå’Œcpuä½¿ç”¨ç‡åŒºåˆ« load å¹³å‡è´Ÿè½½æ˜¯æŒ‡å•ä½æ—¶é—´å†…ï¼Œç³»ç»Ÿå¤„äºå¯è¿è¡ŒçŠ¶æ€ï¼ˆRï¼‰å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„å¹³å‡è¿›ç¨‹æ•°ï¼ˆDï¼‰ï¼ˆå¹³å‡æ´»è·ƒè¿›ç¨‹æ•°ï¼‰ã€‚ cpu ä½¿ç”¨ç‡æ˜¯æŒ‡å•ä½æ—¶é—´å†…ï¼ŒCPU æ­£åœ¨å¤„ç†çš„ä»»åŠ¡æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ä¾‹ã€‚\næœ€ç†æƒ³çš„æƒ…å†µï¼šå¹³å‡è´Ÿè½½ç­‰äºCPUçš„ä¸ªæ•°ï¼Œæ¯ä¸€ä¸ªæ ¸ä¸Šéƒ½å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹\n1 2 3 4 5 6 æŸ¥çœ‹CPUæ ¸å¿ƒæ•° grep \u0026#39;model name\u0026#39; /proc/cpuinfo | wc -l uptime 06:44:50 up 190 days, 22:44, 4 users, load average: 0.42, 0.14, 0.04 ä¸¤è€…ä¹‹é—´å…³ç³» CPU å¯†é›†å‹è¿›ç¨‹ï¼Œä½¿ç”¨å¤§é‡ CPU ä¼šå¯¼è‡´å¹³å‡è´Ÿè½½å‡é«˜ï¼Œæ­¤æ—¶è¿™ä¸¤è€…æ˜¯ä¸€è‡´çš„ I/O å¯†é›†å‹è¿›ç¨‹ï¼Œç­‰å¾… I/O ä¹Ÿä¼šå¯¼è‡´å¹³å‡è´Ÿè½½å‡é«˜ï¼Œä½† CPU ä½¿ç”¨ç‡ä¸ä¸€å®šå¾ˆé«˜ å¤§é‡ç­‰å¾… CPU çš„è¿›ç¨‹è°ƒåº¦ä¹Ÿä¼šå¯¼è‡´å¹³å‡è´Ÿè½½å‡é«˜ï¼Œæ­¤æ—¶çš„ CPU ä½¿ç”¨ç‡ä¹Ÿä¼šæ¯”è¾ƒé«˜ 11. du ã€ df æŸ¥çœ‹ç£ç›˜ç»“æœä¸ä¸€è‡´ ç³»ç»Ÿä¸­å¯èƒ½å­˜åœ¨å¤§é‡è¢«åˆ é™¤çš„æ–‡ä»¶ï¼ˆåƒµå°¸æ–‡ä»¶ï¼‰ï¼Œä¸”æœ‰è¿è¡Œçš„è¿›ç¨‹åœ¨ä½¿ç”¨è¿™äº›æ–‡ä»¶çš„å¥æŸ„ã€‚\nå½“ä¸€ä¸ªæ–‡ä»¶è¢«åˆ é™¤åï¼Œå¦‚æœæœ‰è¿›ç¨‹ä»ç„¶æ‰“å¼€ç€è¯¥æ–‡ä»¶ï¼Œdu ä¸ä¼šç»Ÿè®¡è¿™éƒ¨åˆ†ç©ºé—´ï¼Œå› ä¸ºæ–‡ä»¶å·²ç»ä»ç›®å½•ç»“æ„ä¸­ç§»é™¤ï¼›ç„¶è€Œï¼Œdf ä¼šç»Ÿè®¡è¿™éƒ¨åˆ†ç©ºé—´ï¼Œå› ä¸ºç£ç›˜ç©ºé—´å®é™…ä¸Šè¿˜è¢«å ç”¨ã€‚\nè§£å†³æ–¹æ³• é‡å¯ç³»ç»Ÿï¼šé‡å¯ç³»ç»Ÿå¯ä»¥æ¸…é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æ–‡ä»¶å¥æŸ„ï¼ŒåŒ…æ‹¬åƒµå°¸æ–‡ä»¶ã€‚ æŸ¥æ‰¾å¹¶å…³é—­è¿›ç¨‹ï¼šä½¿ç”¨ lsof æˆ– fuser ç­‰å·¥å…·æŸ¥æ‰¾å¹¶å…³é—­ä½¿ç”¨åƒµå°¸æ–‡ä»¶çš„è¿›ç¨‹ã€‚ lsof |grep deleted æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ï¼šå¦‚æœè¿›ç¨‹æ— æ³•å…³é—­ï¼Œåªèƒ½æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ã€‚ä½†è¦æ³¨æ„ï¼Œåˆ é™¤æ–‡ä»¶åï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥æ–‡ä»¶çš„è¿›ç¨‹éƒ½å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ æ€æ­»è¿›ç¨‹ 12. ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥åŒºåˆ« ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥æ˜¯ä¸¤ç§ä¸åŒç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿé“¾æ¥ï¼Œç”¨äºåœ¨ç›®å½•ä¹‹é—´å…±äº«æ–‡ä»¶ã€‚\nç¡¬é“¾æ¥ï¼š a. å…·æœ‰ç›¸åŒinodeèŠ‚ç‚¹å·çš„å¤šä¸ªæ–‡ä»¶äº’ä¸ºç¡¬é“¾æ¥æ–‡ä»¶ï¼› b. ç¡¬é“¾æ¥æ–‡ä»¶æ˜¯æ–‡ä»¶çš„å¦ä¸€ä¸ªå…¥å£ c. å¯ä»¥é€šè¿‡ç»™æ–‡ä»¶è®¾ç½®ç¡¬é“¾æ¥æ–‡ä»¶æ¥é˜²æ­¢é‡è¦æ–‡ä»¶è¢«è¯¯åˆ ï¼› d. åˆ é™¤ç¡¬é“¾æ¥æ–‡ä»¶æˆ–è€…åˆ é™¤æºæ–‡ä»¶ï¼Œæ–‡ä»¶å®ä½“ä¸ä¼šè¢«åˆ é™¤ï¼Œåªæœ‰éƒ½åˆ é™¤æ‰ä¼šç”Ÿæ•ˆ\nè½¯è¿æ¥ï¼š a. è½¯é“¾æ¥ç±»ä¼¼windowsç³»ç»Ÿçš„å¿«æ·æ–¹å¼ b. è½¯é“¾æ¥é‡Œé¢å­˜æ”¾çš„æ˜¯æºæ–‡ä»¶çš„è·¯å¾„ï¼ŒæŒ‡å‘æºæ–‡ä»¶ c. åˆ é™¤æºæ–‡ä»¶ï¼Œè½¯é“¾æ¥ä¾ç„¶å­˜åœ¨ï¼Œä½†æ— æ³•è®¿é—®æºæ–‡ä»¶å†…å®¹ d. è½¯é“¾æ¥å’Œæºæ–‡ä»¶æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼Œæ–‡ä»¶ç±»å‹ä¹Ÿä¸åŒï¼Œinodeå·ä¹Ÿä¸åŒï¼›\nlvmæ€ä¹ˆåˆ’åˆ† åˆ›å»ºç‰©ç†å·ï¼ˆPVï¼‰ åˆ›å»ºå·ç»„ï¼ˆVGï¼‰ åˆ›å»ºé€»è¾‘å·ï¼ˆLVï¼‰ æ ¼å¼åŒ–é€»è¾‘å·ï¼ˆLVï¼‰ æŒ‚è½½é€»è¾‘å·ï¼ˆLVï¼‰ åœ¨å…¬æœ‰äº‘è¿ç»´ä¸­ å¾ˆå°‘è§åˆ° LVM åˆ’åˆ†ç£ç›˜ï¼Œè¿™å…¶å®å®Œå…¨æ­£å¸¸ï¼Œè€Œä¸”æ˜¯è¡Œä¸šè¶‹åŠ¿ã€‚\näº‘ç›˜å¯ä»¥ç›´æ¥æ‰©å®¹ï¼Œä¸éœ€è¦ LVM çš„ PV/VG/LV ä¼ ç»Ÿ LVM å¸¸ç”¨äºRAID1ï¼ˆé•œåƒï¼‰ã€RAID0ï¼ˆæå‡æ€§èƒ½ï¼‰ã€‚ä½†æ˜¯äº‘ç›˜åº•å±‚å·²ç»å¤šå‰¯æœ¬ã€ä¸”é€šè¿‡ SSD æä¾›é«˜æ€§èƒ½ k8s å¼±åŒ–äº† LVM çš„ä½¿ç”¨ï¼Œæ ¹ç›˜è¿è¡Œç³»ç»Ÿã€æ•°æ®æ”¾åœ¨PVC 13. å¸¸è§çš„raidæœ‰å“ªäº›ï¼Œä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ å¸¸è§çš„RAIDçº§åˆ«æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nRAID 0ï¼šstripingï¼ˆæ¡å¸¦åŒ–ï¼‰ï¼Œå°†æ•°æ®åˆ†æˆå¤šä¸ªå—ï¼Œå¹¶è¡Œå†™å…¥å¤šä¸ªç£ç›˜ï¼Œæé«˜è¯»å†™é€Ÿåº¦ã€‚ä½†ä¸æä¾›æ•°æ®å†—ä½™ï¼Œä¸€æ—¦ç£ç›˜æ•…éšœï¼Œæ•°æ®å°†ä¸¢å¤±ã€‚ RAID 1ï¼šmirroringï¼ˆé•œåƒï¼‰ï¼Œå°†æ•°æ®åœ¨å¤šä¸ªç£ç›˜ä¸Šè¿›è¡Œé•œåƒå¤‡ä»½ï¼Œæä¾›æ•°æ®å†—ä½™ã€‚ä½†å†™å…¥é€Ÿåº¦å—é™äºè¾ƒæ…¢çš„ç£ç›˜ã€‚ RAID 5ï¼šstriping with parityï¼ˆæ¡å¸¦åŒ–åŠ æ ¡éªŒï¼‰ï¼Œå°†æ•°æ®åˆ†æˆå¤šä¸ªå—ï¼Œå¹¶è¡Œå†™å…¥å¤šä¸ªç£ç›˜ï¼ŒåŒæ—¶åœ¨æ¯ä¸ªç£ç›˜ä¸Šå­˜å‚¨æ ¡éªŒä¿¡æ¯ã€‚æä¾›æ•°æ®å†—ä½™å’Œè¯»å†™é€Ÿåº¦ã€‚ RAID 6ï¼šstriping with double parityï¼ˆæ¡å¸¦åŒ–åŠ åŒæ ¡éªŒï¼‰ï¼Œåœ¨RAID 5çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæ ¡éªŒä¿¡æ¯ï¼Œæä¾›æ›´é«˜çš„æ•°æ®å†—ä½™èƒ½åŠ›ã€‚ ä½¿ç”¨åœºæ™¯ï¼š\nRAID 0ï¼šç”¨äºå¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œå¦‚æ•°æ®åº“ã€è§†é¢‘ç¼–è¾‘ç­‰ã€‚ RAID 1ï¼šç”¨äºå¯¹æ•°æ®å†—ä½™è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œå¦‚ä¼ä¸šå…³é”®æ•°æ®å­˜å‚¨ã€‚ 14. å¦‚ä½•åˆ›å»ºå’Œç®¡ç†è‡ªå®šä¹‰systemdæœåŠ¡ è‡ªå®šä¹‰æœåŠ¡é…ç½®æ–‡ä»¶ä½ç½®/etc/systemd/system/\nåˆ›å»ºæˆ–è€…ä¿®æ”¹å•å…ƒæ–‡ä»¶åéœ€è¦é‡æ–°åŠ è½½é…ç½®ç”Ÿæ•ˆ sudo systemctl daemon-reload\n15. Linux ç³»ç»Ÿä¸­/procæ˜¯åšä»€ä¹ˆçš„ ç”¨æˆ·å’Œå†…æ ¸äº¤äº’çš„æ¥å£ï¼Œæ€§èƒ½å·¥å…·æ•°æ®ï¼ˆtopã€freeã€psï¼‰çš„æ¥æº\n1 2 3 4 5 å¯åŠ¨å½“å‰è¿›ç¨‹å®Œæ•´å‘½ä»¤ /proc/è¿›ç¨‹å·/cmdline å½“å‰è¿›ç¨‹çš„ç¯å¢ƒå˜é‡åˆ—è¡¨ /proc/2422772/environ /proc æ–‡ä»¶è¾“å‡ºæ˜¯ä»¥åœ¨Cè¯­è¨€åŠå…¶è¡ç”Ÿè¯­è¨€ç”Ÿæˆï¼Œéœ€è¦åˆ†éš”æ‰èƒ½æ­£å¸¸è¾“å‡º\n1 cat /proc/3824/cmdline | tr \u0026#39;\\0\u0026#39; \u0026#39;\\n\u0026#39; 16. lsofå‘½ä»¤ä½¿ç”¨åœºæ™¯ æŸ¥çœ‹æŸä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ lsof -p 1234 æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹æ­£åœ¨ä½¿ç”¨ç‰¹å®šç«¯å£ lsof -i :80 æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥ lsof -i æŸ¥çœ‹æŸä¸ªç”¨æˆ·æ‰“å¼€æ–‡ä»¶ lsof -u username æ–‡ä»¶å·²ç»è¢«åˆ é™¤ï¼Œä½†ä»ç„¶è¢«æŸä¸ªè¿›ç¨‹å ç”¨ lsof | grep deleted ","date":1764730604,"permalink":"http://localhost:1313/topic/interview/liunx/","summary":"\u003ch2 id=\"1-è¿›ç¨‹çº¿ç¨‹åç¨‹\"\u003e1. \u003cstrong\u003eè¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹\u003c/strong\u003e\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003eè¿›ç¨‹ï¼šæ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼ŒCPUã€å†…å­˜ã€ç£ç›˜IOï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ã€‚\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹ï¼šè¿›ç¨‹å†…çš„æ‰§è¡Œå•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºã€‚\u003c/li\u003e\n\u003cli\u003eåç¨‹ï¼šç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œç”±ç”¨æˆ·ç¨‹åºæ§åˆ¶ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-linuxä¸­çš„è¿›ç¨‹ä¼˜å…ˆçº§ä¸è®¾ç½®æ–¹æ³•\"\u003e2. Linuxä¸­çš„è¿›ç¨‹ä¼˜å…ˆçº§ä¸è®¾ç½®æ–¹æ³•\n\u003c/h2\u003e\u003cp\u003eè¿›ç¨‹çš„ä¼˜å…ˆçº§å†³å®šäº†å…¶è·å– CPU æ—¶é—´ç‰‡çš„é¡ºåºã€‚ä¼˜å…ˆçº§æ›´é«˜ï¼ˆæ•°å€¼æ›´ä½ï¼‰çš„è¿›ç¨‹ä¼šä¼˜å…ˆè·å– CPU æ—¶é—´ç‰‡ã€‚\nè¿›ç¨‹çš„ä¼˜å…ˆçº§ç”± Nice å€¼è¡¨ç¤ºï¼ŒNice å€¼çš„èŒƒå›´æ˜¯ -20ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰åˆ° 19ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹çš„ Nice å€¼ä¸º 0ã€‚\u003c/p\u003e","title":"Liunx"},{"content":"TCP çš„è¿æ¥æ–¹å¼ TCP å¤´ç»“æ„\næ§åˆ¶ä½ï¼š\nSYNï¼šè¡¨ç¤ºå¸Œæœ›å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å…¶ã€Œåºåˆ—å·ã€çš„å­—æ®µè¿›è¡Œåºåˆ—å·åˆå§‹å€¼çš„è®¾å®šã€‚ ACKï¼šç¡®è®¤ä½ï¼ŒTCP è§„å®šé™¤äº†æœ€åˆå»ºç«‹è¿æ¥æ—¶çš„ SYN åŒ…ä¹‹å¤–è¯¥ä½å¿…é¡»è®¾ç½®ä¸º 1ï¼Œç”¨äºç¡®è®¤æ”¶åˆ°æ•°æ® RSTï¼šè¡¨ç¤º TCP è¿æ¥ä¸­å‡ºç°å¼‚å¸¸å¿…é¡»å¼ºåˆ¶æ–­å¼€è¿æ¥ FINï¼šå½“é€šä¿¡ç»“æŸå¸Œæœ›æ–­å¼€è¿æ¥æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ä¸»æœºä¹‹é—´å°±å¯ä»¥ç›¸äº’äº¤æ¢ FIN ä½ä¸º 1 çš„ TCP æ®µ TCP å®¢æˆ·ç«¯çš„çŠ¶æ€æµè½¬å›´ç»• â€œè¿æ¥å»ºç«‹ - æ•°æ®ä¼ è¾“ - è¿æ¥å…³é—­â€ ä¸‰ä¸ªé˜¶æ®µï¼Œ æ ¸å¿ƒçŠ¶æ€åŒ…æ‹¬ï¼šCLOSED â†’ SYN-SENT â†’ ESTABLISHED â†’ FIN-WAIT-1 â†’ FIN-WAIT-2 â†’ TIME-WAIT â†’ CLOSEDï¼ˆä¸»åŠ¨å…³é—­æµç¨‹ï¼‰ã€‚\næœåŠ¡ç«¯çš„å…¸å‹çŠ¶æ€æµè½¬ä¸ºï¼š CLOSED â†’ LISTEN â†’ SYN-RECEIVED â†’ ESTABLISHEDï¼ˆè¿æ¥å»ºç«‹ï¼‰ï¼› è‹¥è¢«åŠ¨å…³é—­ï¼šESTABLISHED â†’ CLOSE-WAIT â†’ LAST-ACK â†’ CLOSEDã€‚\n502ã€504åŒºåˆ« 502 ç½‘å…³é”™è¯¯ï¼Œé€šå¸¸æ˜¯åç«¯æœåŠ¡è¿”å›äº†æ— æ•ˆå“åº”ï¼ˆå¦‚è¿”å›äº† HTML è€Œä¸æ˜¯ JSONï¼‰ 504 ç½‘å…³è¶…æ—¶ï¼Œé€šå¸¸æ˜¯åç«¯æœåŠ¡å“åº”æ—¶é—´è¶…è¿‡äº†ç½‘å…³çš„è¶…æ—¶æ—¶é—´ å¸¸ç”¨çš„ç½‘ç»œå‘½ä»¤ pingï¼šæµ‹è¯•ä¸»æœºä¹‹é—´çš„ç½‘ç»œè¿æ¥æ˜¯å¦é€šç•… tracerouteï¼šè·Ÿè¸ªæ•°æ®åŒ…ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºçš„è·¯å¾„ netstatï¼šæ˜¾ç¤ºç½‘ç»œè¿æ¥ã€è·¯ç”±è¡¨å’Œæ¥å£ç»Ÿè®¡ä¿¡æ¯ tcpdumpï¼šæ•è·å’Œåˆ†æç½‘ç»œæµé‡ wgetï¼šä»ç½‘ç»œä¸Šä¸‹è½½æ–‡ä»¶ curlï¼šå‘é€ HTTP è¯·æ±‚å¹¶æ˜¾ç¤ºå“åº” ifconfig/ipï¼šé…ç½®å’Œæ˜¾ç¤ºç½‘ç»œæ¥å£ä¿¡æ¯ routeï¼šæ˜¾ç¤ºå’Œæ“ä½œ IP è·¯ç”±è¡¨ digï¼šæŸ¥è¯¢åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰æœåŠ¡å™¨ nslookupï¼šæŸ¥è¯¢åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰æœåŠ¡å™¨ hostï¼šæŸ¥è¯¢åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰æœåŠ¡å™¨ whoisï¼šæŸ¥è¯¢åŸŸåæ³¨å†Œä¿¡æ¯ nmapï¼šç½‘ç»œæ‰«æå·¥å…· iperfï¼šæµ‹è¯•ç½‘ç»œå¸¦å®½ tcpdumpï¼šæ•è·å’Œåˆ†æç½‘ç»œæµé‡ å¦‚ä½•æŸ¥çœ‹80ç«¯å£çš„è¿›ç¨‹ID æŸ¥çœ‹è¿›ç¨‹IDï¼šnetstat -tuln | grep :80 æŸ¥çœ‹è¿›ç¨‹è¯¦æƒ…ï¼šps -ef | grep \u0026lt;pid\u0026gt; ä½ å¯¹ç¨³å®šæ€§æ–¹é¢åšäº†å“ªäº›ä¸œè¥¿ å¼€æ”¾æ€§é—®é¢˜\n","date":1764660045,"permalink":"http://localhost:1313/topic/interview/experience/%E6%BB%B4%E6%BB%B4%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88/","summary":"\u003ch2 id=\"tcp-çš„è¿æ¥æ–¹å¼\"\u003eTCP çš„è¿æ¥æ–¹å¼\n\u003c/h2\u003e\u003cp\u003eTCP å¤´ç»“æ„\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/img/tcp_header.png\"\n\t\n\t\n\t\n\tloading=\"lazy\"\n\t\n\t\talt=\"tcp_header.png\"\n\t\n\t\n\u003e\næ§åˆ¶ä½ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSYNï¼šè¡¨ç¤ºå¸Œæœ›å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å…¶ã€Œåºåˆ—å·ã€çš„å­—æ®µè¿›è¡Œåºåˆ—å·åˆå§‹å€¼çš„è®¾å®šã€‚\u003c/li\u003e\n\u003cli\u003eACKï¼šç¡®è®¤ä½ï¼ŒTCP è§„å®šé™¤äº†æœ€åˆå»ºç«‹è¿æ¥æ—¶çš„ SYN åŒ…ä¹‹å¤–è¯¥ä½å¿…é¡»è®¾ç½®ä¸º 1ï¼Œç”¨äºç¡®è®¤æ”¶åˆ°æ•°æ®\u003c/li\u003e\n\u003cli\u003eRSTï¼šè¡¨ç¤º TCP è¿æ¥ä¸­å‡ºç°å¼‚å¸¸å¿…é¡»å¼ºåˆ¶æ–­å¼€è¿æ¥\u003c/li\u003e\n\u003cli\u003eFINï¼šå½“é€šä¿¡ç»“æŸå¸Œæœ›æ–­å¼€è¿æ¥æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ä¸»æœºä¹‹é—´å°±å¯ä»¥ç›¸äº’äº¤æ¢ FIN ä½ä¸º 1 çš„ TCP æ®µ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/img/tcp.png\"\n\t\n\t\n\t\n\tloading=\"lazy\"\n\t\n\t\talt=\"tcp_connect.png\"\n\t\n\t\n\u003e\u003c/p\u003e","title":"æ»´æ»´è¿ç»´å¼€å‘å·¥ç¨‹å¸ˆ"},{"content":"ls æŒ‰ç…§æ—¶é—´æ’åº ls -lt\nä¸¤ä¸ªæ–‡ä»¶æŒ‰ç…§è¡Œdiff diff -w test.sh test2.sh\ndiff test.sh test2.sh\nawk è·å–æœ€åä¸€è¡Œ awk \u0026lsquo;{print $NF}\u0026rsquo;\nk8s ä¸­å‡ ç§æ¢é’ˆæ–¹å¼ livenessProbe æ•è·æ­»é”ã€‚å†³å®šå®¹å™¨ä½•æ—¶é‡å¯ readinessProbe æ£€æŸ¥å®¹å™¨æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚ startupProbe æ£€æŸ¥å®¹å™¨å†…æœåŠ¡æ˜¯å¦å¯åŠ¨å®Œæˆï¼Œ å¯åŠ¨æ¢é’ˆå¯ä»¥ç”¨äºå¯¹æ…¢å¯åŠ¨å®¹å™¨è¿›è¡Œå­˜æ´»æ€§æ£€æµ‹ï¼Œé¿å…å®ƒä»¬åœ¨å¯åŠ¨è¿è¡Œä¹‹å‰å°±è¢« kubelet æ€æ‰ã€‚ k8sé›†ç¾¤ç»„ä»¶ kube-apiserver\netcd\nkube-controller-manager\nkube-scheduler\nkubelet\nkube-proxy\nå®¹å™¨è¿è¡Œæ—¶ï¼ˆå¦‚ Dockerï¼‰\nç½‘ç»œæ’ä»¶ï¼ˆå¦‚ Calicoã€Flannel ç­‰ï¼‰\nå­˜å‚¨æ’ä»¶ï¼ˆå¦‚ Cephã€NFS ç­‰ï¼‰\nåˆ›å»ºpod çš„è¿‡ç¨‹ ç”¨æˆ·é€šè¿‡kubectlæˆ–å…¶ä»–å·¥å…·æäº¤podçš„yamlé…ç½®åˆ°API Server API server æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯è¯·æ±‚ï¼ŒæŠŠé…ç½®ä¿¡æ¯å­˜å‚¨åˆ°etcdä¸­ Scheduler ç›‘å¬åˆ°æ–°podåˆ›å»ºï¼Œæ ¹æ®è°ƒåº¦ç­–ç•¥å°†podè°ƒåº¦åˆ°èŠ‚ç‚¹ kubelet å‘ç°è¯¥èŠ‚ç‚¹éœ€è¦åˆ›å»ºpod æ‹‰å–é•œåƒ åˆ›å»ºsandboxï¼Œsandboxä¸­æ‰€æœ‰å®¹å™¨å…±äº«ç½‘ç»œå’Œå­˜å‚¨å‘½åç©ºé—´ è°ƒç”¨å®¹å™¨è¿è¡Œæ—¶åˆ›å»ºpodä¸­çš„å®¹å™¨ å¦‚æœæœ‰initå®¹å™¨ï¼Œkubeletå…ˆäºåº”ç”¨å®¹å™¨å¯åŠ¨ä»–ä»¬ aws-node åˆ›å»ºpodç½‘å¡ï¼Œåˆ†é…IPåœ°å€ å¥åº·æ£€æŸ¥ï¼Œå¯åŠ¨æ¢é’ˆã€å°±ç»­æ¢é’ˆã€å­˜æ´»æ¢é’ˆå¯åŠ¨è¿è¡Œ kubelet å°†podçš„çŠ¶æ€æ›´æ–°åˆ°APIæœåŠ¡å™¨ï¼Œä¿¡æ¯ä¸Šä¼ åˆ°etcdè¾¾åˆ°å…¨å±€ä¸€è‡´ ingrss åˆ›å»ºæ–¹å¼ yaml é…ç½®\u0026hellip;\ndockerfile add ã€copyåŒºåˆ« ADD : åœ¨éœ€è¦ä» URL ä¸‹è½½æˆ–è‡ªåŠ¨è§£å‹æœ¬åœ°å‹ç¼©æ–‡ä»¶æ—¶ä½¿ç”¨\nå¦‚æœæºæ˜¯æœ¬åœ°å‹ç¼©æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨è§£å‹ å¯ä»¥ä»è¿œç¨‹URLè·å–èµ„æºï¼Œå¦‚ä»HTTPæœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶ ä¼˜å…ˆæ¨èä½¿ç”¨COPY\nå¦‚ä½•å‡å°‘é•œåƒä½“ç§¯ ä½¿ç”¨å°çš„åŸºç¡€é•œåƒ dockerfile ä¸­çš„æ¯ä¸ª FROMã€RUNã€COPY å‘½ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å±‚ï¼Œå¹¶å¢åŠ é•œåƒçš„æ•´ä½“å¤§å°å’Œæ„å»ºæ—¶é—´ã€‚å°†å¤šä¸ªå‘½ä»¤ä½¿ç”¨ä¸€ä¸ªå±‚æ•°ï¼ˆFROMã€RUNã€COPYï¼‰ ä½¿ç”¨å¤šé˜¶æ®µæ„å»º æ¸…ç†ä¸å¿…è¦çš„æ–‡ä»¶ï¼ˆyum clean allåˆ é™¤åŒ…ç®¡ç†ç¼“å­˜ï¼‰ æœ€ååˆ é™¤å®‰è£…åŒ… å°†åº“æ–‡ä»¶æˆ–è€…å®‰è£…åŒ…copyå…¥è¿›è¡Œè€Œä¸æ˜¯ç›´æ¥å®‰è£… ä½¿ç”¨dockerignore æ–‡ä»¶ å¦‚ä½•å°†è¿è¡Œçš„å®¹å™¨æ‰“å°æˆé•œåƒ docker commit \u0026lt;container_id\u0026gt; \u0026lt;image_name\u0026gt;\nps: docker save å°†é•œåƒä¿å­˜ä¸ºtaræ–‡ä»¶ï¼Œdocker load ä»taræ–‡ä»¶åŠ è½½é•œåƒ\nCICDæµç¨‹ git clone \u0026ndash; complie \u0026ndash; build \u0026ndash; push\n","date":1764660029,"permalink":"http://localhost:1313/topic/interview/experience/%E6%99%BA%E8%B0%B1%E5%8D%8E%E7%AB%A0%E8%BF%90%E7%BB%B4%E5%B7%A5%E7%A8%8B%E5%B8%88/","summary":"\u003ch2 id=\"ls-æŒ‰ç…§æ—¶é—´æ’åº\"\u003els æŒ‰ç…§æ—¶é—´æ’åº\n\u003c/h2\u003e\u003cp\u003els -lt\u003c/p\u003e\n\u003ch2 id=\"ä¸¤ä¸ªæ–‡ä»¶æŒ‰ç…§è¡Œdiff\"\u003eä¸¤ä¸ªæ–‡ä»¶æŒ‰ç…§è¡Œdiff\n\u003c/h2\u003e\u003cp\u003ediff -w test.sh test2.sh\u003c/p\u003e\n\u003cp\u003ediff test.sh test2.sh\u003c/p\u003e\n\u003ch2 id=\"awk-è·å–æœ€åä¸€è¡Œ\"\u003eawk è·å–æœ€åä¸€è¡Œ\n\u003c/h2\u003e\u003cp\u003eawk \u0026lsquo;{print $NF}\u0026rsquo;\u003c/p\u003e\n\u003ch2 id=\"k8s-ä¸­å‡ ç§æ¢é’ˆæ–¹å¼\"\u003ek8s ä¸­å‡ ç§æ¢é’ˆæ–¹å¼\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003elivenessProbe æ•è·æ­»é”ã€‚å†³å®šå®¹å™¨ä½•æ—¶é‡å¯\u003c/li\u003e\n\u003cli\u003ereadinessProbe æ£€æŸ¥å®¹å™¨æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚\u003c/li\u003e\n\u003cli\u003estartupProbe æ£€æŸ¥å®¹å™¨å†…æœåŠ¡æ˜¯å¦å¯åŠ¨å®Œæˆï¼Œ å¯åŠ¨æ¢é’ˆå¯ä»¥ç”¨äºå¯¹æ…¢å¯åŠ¨å®¹å™¨è¿›è¡Œå­˜æ´»æ€§æ£€æµ‹ï¼Œé¿å…å®ƒä»¬åœ¨å¯åŠ¨è¿è¡Œä¹‹å‰å°±è¢« kubelet æ€æ‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"k8sé›†ç¾¤ç»„ä»¶\"\u003ek8sé›†ç¾¤ç»„ä»¶\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ekube-apiserver\u003c/p\u003e","title":"æ™ºè°±åç« è¿ç»´å·¥ç¨‹å¸ˆ"},{"content":"pod å¯èƒ½å­˜åœ¨å“ªäº›çŠ¶æ€ Pod Phase\nRunning Succeeded Job å®Œæˆã€CronJob å®Œæˆ Failed ç¨‹åºå´©æºƒã€å®¹å™¨å¯åŠ¨å¤±è´¥ Pending èµ„æºä¸è¶³ã€NodeSelector æ— åŒ¹é…ã€æ‹‰é•œåƒæ…¢ Unknown kubelet æ— æ³•ä¸ŠæŠ¥çŠ¶æ€ï¼ŒèŠ‚ç‚¹æ‰çº¿ã€ç½‘ç»œä¸­æ–­ åˆ›å»º/è°ƒåº¦ç›¸å…³\nContainerCreating å®¹å™¨æ­£åœ¨åˆ›å»ºå®¹å™¨ï¼Œæ‹‰å–é•œåƒ PodInitializing å®¹å™¨æ­£åœ¨åˆå§‹åŒ–ï¼Œæ‰§è¡Œ init å®¹å™¨ ImagePullBackOff æ‹‰é•œåƒå¤±è´¥ï¼ˆè®¤è¯é—®é¢˜ã€é•œåƒä¸å­˜åœ¨ï¼‰ ErrImagePull åŒä¸Šï¼Œæ¯” BackOff æ›´æ—©æœŸ è¿è¡Œä¸­å¼‚å¸¸\nCrashLoopBackOff å®¹å™¨å´©æºƒåï¼Œkubelet ä¼šæ ¹æ® backoff ç­–ç•¥ï¼ˆé»˜è®¤ 10s åé‡è¯•ï¼‰é‡å¯å®¹å™¨ OOMKilled å®¹å™¨å†…å­˜è¶…å‡ºé™åˆ¶ï¼Œè¢« kubelet å¼ºåˆ¶kill BackOff å¤šæ¬¡å¤±è´¥åè¿›å…¥é€€é¿ï¼ˆå¦‚ init å®¹å™¨å¤±è´¥ï¼‰ CrashLoopBackOff ä¸»å®¹å™¨ä¸æ–­å´©æºƒé‡å¯ CreateContainerConfigError å®¹å™¨åˆ›å»ºé…ç½®é”™è¯¯ï¼ˆå¦‚æŒ‚è½½å·ä¸å­˜åœ¨ï¼‰ Error å®¹å™¨é0é€€å‡ºï¼ˆä½†ä¸ä¸€å®šé‡å¯ç­–ç•¥è§¦å‘å¤±è´¥ï¼‰ é€€å‡º/ç»ˆæ­¢\nTerminating å®¹å™¨æ­£åœ¨ç»ˆæ­¢ï¼ˆå¦‚åˆ é™¤ podï¼‰ Completed å®¹å™¨æ­£å¸¸é€€å‡ºï¼ˆå¦‚ä¸»å®¹å™¨é€€å‡ºï¼‰ Failed å®¹å™¨é0é€€å‡ºï¼Œä¸”é‡å¯ç­–ç•¥ä¸º Never ä½ ä»¬å‘Šè­¦æ¶æ„ å› ä¸ºæ¶‰åŠåˆ°å…¬å¸çš„å‘Šè­¦ç³»ç»Ÿï¼Œä¸èƒ½ç›´æ¥å±•ç¤ºã€‚\nCounterå’ŒGauge åŒºåˆ«ï¼Ÿä»€ä¹ˆåœºæ™¯ä¸‹ç”¨Counter Counter\nåªèƒ½é€’å¢ è¿›ç¨‹é‡å¯åå½’é›¶ qpsã€errorã€æ•°æ®å¤„ç†é‡ï¼ˆæ¡/åŒ…/å­—èŠ‚ï¼‰ã€é‡è¯•æ¬¡æ•° Gauge\nå¯å¢å¯å‡ Redis/Kafka/é˜Ÿåˆ—ç­‰åº“å­˜å€¼ã€cpu/memoryã€åœ¨çº¿äººæ•° 502ã€504åŒºåˆ« 502 ç½‘å…³é”™è¯¯ï¼Œé€šå¸¸æ˜¯åç«¯æœåŠ¡è¿”å›äº†æ— æ•ˆå“åº”ï¼ˆå¦‚è¿”å›äº† HTML è€Œä¸æ˜¯ JSONï¼‰ 504 ç½‘å…³è¶…æ—¶ï¼Œé€šå¸¸æ˜¯åç«¯æœåŠ¡å“åº”æ—¶é—´è¶…è¿‡äº†ç½‘å…³çš„è¶…æ—¶æ—¶é—´ 192.168.1.0/25 æ‰€æœ‰çš„IPåœ°å€èŒƒå›´ å…±æœ‰ 2^7 - 2 = 126 ä¸ª IP åœ°å€ 000 0000 192.168.1.1ï½192.168.1.126\n192.168.1.127 æ˜¯å¹¿æ’­åœ°å€ 192.168.1.128 æ˜¯å­ç½‘æ©ç \nä¸€å°æœºå™¨å¦‚ä½•æ”¾è¡Œ80ï¼Œæ‹’ç»æ‰€æœ‰ç«¯å£ iptables\n1 2 3 4 5 6 7 8 9 10 # æ”¾è¡Œ localhost sudo iptables -A INPUT -i lo -j ACCEPT # æ”¾è¡Œå·²å»ºç«‹çš„è¿æ¥ sudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT # æ”¾è¡Œ 80 ç«¯å£ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT # æ‹’ç»æ‰€æœ‰å…¶ä»–ç«¯å£ sudo iptables -P INPUT DROP # ä¿å­˜è§„åˆ™ sudo service iptables save python ä½¿ç”¨è£…é¥°å™¨ç»Ÿè®¡å‡½æ•°è¿è¡Œæ—¶é—´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 import time from functools import wraps def timer_decorator(func): @wraps(func) # ä¿ç•™åŸå‡½æ•°çš„å…ƒä¿¡æ¯ def wrapper(*args, **kwargs): start_time = time.perf_counter() # é«˜ç²¾åº¦è®¡æ—¶å¼€å§‹ result = func(*args, **kwargs) # æ‰§è¡ŒåŸå‡½æ•°å¹¶è·å–ç»“æœ end_time = time.perf_counter() # è®¡æ—¶ç»“æŸ elapsed = end_time - start_time print(f\u0026#34;å‡½æ•° {func.__name__} æ‰§è¡Œè€—æ—¶: {elapsed:.4f} ç§’\u0026#34;) return result # è¿”å›åŸå‡½æ•°ç»“æœ return wrapper @timer_decorator def add_numbers(a, b): time.sleep(0.5) # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ return a + b # è°ƒç”¨å‡½æ•°ï¼Œè‡ªåŠ¨è®¡æ—¶ sum_result = add_numbers(3, 4) print(f\u0026#34;è®¡ç®—ç»“æœ: {sum_result}\u0026#34;) ","date":1764659998,"permalink":"http://localhost:1313/topic/interview/experience/%E7%99%BE%E5%BA%A6%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E8%BF%90%E7%BB%B4/","summary":"\u003ch2 id=\"pod-å¯èƒ½å­˜åœ¨å“ªäº›çŠ¶æ€\"\u003epod å¯èƒ½å­˜åœ¨å“ªäº›çŠ¶æ€\n\u003c/h2\u003e\u003cp\u003ePod Phase\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRunning\u003c/li\u003e\n\u003cli\u003eSucceeded Job å®Œæˆã€CronJob å®Œæˆ\u003c/li\u003e\n\u003cli\u003eFailed ç¨‹åºå´©æºƒã€å®¹å™¨å¯åŠ¨å¤±è´¥\u003c/li\u003e\n\u003cli\u003ePending èµ„æºä¸è¶³ã€NodeSelector æ— åŒ¹é…ã€æ‹‰é•œåƒæ…¢\u003c/li\u003e\n\u003cli\u003eUnknown kubelet æ— æ³•ä¸ŠæŠ¥çŠ¶æ€ï¼ŒèŠ‚ç‚¹æ‰çº¿ã€ç½‘ç»œä¸­æ–­\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåˆ›å»º/è°ƒåº¦ç›¸å…³\u003c/p\u003e","title":"ç™¾åº¦ä¿¡æ¯å®‰å…¨è¿ç»´"},{"content":"ä¸€è½®é¢è¯• k8s ä¸­å‡ ç§æ¢é’ˆæ–¹å¼ livenessProbe æ•è·æ­»é”ã€‚å†³å®šå®¹å™¨ä½•æ—¶é‡å¯ readinessProbe æ£€æŸ¥å®¹å™¨æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚ startupProbe æ£€æŸ¥å®¹å™¨å†…æœåŠ¡æ˜¯å¦å¯åŠ¨å®Œæˆï¼Œ å¯åŠ¨æ¢é’ˆå¯ä»¥ç”¨äºå¯¹æ…¢å¯åŠ¨å®¹å™¨è¿›è¡Œå­˜æ´»æ€§æ£€æµ‹ï¼Œé¿å…å®ƒä»¬åœ¨å¯åŠ¨è¿è¡Œä¹‹å‰å°±è¢« kubelet æ€æ‰ã€‚ è·¨region åŒå†™ã€ä¸‰å†™æ•°æ®ä¸€è‡´æ€§é—®é¢˜ pod èµ„æºèŠ‚ç‚¹æŠ¢å è§£å†³æ–¹æ¡ˆ kubelet å¼€å¯èŠ‚ç‚¹ \u0026ndash;cpu-manager-policy=static\nk8s æœåŠ¡ä¸­æ‰©ç¼©æ€æ ·å®ç° HPA è‡ªåŠ¨æ ¹æ® CPU åˆ©ç”¨ç‡æˆ–è‡ªå®šä¹‰æŒ‡æ ‡æ¥è°ƒæ•´ Deployment çš„å‰¯æœ¬æ•°ã€‚\nä¸€æ¬¡troubleshooting æŠ¥è­¦æ¶æ„å¦‚ä½•åšçš„ å½“å‰å·¥ä½œä¸­çš„å­˜åœ¨çš„ç—›ç‚¹ ä½ ä¼šå…³æ³¨ä¸šåŠ¡å“ªäº›æŒ‡æ ‡ å¹¿å‘Šç«ä»·è¿”å›çš„æ•°æ®æ ¼å¼ ä¸€é“åŠ›æ‰£é¢˜ å¤åŸIPåœ°å€ ","date":1764659961,"permalink":"http://localhost:1313/topic/interview/experience/%E5%AD%97%E8%8A%82%E5%9B%BD%E9%99%85%E7%94%B5%E5%95%86sre/","summary":"\u003ch2 id=\"ä¸€è½®é¢è¯•\"\u003eä¸€è½®é¢è¯•\n\u003c/h2\u003e\u003ch3 id=\"k8s-ä¸­å‡ ç§æ¢é’ˆæ–¹å¼\"\u003ek8s ä¸­å‡ ç§æ¢é’ˆæ–¹å¼\n\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003elivenessProbe æ•è·æ­»é”ã€‚å†³å®šå®¹å™¨ä½•æ—¶é‡å¯\u003c/li\u003e\n\u003cli\u003ereadinessProbe æ£€æŸ¥å®¹å™¨æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡ã€‚\u003c/li\u003e\n\u003cli\u003estartupProbe æ£€æŸ¥å®¹å™¨å†…æœåŠ¡æ˜¯å¦å¯åŠ¨å®Œæˆï¼Œ å¯åŠ¨æ¢é’ˆå¯ä»¥ç”¨äºå¯¹æ…¢å¯åŠ¨å®¹å™¨è¿›è¡Œå­˜æ´»æ€§æ£€æµ‹ï¼Œé¿å…å®ƒä»¬åœ¨å¯åŠ¨è¿è¡Œä¹‹å‰å°±è¢« kubelet æ€æ‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"è·¨region-åŒå†™ä¸‰å†™æ•°æ®ä¸€è‡´æ€§é—®é¢˜\"\u003eè·¨region åŒå†™ã€ä¸‰å†™æ•°æ®ä¸€è‡´æ€§é—®é¢˜\n\u003c/h3\u003e\u003ch3 id=\"pod-èµ„æºèŠ‚ç‚¹æŠ¢å è§£å†³æ–¹æ¡ˆ\"\u003epod èµ„æºèŠ‚ç‚¹æŠ¢å è§£å†³æ–¹æ¡ˆ\n\u003c/h3\u003e\u003cp\u003ekubelet å¼€å¯èŠ‚ç‚¹ \u0026ndash;cpu-manager-policy=static\u003c/p\u003e","title":"å­—èŠ‚å›½é™…ç”µå•†"},{"content":" é¢è¯•ç»å† liunx container \u0026amp;\u0026amp; k8s network database Prometheus program SRE \u0026hellip;.. é¢è¯•é¢˜æ¥è‡ªå´”äº®çš„åšå®¢\nhttps://www.cuiliangblog.cn/detail/article/89\n","date":1764659193,"permalink":"http://localhost:1313/topic/interview/structure/","summary":"\u003cul\u003e\n\u003cli\u003eé¢è¯•ç»å†\u003c/li\u003e\n\u003cli\u003eliunx\u003c/li\u003e\n\u003cli\u003econtainer \u0026amp;\u0026amp; k8s\u003c/li\u003e\n\u003cli\u003enetwork\u003c/li\u003e\n\u003cli\u003edatabase\u003c/li\u003e\n\u003cli\u003ePrometheus\u003c/li\u003e\n\u003cli\u003eprogram\u003c/li\u003e\n\u003cli\u003eSRE\u003c/li\u003e\n\u003cli\u003e\u0026hellip;..\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé¢è¯•é¢˜æ¥è‡ªå´”äº®çš„åšå®¢\u003c/p\u003e\n\u003cp\u003e\u003ca class=\"link\" href=\"https://www.cuiliangblog.cn/detail/article/89\"  target=\"_blank\" rel=\"noopener\"\n    \u003ehttps://www.cuiliangblog.cn/detail/article/89\u003c/a\u003e\u003c/p\u003e","title":"é¢è¯•ä¸“é¢˜çš„ä¸€äº›è§„åˆ’"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 -- åˆ‡æ¢åˆ°mysqlæ•°æ®åº“ MySQL [(none)]\u0026gt; use mysql; -- ç”¨æˆ·æŸ¥çœ‹ MySQL [mysql]\u0026gt; SELECT user FROM user; -- æŸ¥çœ‹ç”¨æˆ·æ‹¥æœ‰æƒé™ MySQL [mysql]\u0026gt; show grants for user; -- åˆ›å»ºç”¨æˆ· mysql\u0026gt; CREATE USER \u0026#39;xxx\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED BY \u0026#39;xxxx\u0026#39;; -- æˆæƒ mysql\u0026gt; GRANT SELECT, INSERT, UPDATE, DELETE ON æ•°æ®åº“.æ•°æ®è¡¨ TO user@\u0026#39;%\u0026#39;; -- åˆ é™¤ç”¨æˆ· mysql\u0026gt; DROP USER XXX ","date":1764594896,"permalink":"http://localhost:1313/ops/mysql/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e-- åˆ‡æ¢åˆ°mysqlæ•°æ®åº“\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eMySQL\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e[(\u003c/span\u003e\u003cspan class=\"k\"\u003enone\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003euse\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003emysql\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"c1\"\u003e-- ç”¨æˆ·æŸ¥çœ‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eMySQL\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003emysql\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eSELECT\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003euser\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eFROM\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"c1\"\u003e-- æŸ¥çœ‹ç”¨æˆ·æ‹¥æœ‰æƒé™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eMySQL\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003emysql\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eshow\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003egrants\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003efor\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"c1\"\u003e-- åˆ›å»ºç”¨æˆ·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003emysql\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eCREATE\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eUSER\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;xxx\u0026#39;\u003c/span\u003e\u003cspan class=\"o\"\u003e@\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eIDENTIFIED\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eBY\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;xxxx\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"c1\"\u003e-- æˆæƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003emysql\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eGRANT\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eSELECT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eINSERT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eUPDATE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eDELETE\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eON\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"err\"\u003eæ•°æ®åº“\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"err\"\u003eæ•°æ®è¡¨\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eTO\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e@\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;%\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"c1\"\u003e-- åˆ é™¤ç”¨æˆ·\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003emysql\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"k\"\u003eDROP\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003eUSER\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eXXX\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"mysql å¸¸ç”¨å‘½ä»¤"},{"content":"é—®é¢˜èƒŒæ™¯ data æ•°æ®ç›˜æŒ‚è½½å¤±è´¥ï¼Œæ—¥å¿—æ–‡ä»¶ä¼šå†™å…¥æ ¹ç›˜ï¼Œå¯¼è‡´ç£ç›˜å¤šæ¬¡æŠ¥è­¦\nå†…æ ¸è¿˜æ²¡æœ‰æ¥å¾—åŠåˆ·æ–°åˆ†åŒºè¡¨ç”Ÿæˆ /dev/nvme1n1p1 è®¾å¤‡æ–‡ä»¶ï¼Œå°±æ‰§è¡Œmkfs å‘½ä»¤ï¼Œå¯¼è‡´æ ¼å¼åŒ–å¤±è´¥ã€‚\nè§£å†³æ–¹æ³• 1 2 3 4 5 6 7 8 9 10 11 12 ... yum install parted -y mkdir -p /data parted -s /dev/nvme1n1 -- mklabel gpt parted -s /dev/nvme1n1 -- mkpart primary ext4 0% 100% partprobe /dev/nvme1n1 udevadm settle while [ ! -e /dev/nvme1n1p1 ]; do sleep 1; done mkfs -t ext4 /dev/nvme1n1p1 mount /dev/nvme1n1p1 /data echo \u0026#39;/dev/nvme1n1p1 /data ext4 defaults 0 0\u0026#39; \u0026gt;\u0026gt; /etc/fstab ... parted ä¸­ 0 ä¸ 0% çš„åŒºåˆ« 0ï¼šè¡¨ç¤ºå¼ºåˆ¶è¦æ±‚åˆ†åŒºä»ç£ç›˜çš„ ç¬¬ 0 ä¸ªå­—èŠ‚/æ‰‡åŒº å¼€å§‹ã€‚\n0%ï¼šè‡ªåŠ¨å¯¹é½ï¼Œæœ€ä½³å¯¹é½ç‚¹ å¼€å§‹åˆ†åŒºã€‚parted ä¼šè‡ªåŠ¨è·³è¿‡å‰é¢çš„ä¿ç•™ç©ºé—´ï¼Œé€šå¸¸å°†èµ·å§‹ä½ç½®è®¾å®šåœ¨ æ‰‡åŒº 2048 å¼€å§‹ã€‚\npartprobe /dev/nvme1n1 é€šçŸ¥å†…æ ¸ï¼ˆKernelï¼‰ç«‹å³é‡è¯»åˆ†åŒºè¡¨\nudevadm settle é˜»å¡ï¼ˆæš‚åœï¼‰è„šæœ¬æ‰§è¡Œï¼Œç›´åˆ° udev å¤„ç†å®Œæ‰€æœ‰è®¾å¤‡äº‹ä»¶ã€‚ æ‰€æœ‰è®¾å¤‡æ–‡ä»¶éƒ½åˆ›å»ºå¥½ï¼Œè„šæœ¬æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚\nç”¨æˆ·æ•°æ®è„šæœ¬ ç”¨æˆ·è„šæœ¬ä½ç½®ï¼š /var/lib/cloud/instance/user-data.txt\næ—¥å¿—ä½ç½®ï¼š /var/log/cloud-init-output.log\n","date":1764560714,"permalink":"http://localhost:1313/ops/linux/asg-node-disk-issue/","summary":"\u003ch2 id=\"é—®é¢˜èƒŒæ™¯\"\u003eé—®é¢˜èƒŒæ™¯\n\u003c/h2\u003e\u003cp\u003edata æ•°æ®ç›˜æŒ‚è½½å¤±è´¥ï¼Œæ—¥å¿—æ–‡ä»¶ä¼šå†™å…¥æ ¹ç›˜ï¼Œå¯¼è‡´ç£ç›˜å¤šæ¬¡æŠ¥è­¦\u003c/p\u003e\n\u003cp\u003eå†…æ ¸è¿˜æ²¡æœ‰æ¥å¾—åŠåˆ·æ–°åˆ†åŒºè¡¨ç”Ÿæˆ /dev/nvme1n1p1 è®¾å¤‡æ–‡ä»¶ï¼Œå°±æ‰§è¡Œmkfs å‘½ä»¤ï¼Œå¯¼è‡´æ ¼å¼åŒ–å¤±è´¥ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/ops/linux/asg-node-disk-issue/disk_error.png\"\n\twidth=\"1567\"\n\theight=\"983\"\n\t\n\tloading=\"lazy\"\n\t\n\t\talt=\"disk_error.png\"\n\t\n\t\n\t\tclass=\"gallery-image\" \n\t\tdata-flex-grow=\"159\"\n\t\tdata-flex-basis=\"382px\"\n\t\n\u003e\u003c/p\u003e\n\u003ch2 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•\n\u003c/h2\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eyum install parted -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emkdir -p /data\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eparted -s /dev/nvme1n1 -- mklabel gpt\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eparted -s /dev/nvme1n1 -- mkpart primary ext4 0% 100%\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003epartprobe /dev/nvme1n1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eudevadm settle\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e ! -e /dev/nvme1n1p1 \u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e sleep 1\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emkfs -t ext4 /dev/nvme1n1p1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emount /dev/nvme1n1p1 /data\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;/dev/nvme1n1p1 /data ext4 defaults 0 0\u0026#39;\u003c/span\u003e \u0026gt;\u0026gt; /etc/fstab\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"\"\u003e\n\u003c/h2\u003e\u003ch3 id=\"parted-ä¸­-0-ä¸-0-çš„åŒºåˆ«\"\u003eparted ä¸­ 0 ä¸ 0% çš„åŒºåˆ«\n\u003c/h3\u003e\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e0\u003c/strong\u003eï¼šè¡¨ç¤ºå¼ºåˆ¶è¦æ±‚åˆ†åŒºä»ç£ç›˜çš„ ç¬¬ 0 ä¸ªå­—èŠ‚/æ‰‡åŒº å¼€å§‹ã€‚\u003c/p\u003e","title":"ASG Node æ•°æ®ç›˜æŒ‚è½½å¤±è´¥"},{"content":"Hugo ç›®å½•ç»“æ„ content/: å­˜æ”¾ä½ çš„ Markdown æ–‡ç« ï¼ˆæ•°æ®åº“ï¼‰ã€‚\nlayouts/ \u0026amp; themes/: å­˜æ”¾å‰ç«¯ä»£ç ï¼ˆHTML/CSS æ¨¡ç‰ˆï¼‰ã€‚\nstatic/: å­˜æ”¾å›¾ç‰‡ã€CNAME æ–‡ä»¶ç­‰é™æ€èµ„æºã€‚\nhugo.toml (æˆ– .yaml/.json): æ•´ä¸ªç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼ˆç›¸å½“äº k8s çš„ configmapï¼‰\nè¯„è®ºç³»ç»Ÿ Giscus è¯„è®ºç³»ç»Ÿ https://giscus.app/zh-CN\nhugo.yaml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 params: # ... å…¶ä»–é…ç½® ... comments: enabled: true provider: giscus # \u0026lt;--- å°†é»˜è®¤çš„ disqus æ”¹ä¸º giscus giscus: repo: hangliuc/blog-hugo # \u0026lt;--- æ¢æˆä½ çš„ \u0026#34;ç”¨æˆ·å/ä»“åº“å\u0026#34; repoID: \u0026#34;R_kgD...\u0026#34; # \u0026lt;--- å¡«å…¥ç¬¬äºŒæ­¥è·å–çš„ data-repo-id category: \u0026#34;Announcements\u0026#34; # \u0026lt;--- ä½ é€‰æ‹©çš„åˆ†ç±»å categoryID: \u0026#34;DIC_kw...\u0026#34; # \u0026lt;--- å¡«å…¥ç¬¬äºŒæ­¥è·å–çš„ data-category-id mapping: pathname lightTheme: light darkTheme: dark_dimmed reactionsEnabled: 1 emitMetadata: 0 é™¤æ­¤ä¹‹å¤–éœ€è¦å»GitHub æˆæƒ Giscus è¯„è®ºç³»ç»Ÿ å‚è€ƒé“¾æ¥ https://giscus.app/zh-CN\nåˆ†ç±»å’Œæ ‡ç­¾ Categories (åˆ†ç±»)ï¼šåƒæ–‡ä»¶å¤¹ä¸€æ ·ï¼Œé€šå¸¸æ˜¯æ ‘çŠ¶ã€æ’ä»–æ€§çš„ã€‚ä¸€ç¯‡æ–‡ç« é€šå¸¸å±äº 1-2 ä¸ªåˆ†ç±»ï¼ˆä¾‹å¦‚â€œè¿ç»´â€ã€â€œå®¹å™¨åŒ–â€ï¼‰ã€‚\nTags (æ ‡ç­¾)ï¼šåƒä¾¿åˆ©è´´ä¸€æ ·ï¼Œæ˜¯æ‰å¹³ã€æè¿°æ€§çš„ã€‚ä¸€ç¯‡æ–‡ç« å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼ˆä¾‹å¦‚â€œDockerâ€ã€â€œç½‘ç»œâ€ã€â€œTroubleshootingâ€ã€â€œLinuxâ€ï¼‰ã€‚\nä¸€äº›å¯ç”¨é“¾æ¥ å›¾æ ‡ä¸‹è½½ç½‘ç«™ https://tabler.io/icons\nä¸€äº›ä½¿ç”¨ hugo-theme-stack æ­å»ºçš„ä¼˜ç§€ç½‘ç«™ https://liuhouliang.com/categories/web/\nhttps://munlelee.github.io/\nhttps://blog.reincarnatey.net/\nhttps://zfj1441.com/archives/\nhttps://hyrtee.github.io/2023/start-blog/#%E8%AF%84%E8%AE%BA\n","date":1764227789,"permalink":"http://localhost:1313/topic/blogging/hugo_usage_method/","summary":"\u003ch2 id=\"hugo-ç›®å½•ç»“æ„\"\u003eHugo ç›®å½•ç»“æ„\n\u003c/h2\u003e\u003cp\u003econtent/: å­˜æ”¾ä½ çš„ Markdown æ–‡ç« ï¼ˆæ•°æ®åº“ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003elayouts/ \u0026amp; themes/: å­˜æ”¾å‰ç«¯ä»£ç ï¼ˆHTML/CSS æ¨¡ç‰ˆï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003estatic/: å­˜æ”¾å›¾ç‰‡ã€CNAME æ–‡ä»¶ç­‰é™æ€èµ„æºã€‚\u003c/p\u003e\n\u003cp\u003ehugo.toml (æˆ– .yaml/.json): æ•´ä¸ªç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼ˆç›¸å½“äº k8s çš„ configmapï¼‰\u003c/p\u003e","title":"åšå®¢ | Hugo åŸºç¡€è§„åˆ’å’Œä½¿ç”¨æ–¹æ³•"},{"content":"vim å¸¸ç”¨å‘½ä»¤ å…‰æ ‡ç§»åŠ¨ h æˆ– é€€æ ¼ï¼šå·¦ç§»ä¸€ä¸ªå­—ç¬¦ l æˆ– ç©ºæ ¼ï¼šå³ç§»ä¸€ä¸ªå­—ç¬¦ jï¼šä¸‹ç§»ä¸€è¡Œ kï¼šä¸Šç§»ä¸€è¡Œ gjï¼šç§»åŠ¨åˆ°ä¸€æ®µå†…çš„ä¸‹ä¸€è¡Œ gkï¼šç§»åŠ¨åˆ°ä¸€æ®µå†…çš„ä¸Šä¸€è¡Œ + æˆ– Enterï¼šç§»è‡³ä¸‹ä¸€è¡Œç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ -ï¼šç§»è‡³ä¸Šä¸€è¡Œç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ wï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨ä¸‹ä¸€ä¸ªå•è¯å¼€å¤´ Wï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼ˆå¿½ç•¥éƒ¨åˆ†æ ‡ç‚¹ï¼‰ eï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨ä¸‹ä¸€ä¸ªå•è¯æœ«å°¾ Eï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨æ ‡ç‚¹ï¼ˆå¦‚æœ‰ï¼‰ bï¼šåç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨ä¸Šä¸€ä¸ªå•è¯å¼€å¤´ Bï¼šåç§»ä¸€ä¸ªå•è¯ï¼ˆå¿½ç•¥éƒ¨åˆ†æ ‡ç‚¹ï¼‰ (ï¼šå‰ç§» 1 å¥ )ï¼šåç§» 1 å¥ {ï¼šå‰ç§» 1 æ®µ }ï¼šåç§» 1 æ®µ ggï¼šåˆ°æ–‡ä»¶å¤´éƒ¨ Gï¼šåˆ°æ–‡ä»¶å°¾éƒ¨ $ï¼šåˆ°è¡Œå°¾ 0ï¼šåˆ°è¡Œé¦– ç¿»å± Ctrl + fï¼šä¸‹ç¿»ä¸€å± Ctrl + bï¼šä¸Šç¿»ä¸€å± Ctrl + dï¼šä¸‹ç¿»åŠå± Ctrl + uï¼šä¸Šç¿»åŠå± Ctrl + eï¼šå‘ä¸‹æ»šåŠ¨ä¸€è¡Œ Ctrl + yï¼šå‘ä¸Šæ»šåŠ¨ä¸€è¡Œ n%ï¼šåˆ°æ–‡ä»¶ n% ä½ç½® zzï¼šå½“å‰è¡Œç§»åˆ°å±å¹•ä¸­å¤® ztï¼šå½“å‰è¡Œç§»åˆ°å±å¹•é¡¶ç«¯ zbï¼šå½“å‰è¡Œç§»åˆ°å±å¹•åº•ç«¯ æ’å…¥ Iï¼šåœ¨å½“å‰è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦å‰æ’å…¥ gIï¼šåœ¨å½“å‰è¡Œç¬¬ä¸€åˆ—æ’å…¥ aï¼šåœ¨å…‰æ ‡åæ’å…¥ Aï¼šåœ¨å½“å‰è¡Œæœ«å°¾æ’å…¥ oï¼šåœ¨ä¸‹æ–¹æ–°å»ºä¸€è¡Œæ’å…¥ Oï¼šåœ¨ä¸Šæ–¹æ–°å»ºä¸€è¡Œæ’å…¥ :r filenameï¼šåœ¨å½“å‰ä½ç½®æ’å…¥å¦ä¸€ä¸ªæ–‡ä»¶å†…å®¹ :[n]r filenameï¼šåœ¨ç¬¬ n è¡Œæ’å…¥å¦ä¸€ä¸ªæ–‡ä»¶å†…å®¹ å‰ªåˆ‡å’Œå¤åˆ¶ [n]xï¼šå‰ªåˆ‡å…‰æ ‡å³è¾¹ n ä¸ªå­—ç¬¦ï¼ˆç›¸å½“äº d[n]lï¼‰ [n]Xï¼šå‰ªåˆ‡å…‰æ ‡å·¦è¾¹ n ä¸ªå­—ç¬¦ï¼ˆç›¸å½“äº d[n]hï¼‰ yï¼šå¤åˆ¶å¯è§†æ¨¡å¼ä¸‹é€‰ä¸­çš„æ–‡æœ¬ yy æˆ– Yï¼šå¤åˆ¶æ•´è¡Œ y[n]wï¼šå¤åˆ¶ n ä¸ªè¯ y[n]lï¼šå¤åˆ¶å…‰æ ‡å³è¾¹ n ä¸ªå­—ç¬¦ y[n]hï¼šå¤åˆ¶å…‰æ ‡å·¦è¾¹ n ä¸ªå­—ç¬¦ y$ï¼šä»å…‰æ ‡åˆ°è¡Œå°¾å¤åˆ¶ y0ï¼šä»å…‰æ ‡åˆ°è¡Œé¦–å¤åˆ¶ :m,nyï¼šå¤åˆ¶ç¬¬ m åˆ° n è¡Œ y1G æˆ– yggï¼šå¤åˆ¶å…‰æ ‡ä»¥ä¸Šæ‰€æœ‰è¡Œ yGï¼šå¤åˆ¶å…‰æ ‡ä»¥ä¸‹æ‰€æœ‰è¡Œ dï¼šåˆ é™¤ï¼ˆå‰ªåˆ‡ï¼‰å¯è§†æ¨¡å¼ä¸‹é€‰ä¸­çš„æ–‡æœ¬ d$ æˆ– Dï¼šåˆ é™¤åˆ°è¡Œå°¾ d[n]wï¼šåˆ é™¤ n ä¸ªå•è¯ d[n]lï¼šåˆ é™¤å…‰æ ‡å³è¾¹ n ä¸ªå­—ç¬¦ d[n]hï¼šåˆ é™¤å…‰æ ‡å·¦è¾¹ n ä¸ªå­—ç¬¦ d0ï¼šåˆ é™¤åˆ°è¡Œé¦– pï¼šåœ¨å…‰æ ‡åç²˜è´´ Pï¼šåœ¨å…‰æ ‡å‰ç²˜è´´ æŸ¥æ‰¾å’Œæ›¿æ¢ /somethingï¼šå‘åæŸ¥æ‰¾ something ?somethingï¼šå‘å‰æŸ¥æ‰¾ something nï¼šå‘åæŸ¥æ‰¾ä¸‹ä¸€ä¸ª Nï¼šå‘å‰æŸ¥æ‰¾ä¸‹ä¸€ä¸ª s/old/newï¼šæ›¿æ¢å½“å‰è¡Œç¬¬ä¸€ä¸ª old s/old/new/gï¼šæ›¿æ¢å½“å‰è¡Œæ‰€æœ‰ old %s/old/new/gï¼šæ›¿æ¢æ•´ä¸ªæ–‡ä»¶çš„æ‰€æœ‰ old æŠ€å·§ :set pasteï¼šè§£å†³ç²˜è´´æ—¶æ ¼å¼é”™ä¹±é—®é¢˜ ","date":1764212573,"permalink":"http://localhost:1313/ops/linux/vim/","summary":"\u003ch1 id=\"vim-å¸¸ç”¨å‘½ä»¤\"\u003evim å¸¸ç”¨å‘½ä»¤\n\u003c/h1\u003e\u003ch2 id=\"å…‰æ ‡ç§»åŠ¨\"\u003eå…‰æ ‡ç§»åŠ¨\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eh\u003c/strong\u003e æˆ– \u003cstrong\u003eé€€æ ¼\u003c/strong\u003eï¼šå·¦ç§»ä¸€ä¸ªå­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003el\u003c/strong\u003e æˆ– \u003cstrong\u003eç©ºæ ¼\u003c/strong\u003eï¼šå³ç§»ä¸€ä¸ªå­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ej\u003c/strong\u003eï¼šä¸‹ç§»ä¸€è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ek\u003c/strong\u003eï¼šä¸Šç§»ä¸€è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003egj\u003c/strong\u003eï¼šç§»åŠ¨åˆ°ä¸€æ®µå†…çš„ä¸‹ä¸€è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003egk\u003c/strong\u003eï¼šç§»åŠ¨åˆ°ä¸€æ®µå†…çš„ä¸Šä¸€è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e+\u003c/strong\u003e æˆ– \u003cstrong\u003eEnter\u003c/strong\u003eï¼šç§»è‡³ä¸‹ä¸€è¡Œç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e-\u003c/strong\u003eï¼šç§»è‡³ä¸Šä¸€è¡Œç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ew\u003c/strong\u003eï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨ä¸‹ä¸€ä¸ªå•è¯å¼€å¤´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eW\u003c/strong\u003eï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼ˆå¿½ç•¥éƒ¨åˆ†æ ‡ç‚¹ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ee\u003c/strong\u003eï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨ä¸‹ä¸€ä¸ªå•è¯æœ«å°¾\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eE\u003c/strong\u003eï¼šå‰ç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨æ ‡ç‚¹ï¼ˆå¦‚æœ‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eb\u003c/strong\u003eï¼šåç§»ä¸€ä¸ªå•è¯ï¼Œåœåœ¨ä¸Šä¸€ä¸ªå•è¯å¼€å¤´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eB\u003c/strong\u003eï¼šåç§»ä¸€ä¸ªå•è¯ï¼ˆå¿½ç•¥éƒ¨åˆ†æ ‡ç‚¹ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e(\u003c/strong\u003eï¼šå‰ç§» 1 å¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e)\u003c/strong\u003eï¼šåç§» 1 å¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e{\u003c/strong\u003eï¼šå‰ç§» 1 æ®µ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e}\u003c/strong\u003eï¼šåç§» 1 æ®µ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003egg\u003c/strong\u003eï¼šåˆ°æ–‡ä»¶å¤´éƒ¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eG\u003c/strong\u003eï¼šåˆ°æ–‡ä»¶å°¾éƒ¨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e$\u003c/strong\u003eï¼šåˆ°è¡Œå°¾\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e0\u003c/strong\u003eï¼šåˆ°è¡Œé¦–\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç¿»å±\"\u003eç¿»å±\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eCtrl + f\u003c/strong\u003eï¼šä¸‹ç¿»ä¸€å±\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCtrl + b\u003c/strong\u003eï¼šä¸Šç¿»ä¸€å±\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCtrl + d\u003c/strong\u003eï¼šä¸‹ç¿»åŠå±\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCtrl + u\u003c/strong\u003eï¼šä¸Šç¿»åŠå±\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCtrl + e\u003c/strong\u003eï¼šå‘ä¸‹æ»šåŠ¨ä¸€è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCtrl + y\u003c/strong\u003eï¼šå‘ä¸Šæ»šåŠ¨ä¸€è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003en%\u003c/strong\u003eï¼šåˆ°æ–‡ä»¶ n% ä½ç½®\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ezz\u003c/strong\u003eï¼šå½“å‰è¡Œç§»åˆ°å±å¹•ä¸­å¤®\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ezt\u003c/strong\u003eï¼šå½“å‰è¡Œç§»åˆ°å±å¹•é¡¶ç«¯\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ezb\u003c/strong\u003eï¼šå½“å‰è¡Œç§»åˆ°å±å¹•åº•ç«¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ’å…¥\"\u003eæ’å…¥\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eI\u003c/strong\u003eï¼šåœ¨å½“å‰è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦å‰æ’å…¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003egI\u003c/strong\u003eï¼šåœ¨å½“å‰è¡Œç¬¬ä¸€åˆ—æ’å…¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ea\u003c/strong\u003eï¼šåœ¨å…‰æ ‡åæ’å…¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eA\u003c/strong\u003eï¼šåœ¨å½“å‰è¡Œæœ«å°¾æ’å…¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eo\u003c/strong\u003eï¼šåœ¨ä¸‹æ–¹æ–°å»ºä¸€è¡Œæ’å…¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eO\u003c/strong\u003eï¼šåœ¨ä¸Šæ–¹æ–°å»ºä¸€è¡Œæ’å…¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e:r filename\u003c/strong\u003eï¼šåœ¨å½“å‰ä½ç½®æ’å…¥å¦ä¸€ä¸ªæ–‡ä»¶å†…å®¹\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e:[n]r filename\u003c/strong\u003eï¼šåœ¨ç¬¬ n è¡Œæ’å…¥å¦ä¸€ä¸ªæ–‡ä»¶å†…å®¹\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å‰ªåˆ‡å’Œå¤åˆ¶\"\u003eå‰ªåˆ‡å’Œå¤åˆ¶\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e[n]x\u003c/strong\u003eï¼šå‰ªåˆ‡å…‰æ ‡å³è¾¹ n ä¸ªå­—ç¬¦ï¼ˆç›¸å½“äº d[n]lï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e[n]X\u003c/strong\u003eï¼šå‰ªåˆ‡å…‰æ ‡å·¦è¾¹ n ä¸ªå­—ç¬¦ï¼ˆç›¸å½“äº d[n]hï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey\u003c/strong\u003eï¼šå¤åˆ¶å¯è§†æ¨¡å¼ä¸‹é€‰ä¸­çš„æ–‡æœ¬\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eyy\u003c/strong\u003e æˆ– \u003cstrong\u003eY\u003c/strong\u003eï¼šå¤åˆ¶æ•´è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey[n]w\u003c/strong\u003eï¼šå¤åˆ¶ n ä¸ªè¯\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey[n]l\u003c/strong\u003eï¼šå¤åˆ¶å…‰æ ‡å³è¾¹ n ä¸ªå­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey[n]h\u003c/strong\u003eï¼šå¤åˆ¶å…‰æ ‡å·¦è¾¹ n ä¸ªå­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey$\u003c/strong\u003eï¼šä»å…‰æ ‡åˆ°è¡Œå°¾å¤åˆ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey0\u003c/strong\u003eï¼šä»å…‰æ ‡åˆ°è¡Œé¦–å¤åˆ¶\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e:m,ny\u003c/strong\u003eï¼šå¤åˆ¶ç¬¬ m åˆ° n è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ey1G\u003c/strong\u003e æˆ– \u003cstrong\u003eygg\u003c/strong\u003eï¼šå¤åˆ¶å…‰æ ‡ä»¥ä¸Šæ‰€æœ‰è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eyG\u003c/strong\u003eï¼šå¤åˆ¶å…‰æ ‡ä»¥ä¸‹æ‰€æœ‰è¡Œ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ed\u003c/strong\u003eï¼šåˆ é™¤ï¼ˆå‰ªåˆ‡ï¼‰å¯è§†æ¨¡å¼ä¸‹é€‰ä¸­çš„æ–‡æœ¬\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ed$\u003c/strong\u003e æˆ– \u003cstrong\u003eD\u003c/strong\u003eï¼šåˆ é™¤åˆ°è¡Œå°¾\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ed[n]w\u003c/strong\u003eï¼šåˆ é™¤ n ä¸ªå•è¯\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ed[n]l\u003c/strong\u003eï¼šåˆ é™¤å…‰æ ‡å³è¾¹ n ä¸ªå­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ed[n]h\u003c/strong\u003eï¼šåˆ é™¤å…‰æ ‡å·¦è¾¹ n ä¸ªå­—ç¬¦\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ed0\u003c/strong\u003eï¼šåˆ é™¤åˆ°è¡Œé¦–\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ep\u003c/strong\u003eï¼šåœ¨å…‰æ ‡åç²˜è´´\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eP\u003c/strong\u003eï¼šåœ¨å…‰æ ‡å‰ç²˜è´´\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æŸ¥æ‰¾å’Œæ›¿æ¢\"\u003eæŸ¥æ‰¾å’Œæ›¿æ¢\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e/something\u003c/strong\u003eï¼šå‘åæŸ¥æ‰¾ something\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e?something\u003c/strong\u003eï¼šå‘å‰æŸ¥æ‰¾ something\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003en\u003c/strong\u003eï¼šå‘åæŸ¥æ‰¾ä¸‹ä¸€ä¸ª\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eN\u003c/strong\u003eï¼šå‘å‰æŸ¥æ‰¾ä¸‹ä¸€ä¸ª\u003c/li\u003e\n\u003cli\u003es/old/newï¼šæ›¿æ¢å½“å‰è¡Œç¬¬ä¸€ä¸ª old\u003c/li\u003e\n\u003cli\u003es/old/new/gï¼šæ›¿æ¢å½“å‰è¡Œæ‰€æœ‰ old\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e%s/old/new/g\u003c/strong\u003eï¼šæ›¿æ¢æ•´ä¸ªæ–‡ä»¶çš„æ‰€æœ‰ old\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æŠ€å·§\"\u003eæŠ€å·§\n\u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e:set paste\u003c/strong\u003eï¼šè§£å†³ç²˜è´´æ—¶æ ¼å¼é”™ä¹±é—®é¢˜\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e","title":"Vim ä½¿ç”¨æŠ€å·§"},{"content":"å®¹å™¨ç½‘ç»œå½±å“å®¿ä¸»æœºå…¥ç½‘é—®é¢˜æ’æŸ¥ é—®é¢˜æè¿° å‘ç°172.27.0.0/16ï¼Œ172.26.0.0/16 ç½‘æ®µçš„æœåŠ¡æ— æ³•è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡\né—®é¢˜æ’æŸ¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 docker network ls NETWORK ID NAME DRIVER SCOPE 8eacdcbf22d7 7b-full_default bridge local f22af6f77037 bridge bridge local 4a56201be716 host host local 6e36d25cdbb0 llama2-13b-lora_default bridge local fb2839792d18 llama3-8b_lora_default bridge local d1f916892b02 none null local 2c9c2578ecce tgi_default bridge local 446845acbad5 v2-9b_default bridge local d1301d605f3c v2-27b-it_default bridge local c3d523d51ee4 v3-8b_default bridge local 1d3cf7bd9665 v4-9b_default bridge local 59aecf59ca81 v31-8b_default bridge local 42cca879c18f webui-docker_default bridge local å‘ç°1d3cf7bd9665ã€1d3cf7bd9665å ç”¨äº†172.27.0.0/16ï¼Œ172.26.0.0/16 ç½‘æ®µï¼Œå¯¼è‡´è·¯ç”±å†²çªã€‚Linux å†…æ ¸çš„è·¯ç”±æœºåˆ¶ä¼šä¼˜å…ˆé€‰æ‹© æœ€åŒ¹é…çš„è·¯ç”±ï¼Œå®ƒä¼šè¦†ç›–é»˜è®¤è·¯ç”±ï¼Œæµé‡ä¼šè¢«é”™è¯¯çš„æµå‘dockerã€‚\nè§£å†³æ–¹æ³• ä¿®æ”¹docker é…ç½®ï¼Œä¸ä½¿ç”¨å†²çªç½‘æ®µ 1 2 3 4 5 6 7 8 9 { \u0026#34;bip\u0026#34;: \u0026#34;192.168.100.1/24\u0026#34;, \u0026#34;default-address-pools\u0026#34;: [ { \u0026#34;base\u0026#34;: \u0026#34;192.168.200.0/20\u0026#34;, \u0026#34;size\u0026#34;: 24 } ] } åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨ç‰¹å®šç½‘ç»œ docker network create \u0026ndash;subnet=xx.xx.xx.xx/24 my_custom_network\nå¦‚æœå¿…é¡»ä¿ç•™å†²çªç½‘æ®µï¼Œä¿®æ”¹å®¿ä¸»æœºè·¯ç”±ï¼Œè®©å¤–éƒ¨ç½‘ç»œä¼˜å…ˆ 1 2 ip route del 172.27.0.0/16 ip route add 172.27.0.0/16 via \u0026lt;å¤–éƒ¨ç½‘å…³\u0026gt; metric 100 ","date":1764124700,"permalink":"http://localhost:1313/ops/docker/docker-network-issue/","summary":"\u003ch1 id=\"å®¹å™¨ç½‘ç»œå½±å“å®¿ä¸»æœºå…¥ç½‘é—®é¢˜æ’æŸ¥\"\u003eå®¹å™¨ç½‘ç»œå½±å“å®¿ä¸»æœºå…¥ç½‘é—®é¢˜æ’æŸ¥\n\u003c/h1\u003e\u003ch2 id=\"é—®é¢˜æè¿°\"\u003eé—®é¢˜æè¿°\n\u003c/h2\u003e\u003cp\u003eå‘ç°172.27.0.0/16ï¼Œ172.26.0.0/16 ç½‘æ®µçš„æœåŠ¡æ— æ³•è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡\u003c/p\u003e\n\u003ch2 id=\"é—®é¢˜æ’æŸ¥\"\u003eé—®é¢˜æ’æŸ¥\n\u003c/h2\u003e\u003cp\u003e\u003cimg src=\"/ops/docker/docker-network-issue/ifconfig.png\"\n\twidth=\"1046\"\n\theight=\"1028\"\n\t\n\tloading=\"lazy\"\n\t\n\t\talt=\"ç½‘å¡é…ç½®\"\n\t\n\t\n\t\tclass=\"gallery-image\" \n\t\tdata-flex-grow=\"101\"\n\t\tdata-flex-basis=\"244px\"\n\t\n\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003edocker network ls\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eNETWORK ID     NAME                      DRIVER    SCOPE\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e8eacdcbf22d7   7b-full_default           bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ef22af6f77037   bridge                    bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e4a56201be716   host                      host      local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e6e36d25cdbb0   llama2-13b-lora_default   bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003efb2839792d18   llama3-8b_lora_default    bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ed1f916892b02   none                      null      local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e2c9c2578ecce   tgi_default               bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e446845acbad5   v2-9b_default             bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ed1301d605f3c   v2-27b-it_default         bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ec3d523d51ee4   v3-8b_default             bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e1d3cf7bd9665   v4-9b_default             bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e59aecf59ca81   v31-8b_default            bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e42cca879c18f   webui-docker_default      bridge    local\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå‘ç°1d3cf7bd9665ã€1d3cf7bd9665å ç”¨äº†172.27.0.0/16ï¼Œ172.26.0.0/16 ç½‘æ®µï¼Œå¯¼è‡´è·¯ç”±å†²çªã€‚Linux å†…æ ¸çš„è·¯ç”±æœºåˆ¶ä¼šä¼˜å…ˆé€‰æ‹© æœ€åŒ¹é…çš„è·¯ç”±ï¼Œå®ƒä¼šè¦†ç›–é»˜è®¤è·¯ç”±ï¼Œæµé‡ä¼šè¢«é”™è¯¯çš„æµå‘dockerã€‚\u003c/p\u003e","title":"å®¹å™¨ç½‘ç»œå½±å“å®¿ä¸»æœºå…¥ç½‘é—®é¢˜æ’æŸ¥"},{"content":"èƒŒæ™¯ ä½¿ç”¨ansibleæ—¶ï¼Œä¸ºäº†é¿å…æ¯æ¬¡æ‰§è¡Œä»»åŠ¡éƒ½éœ€è¦è¾“å…¥sshå¯†ç ï¼Œæˆ‘ä»¬å¯ä»¥ç¼“å­˜sshå¯†é’¥ã€‚\nansible ç¼“å­˜sshå¯†é’¥ å¯åŠ¨ ssh-agent åå°ç¨‹åº eval \u0026ldquo;$(ssh-agent -s)\u0026rdquo;\nå°†å¯†é’¥æ·»åŠ è‡³ ssh-addï¼Œåªè¾“å…¥ä¸€æ¬¡å¯†ç  ssh-add ~/.ssh/xxx\néªŒè¯å¯†é’¥æ˜¯å¦ç¼“å­˜æˆåŠŸ ssh-add -l\n","date":1700964000,"permalink":"http://localhost:1313/ops/ansible/ansible-%E7%BC%93%E5%AD%98ssh%E5%AF%86%E9%92%A5/","summary":"\u003ch1 id=\"èƒŒæ™¯\"\u003eèƒŒæ™¯\n\u003c/h1\u003e\u003cp\u003eä½¿ç”¨ansibleæ—¶ï¼Œä¸ºäº†é¿å…æ¯æ¬¡æ‰§è¡Œä»»åŠ¡éƒ½éœ€è¦è¾“å…¥sshå¯†ç ï¼Œæˆ‘ä»¬å¯ä»¥ç¼“å­˜sshå¯†é’¥ã€‚\u003c/p\u003e\n\u003ch1 id=\"ansible-ç¼“å­˜sshå¯†é’¥\"\u003eansible ç¼“å­˜sshå¯†é’¥\n\u003c/h1\u003e\u003col\u003e\n\u003cli\u003eå¯åŠ¨ ssh-agent åå°ç¨‹åº\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eeval \u0026ldquo;$(ssh-agent -s)\u0026rdquo;\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eå°†å¯†é’¥æ·»åŠ è‡³ ssh-addï¼Œåªè¾“å…¥ä¸€æ¬¡å¯†ç \u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003essh-add ~/.ssh/xxx\u003c/p\u003e","title":"ç¼“å­˜sshå¯†é’¥"}]